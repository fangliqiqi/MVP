import{s as e,_ as l,E as a}from"./index.1672389691407.js";import{d as r,f as o,$ as u,c as s,W as d,P as t,a3 as m,o as n,a as i,U as c}from"./vue.1672389691407.js";async function p(l){return e({url:"/yifu-codegen/method/dsconf/page",method:"GET",params:l})}async function f(l){return e({url:"/yifu-codegen/method/dsconf/"+l,method:"delete"})}const g={"class":"system-add-sql-container"},b={"class":"dialog-footer"},h=c("取 消"),_=c("确 定"),y=r({name:"systemAddSql"});var V=l(Object.assign(y,{emits:["ok"],setup(l,{expose:r,emit:c}){const p=o(null),f=u({isShowDialog:!1,title:"新增数据源",id:null,ruleForm:{name:"",url:"",username:"",password:""}}),y=u({name:[{required:!0,message:"请输入名称",trigger:"blur"}],url:[{required:!0,message:"请输入jdbcUrl",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),V=()=>{p.value&&p.value.clearValidate(),f.isShowDialog=!1},w=()=>{V()},F=()=>{p.value&&p.value.validate((l=>{l&&(null!==f.id&&void 0!==f.id?async function(l){return e({url:"/yifu-codegen/method/dsconf",method:"put",data:l})}(f.ruleForm).then((e=>{e&&200==e.code?(a.success("编辑数据源成功"),c("ok"),V()):a.error(e.msg||"编辑数据源失败")}),(()=>{a.error("编辑数据源单失败")})):async function(l){return e({url:"/yifu-codegen/method/dsconf",method:"post",data:l})}(f.ruleForm).then((e=>{e&&200==e.code?(a.success("新增数据源成功"),c("ok"),V()):a.error(e.msg||"新增数据源失败")}),(()=>{a.error("新增数据源失败")})))}))};return r({openDialog:async e=>{e?(f.title="编辑数据源",f.id=e.id,f.ruleForm=e):(f.title="新增数据源",f.id=null,f.ruleForm={name:"",url:"",username:"",password:""}),f.isShowDialog=!0}}),(e,l)=>{const a=m("el-input"),r=m("el-form-item"),o=m("el-col"),u=m("el-row"),c=m("el-form"),v=m("el-button"),x=m("el-dialog");return n(),s("div",g,[d(x,{title:f.title,modelValue:f.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>f.isShowDialog=e),width:"550px",onClose:V},{footer:t((()=>[i("span",b,[d(v,{onClick:w,size:"default"},{"default":t((()=>[h])),_:1}),d(v,{type:"primary",onClick:F,size:"default"},{"default":t((()=>[_])),_:1})])])),"default":t((()=>[d(c,{ref_key:"formRef",ref:p,model:f.ruleForm,size:"default","label-width":"80px",rules:y},{"default":t((()=>[d(u,null,{"default":t((()=>[d(o,{"class":"mb20"},{"default":t((()=>[d(r,{label:"名称",prop:"name"},{"default":t((()=>[d(a,{placeholder:"请输入名称",modelValue:f.ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>f.ruleForm.name=e),clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(o,{"class":"mb20"},{"default":t((()=>[d(r,{label:"jdbcUrl",prop:"url"},{"default":t((()=>[d(a,{modelValue:f.ruleForm.url,"onUpdate:modelValue":l[1]||(l[1]=e=>f.ruleForm.url=e),type:"textarea",placeholder:"请输入备注信息",maxlength:"255"},null,8,["modelValue"])])),_:1})])),_:1}),d(o,{"class":"mb20"},{"default":t((()=>[d(r,{label:"用户名",prop:"username"},{"default":t((()=>[d(a,{modelValue:f.ruleForm.username,"onUpdate:modelValue":l[2]||(l[2]=e=>f.ruleForm.username=e),placeholder:"请输入用户名",maxlength:"100",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(o,{"class":"mb20"},{"default":t((()=>[d(r,{label:"密码",prop:"password"},{"default":t((()=>[d(a,{modelValue:f.ruleForm.password,"onUpdate:modelValue":l[3]||(l[3]=e=>f.ruleForm.password=e),maxlength:"50",placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-2918ce9b"]]),w=Object.freeze(Object.defineProperty({__proto__:null,"default":V},Symbol.toStringTag,{value:"Module"}));export{V as a,w as b,f as d,p as g};