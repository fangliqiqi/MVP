import{d as e,k as a,$ as t,j as n,c as s,W as l,P as o,aD as i,aA as r,a3 as c,o as d,F as u,a5 as p,O as m,a as f,V as y,u as b,T as _,U as h,ay as I,az as k}from"./vue.1672389691407.js";import{Y as S,Z as T,_ as v,X as j}from"./header.1672389691407.js";import{P as g}from"./ProTable.1672389691407.js";import{_ as x,g as w,e as D,h as C,t as N}from"./index.1672389691407.js";import{j as M,k as H}from"./staff.1672389691407.js";import{m as O}from"./contract.1672389691407.js";import{S as W,a as L}from"./dicts.1672389691407.js";import{g as Y,a as P}from"./log.1672389691407.js";import{i as E}from"./city.1672389691407.js";import{t as R}from"./translate.1672389691407.js";import{E as $}from"./index.16723896914074.js";import{buyHandleStatus as q,buyType as A}from"./dict.1672389691407.js";import"./index.16723896914073.js";const U={"class":"staff-project-container"},V=["innerHTML"],z={"class":"desc-content"},F={"class":"detail-tooltip-container"},J=["innerHTML"],K=["innerHTML"],Q={"class":"desc-content"},X={"class":"detail-tooltip-container"},Z=["innerHTML"],B=(e=>(I("data-v-00984a68"),e=e(),k(),e))((()=>f("div",null,"暂无数据",-1))),G=["onClick"],ee={"class":"diff-content",style:{"margin-left":"50px"}},ae={style:{"font-weight":"bold"}},te=["innerHTML"],ne={key:0},se=["innerHTML"],le={"class":"desc-content"},oe={"class":"table","aria-describedby":"social_security"},ie=["rowspan","colspan"],re={key:0},ce=["innerHTML"],de={"class":"desc-content"},ue={"class":"table","aria-describedby":"accumulation_fund"},pe=["rowspan","colspan"],me=["innerHTML"],fe={"class":"desc-content"},ye=e({name:"staffProject"});var be=x(Object.assign(ye,{props:{info:Object,social:Object,fund:Object},setup(e){const I=e,k=i(),x=r(),ye=a((()=>I.info&&"1"==I.info.projectStatus)),be=t({span:6,DICTS:{collegeDict:{0:"是",1:"否"},fileStatusEnmu:{0:"草稿",1:"已审核"},salaryStatusOption:W,sexOption:L,handle_status:{0:"待办理",1:"已办理",2:"办理失败",3:"已派减",4:"办理中",5:"部分办理失败"}},activeInfo:"contract",dictKeys:["emp_natrue","EMP_SOURCE","work_type","contract_status","emp_married","emp_national","emp_political","emp_registype","education","commercial_satte","social_ecurity_state","fund_status","personnel_state","personnel_type","social_reduce_reason","project_emp_source","customer_business_parent","customer_business_type","customer_business_sub_type","coverage_status"],params:["empNo","empNatrue","unitName","deptName","deptNo","businessPrimaryType","contractType","workingHours","post","enjoinDate","tryPeriod","projectSource","projectStatus"],reduceParams:["leaveReason","leaveTime","leaveRemark"],searchConfig:{},config:[{name:"contract",label:"合同信息",columns:[{dataIndex:"contractParty",title:"合同甲方",minWidth:160,ellipsis:!0},{dataIndex:"contractNo",title:"合同编码",minWidth:100,ellipsis:!0},{dataIndex:"contractName",title:"合同类型",minWidth:100,ellipsis:!0},{dataIndex:"contractStart",title:"合同起始日期",minWidth:100,dateFormat:"YYYY-MM-DD"},{dataIndex:"contractEnd",title:"合同截止日期",minWidth:120,dateFormat:"YYYY-MM-DD"},{dataIndex:"contractTerm",title:"合同年限",minWidth:120},{dataIndex:"inUse",title:"合同状态",minWidth:100},{dataIndex:"remark",title:"备注",minWidth:160,ellipsis:!0},{dataIndex:"option",title:"操作",key:"option",minWidth:80,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"contractOption"}}],request:async e=>{try{const a=await O(Object.assign({},e,{empIdcard:I.info&&I.info.empIdcard,deptNo:I.info&&I.info.deptNo}));if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(a){}return{current:1,total:0,data:[]}}},{name:"insurance",label:"商险信息",columns:[{dataIndex:"buyHandleStatus",title:"商险状态",width:112,valueEnum:q},{dataIndex:"insuranceCompanyName",title:"保险公司",minWidth:100,ellipsis:!0},{dataIndex:"insuranceTypeName",title:"险种",minWidth:80,ellipsis:!0},{dataIndex:"buyType",title:"投保类型",width:80,valueEnum:A},{dataIndex:"buyStandard",title:"购买标准（元）",width:120},{dataIndex:"actualPremium",title:"实际保费（元）",width:120},{dataIndex:"dieDisableQuota",title:"身故或残疾（万元）",width:160},{dataIndex:"medicalQuota",title:"医疗额度（万元）",width:140},{dataIndex:"invoiceNo",title:"发票号",minWidth:80},{dataIndex:"policyNo",title:"保单号",minWidth:80},{dataIndex:"policyStart",title:"保单开始日期",width:116},{dataIndex:"policyEnd",title:"保单结束日期",width:116},{dataIndex:"buyMonth",title:"购买月数",width:80},{dataIndex:"policyEffect",title:"保单生效时间",width:116}],request:async e=>{try{const a=await M(Object.assign({},e,{idCard:I.info.empIdcard,deptNo:I.info.deptNo}));if(200===a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch{}return{current:1,total:0,data:[]}}},{name:"social",label:"社保信息",socailparams:["orderTYpe","socialStatus","socialHouseholdName","socialAddress","socialStartDate","socialReduceDate"]},{name:"fund",label:"公积金信息",fundparams:["orderTYpe","fundStatus","providentHouseholdName","fundAddress","providentStart","fundReduceDate"]},{name:"salary",label:"发薪信息",params:["salaryStatus","bankName","bankSubName","bankNo"]},{name:"logs",label:"操作日志",columns:[{dataIndex:"createName",title:"操作人",minWidth:80},{dataIndex:"updateTime",title:"操作时间",minWidth:140},{dataIndex:"differenceInfo",title:"操作内容",minWidth:160,tooltip:!0,formatter:e=>{if(e.differenceInfo)return e.differenceInfo.split(",").filter((e=>!S.includes(e))).map((e=>Y(e,"subject"))).join(",")}}],request:async e=>{try{if(be.logSource&&be.logSource.length){const{current:a,size:t}=e,n=(a-1)*t,s=a*t;return be.logSource.length>=n?{current:a,total:be.logSource.length,data:be.logSource.slice(n,s)}:{current:1,total:be.logSource.length,data:be.logSource.slice(0,t)}}const a=await H(Object.assign({},e,{projectId:I.info.id}));if(a&&200==a.code&&a.data){const t=a.data;return be.logSource=t,{current:a.data.current,total:t.length,data:t.slice(0,e.size)}}}catch(a){}return{current:1,total:0,data:[]}}}],logSource:[]}),_e=e=>{const a=e.differenceInfo,t=JSON.parse(e.newInfo),n=JSON.parse(e.oldInfo);return a.split(",").filter((e=>!S.includes(e))).map((e=>{let a="<div class='diff-item'>";const s=Y(e,"subject");let l="",o="";return l=P(e,n,be.DICTS),""!=l&&null!=l&&null!=l||(l="[空值]"),o=P(e,t,be.DICTS),""!=o&&null!=o&&null!=o||(o="[空值]"),a+=`<span>修改了</span><span style="font-weight:bold;">${s}</span>：<span style="color:var(\t--hro-color-text-disabeld);" class='old-value'>${l}</span>  ->  <span class='new-val'>${o}</span>`,a+="</div>",a})).join("")};n((()=>{he()}));const he=async()=>{try{const e=await w(be.dictKeys);if(e){const a=Object.assign({},be.DICTS,e);be.DICTS=a,Ie(a)}}catch(e){}},Ie=e=>{be.config.forEach((a=>{"contract"===a.name&&(a.columns=a.columns.map((a=>("inUse"===a.dataIndex&&(a.valueEnum=e.contract_status),a))))}))},ke=e=>{let a=null;switch(e){case"leaveTime":a="减项时间";break;case"leaveRemark":a="减项备注";break;case"leaveReason":a="减项原因";break;default:a=j[e]}return a},Se=(e,a)=>{var t,n,s;let l=a?a[e]:I.info[e];switch(e){case"empNatrue":l=N("emp_natrue",l,be.DICTS);break;case"contractType":l=N("personnel_type",l,be.DICTS);break;case"workingHours":l=N("work_type",l,be.DICTS);break;case"projectSource":l=N("project_emp_source",l,be.DICTS);break;case"businessPrimaryType":l=`${null!=(t=I.info.businessPrimaryType)?t:"--"}/${null!=(n=I.info.businessSecondType)?n:"--"}/${null!=(s=I.info.businessThirdType)?s:"--"}`;break;case"projectStatus":l=1==I.info.projectStatus?"已减项":0==I.info.projectStatus&&0==I.info.status?"草稿":0==I.info.projectStatus&&1==I.info.status?"已审核":D;break;case"salaryStatus":l=N("salaryStatusOption",l,be.DICTS);break;case"leaveReason":l=N("social_reduce_reason",l,be.DICTS);break;case"orderTYpe":l=a.socialReduceDate||a.fundReduceDate?"派减":"派增";break;case"socialStatus":case"fundStatus":l=N("handle_status",a.handleStatus,be.DICTS);break;case"socialAddress":l=E({province:a.socialProvince,city:a.socialCity,area:a.socialTown});break;case"fundAddress":l=E({province:a.fundProvince,city:a.fundCity,area:a.fundTown});break;case"providentStart":case"fundReduceDate":case"socialStartDate":case"socialReduceDate":l=l?C(l).format("YYYY-MM-DD"):D;break;default:if(null==l||""==l)return D}return l};return(e,a)=>{const t=c("el-tooltip"),n=c("el-col"),i=c("el-row"),r=c("el-tab-pane"),S=c("el-tabs");return d(),s("div",U,[l(i,null,{"default":o((()=>[(d(!0),s(u,null,p(be.params,(e=>(d(),m(n,{key:`basicInfo_${e}`,"class":"basic-info-item",span:6},{"default":o((()=>[f("span",{"class":"desc-title",innerHTML:ke(e)},null,8,V),f("div",z,[l(t,{placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:o((()=>[f("div",F,[f("span",{innerHTML:Se(e)},null,8,J)])])),"default":o((()=>[f("span",null,y(Se(e)),1)])),_:2},1024)])])),_:2},1032,["span"])))),128)),b(ye)?(d(!0),s(u,{key:0},p(be.reduceParams,(e=>(d(),m(n,{key:`basicInfo_${e}`,"class":"basic-info-item",span:6},{"default":o((()=>[f("span",{"class":"desc-title",innerHTML:ke(e)},null,8,K),f("div",Q,[l(t,{placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:o((()=>[f("div",X,[f("span",{innerHTML:Se(e)},null,8,Z)])])),"default":o((()=>[f("span",null,y(Se(e)),1)])),_:2},1024)])])),_:2},1032,["span"])))),128)):_("",!0)])),_:1}),l(S,{modelValue:be.activeInfo,"onUpdate:modelValue":a[0]||(a[0]=e=>be.activeInfo=e),type:"card","class":"attach-tabs",style:{"margin-top":"16px"}},{"default":o((()=>[(d(!0),s(u,null,p(be.config,(e=>(d(),m(r,{key:`attach_tab_${e.name}`,label:e.label,name:e.name},{"default":o((()=>["contract"===e.name||"insurance"===e.name?(d(),m(g,{key:0,"row-key":"id",columns:e.columns,request:e.request,showHeader:!1,customEmpty:!0,searchConfig:be.searchConfig},{empty:o((()=>[B])),contractOption:o((e=>[f("span",{style:{color:"var(--el-color-primary)",cursor:"pointer"},onClick:a=>(e=>{const a=x.name;"subject-detail"===a?k.push({name:"subjectContract-detail",query:{id:e.id,projectId:x.params.id}}):"online-detail"===a&&k.push({name:"onlineContract-detail",query:{id:e.id}})})(e)},"详情",8,G)])),_:2},1032,["columns","request","searchConfig"])):"logs"===e.name?(d(),m(g,{key:1,ref_for:!0,ref:"proTableRef","row-key":"id",columns:e.columns,request:e.request,showHeader:!1,customEmpty:"",tableExpand:""},{expand:o((e=>[f("div",ee,[f("div",null,[h(y(e.updateTime)+"由",1),f("span",ae,y(e.createName),1)]),f("div",{innerHTML:_e(e)},null,8,te)])])),_:2},1032,["columns","request"])):"social"===e.name?(d(),s(u,{key:2},[I.social?(d(),s("div",ne,[l(i,null,{"default":o((()=>[(d(!0),s(u,null,p(e.socailparams,(e=>(d(),m(n,{key:`basicInfo_${e}`,"class":"basic-info-item",span:6},{"default":o((()=>[f("span",{"class":"desc-title",innerHTML:ke(e)},null,8,se),f("div",le,[l(t,{placement:"top-start",effect:"dark",content:Se(e,I.social)},{"default":o((()=>[f("span",null,y(Se(e,I.social)),1)])),_:2},1032,["content"])])])),_:2},1032,["span"])))),128))])),_:2},1024),f("table",oe,[(d(!0),s(u,null,p(b(T),((e,a)=>(d(),s("tr",{key:a},[(d(!0),s(u,null,p(e,((e,a)=>(d(),s("td",{key:a,rowspan:e.rowspan||"1",colspan:e.colspan||"1"},y(e.label||b(R)(e,I.social,be.DICTS)),9,ie)))),128))])))),128))])])):(d(),m($,{key:1}))],64)):"fund"===e.name?(d(),s(u,{key:3},[I.fund?(d(),s("div",re,[l(i,null,{"default":o((()=>[(d(!0),s(u,null,p(e.fundparams,(e=>(d(),m(n,{key:`basicInfo_${e}`,"class":"basic-info-item",span:6},{"default":o((()=>[f("span",{"class":"desc-title",innerHTML:ke(e)},null,8,ce),f("div",de,[l(t,{placement:"top-start",effect:"dark",content:Se(e,I.fund)},{"default":o((()=>[f("span",null,y(Se(e,I.fund)),1)])),_:2},1032,["content"])])])),_:2},1032,["span"])))),128))])),_:2},1024),f("table",ue,[(d(!0),s(u,null,p(b(v),((e,a)=>(d(),s("tr",{key:a},[(d(!0),s(u,null,p(e,((e,a)=>(d(),s("td",{key:a,rowspan:e.rowspan||"1",colspan:e.colspan||"1"},y(e.label||b(R)(e,I.fund,be.DICTS)),9,pe)))),128))])))),128))])])):(d(),m($,{key:1}))],64)):"salary"===e.name?(d(),m(i,{key:4},{"default":o((()=>[(d(!0),s(u,null,p(e.params,(e=>(d(),m(n,{key:`basicInfo_${e}`,"class":"basic-info-item",span:6},{"default":o((()=>[f("span",{"class":"desc-title",innerHTML:ke(e)},null,8,me),f("div",fe,[l(t,{placement:"top-start",effect:"dark",content:Se(e)},{"default":o((()=>[f("span",null,y(Se(e)),1)])),_:2},1032,["content"])])])),_:2},1032,["span"])))),128))])),_:2},1024)):_("",!0)])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-00984a68"]]);export{be as default};