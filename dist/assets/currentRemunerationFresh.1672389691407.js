import{r as e}from"./currentRemuneration.16723896914072.js";import{_ as l,E as a}from"./index.1672389691407.js";import{d as o,f as t,$ as r,c as s,W as i,P as d,a3 as u,o as n,a as c,ay as m,az as f,U as p}from"./vue.1672389691407.js";const v={"class":"archives-add-electronic-container"},h=(e=>(m("data-v-43a96912"),e=e(),f(),e))((()=>c("span",{"class":"tips",style:{color:"var(--el-color-danger)"}},"由于数据量庞大，请避开正常作业时间，同时在点击 ‘确认刷新’ 按钮后系统会自动在后台运行刷新动作",-1))),g={"class":"dialog-footer"},_=p("取 消"),w=p("确 定 刷 新"),y=o({name:"currentremunerationfresh"});var D=l(Object.assign(y,{emits:["ok"],setup(l,{expose:o,emit:m}){const f=t(null),p=t(!1),y=r({isShowDialog:!1,id:null,title:"手动刷新",ruleForm:{declareMonth:null},fileList:[],literatureTypesDataSource:{},options:[],pickerOptions:{disabledDate:e=>e&&e.valueOf()>Date.now()}}),D={declareMonth:[{required:!0,message:"请选择月份"}]},M=()=>{y.ruleForm={},y.isShowDialog=!1,f.value&&f.value.clearValidate()},b=()=>{p.value=!1,M()},k=()=>{f.value&&f.value.validate((l=>{l&&(p.value=!0,e(y.ruleForm).then((e=>{e&&200==e.code?(m("ok"),M(),a.success(e.msg||"刷新成功，请稍后查看")):a.error(e.msg||"刷新失败")}),(()=>{a.error("刷新失败")}))["finally"]((e=>{p.value=!1})))}))};return o({openDialog:async e=>{y.title="手动刷新",y.ruleForm={declareMonth:null},setTimeout((()=>{f.value&&f.value.clearValidate()}),100),y.isShowDialog=!0}}),(e,l)=>{const a=u("el-date-picker"),o=u("el-form-item"),t=u("el-col"),r=u("el-row"),m=u("el-form"),V=u("el-button"),Y=u("el-dialog");return n(),s("div",v,[i(Y,{title:y.title,modelValue:y.isShowDialog,"onUpdate:modelValue":l[1]||(l[1]=e=>y.isShowDialog=e),width:"576px",onClose:M,"close-on-click-modal":!1},{footer:d((()=>[c("span",g,[i(V,{onClick:b,size:"default"},{"default":d((()=>[_])),_:1}),i(V,{type:"primary",onClick:k,loading:p.value,size:"default"},{"default":d((()=>[w])),_:1},8,["loading"])])])),"default":d((()=>[i(m,{ref_key:"formRef",ref:f,model:y.ruleForm,rules:D,size:"default","label-width":"140px"},{"default":d((()=>[i(r,null,{"default":d((()=>[i(t,{"class":"mb20"},{"default":d((()=>[i(o,{label:"申报月份",prop:"declareMonth"},{"default":d((()=>[i(a,{modelValue:y.ruleForm.declareMonth,"onUpdate:modelValue":l[0]||(l[0]=e=>y.ruleForm.declareMonth=e),type:"month",placeholder:"请选择申报月份",style:{width:"100%"},format:"YYYYMM","value-format":"YYYYMM","disabled-date":y.pickerOptions.disabledDate},null,8,["modelValue","disabled-date"])])),_:1})])),_:1}),i(t,null,{"default":d((()=>[i(o,null,{"default":d((()=>[h])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-43a96912"]]);export{D as default};