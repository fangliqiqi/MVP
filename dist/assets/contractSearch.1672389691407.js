import{P as t}from"./ProTable.1672389691407.js";import{P as e}from"./index.16723896914072.js";import{E as a}from"./index.16723896914076.js";import{k as i,l as n}from"./header.1672389691407.js";import{_ as s,g as r}from"./index.1672389691407.js";import{g as o,i as d}from"./city.1672389691407.js";import{m as c,n as l,o as m}from"./contract.1672389691407.js";import{d as p,f as u,$ as h,a2 as y,j as _,c as x,W as f,P as I,u as b,aD as v,o as W}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./xlsx.1672389691407.js";import"./vuedraggable.umd.1672389691407.js";const g={"class":"system-dict-container"},k=p({name:"合同查询"});var T=s(Object.assign(k,{setup(s){const p=u(null),k=v(),T=u(null);u(null);const j=h({header:[],title:"员工合同导出"}),E=t=>{let e=Object.assign({},p.value.getParams(),S.params);delete e.size,delete e.current,T.value&&T.value.openDialog(((a,i)=>{const n={...e,exportFields:a.map((t=>t.dataIndex))},s=S.selectionChangeList.map((t=>t.id));s&&s.length&&(n.idList=s),delete n.startEndTime,t({},n).then((t=>{t.code&&200!==t.code&&ElMessageBox.error(t.msg),i(!0)}))}))},S=h({searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},columns:[{dataIndex:"type",title:"审核类型",hideInSearch:!1,minWidth:200,tooltip:!0},{dataIndex:"applyNo",title:"申请编号",minWidth:180},{dataIndex:"empNo",title:"员工编码",minWidth:180},{dataIndex:"empName",title:"员工姓名",minWidth:160},{dataIndex:"empIdcard",title:"身份证号",minWidth:200},{dataIndex:"contractStart",title:"合同起始日期",hideInSearch:!0,minWidth:160,dateFormat:"YYYY-MM-DD"},{dataIndex:"contractEnd",title:"合同截止日期",hideInSearch:!0,minWidth:160,dateFormat:"YYYY-MM-DD"},{dataIndex:"fileAddress",title:"档案所在地",minWidth:200,hideInSearch:!0,tooltip:!0,formatter:t=>d({province:t.fileProvince,city:t.fileCity,town:t.fileTown})},{dataIndex:"subjectDepart",title:"项目名称",minWidth:200,tooltip:!0},{dataIndex:"deptNo",title:"项目编码",minWidth:160},{dataIndex:"empNatrue",title:"员工类型",minWidth:160},{dataIndex:"archivesLocation",title:"档案所在地",minWidth:200,valueType:"addRess",tooltip:!0,hideInTable:!0,params:{pro:"fileProvince",city:"fileCity",town:"fileTown"}},{dataIndex:"fddFlag",title:"签署方式",hideInTable:!0},{dataIndex:"contractName",title:"合同类型",minWidth:200},{dataIndex:"contractSubName",title:"业务细分",minWidth:200},{dataIndex:"situation",title:"签订类型",minWidth:200},{dataIndex:"contractType",title:"签订期限",minWidth:200},{dataIndex:"contractParty",title:"合同甲方",minWidth:200,tooltip:!0},{dataIndex:"subjectUnit",title:"客户名称",minWidth:200,tooltip:!0},{dataIndex:"auditStatus",title:"审核状态",minWidth:160},{dataIndex:"inUse",title:"合同状态",minWidth:160},{dataIndex:"isFile",title:"附件状态",minWidth:160,formatter:t=>"1"===t.isFile?"无":"有",hideInSearch:!0},{dataIndex:"isAtta",title:"附件状态",minWidth:160,hideInTable:!0,valueEnum:{0:"有",1:"无"}},{dataIndex:"isFile",title:"归档状态",minWidth:160},{dataIndex:"createName",title:"创建人",minWidth:180},{dataIndex:"createTime",title:"创建时间",minWidth:180,searchIndex:"startEndTime",startTime:"createTimeStart",endTime:"createTimeEnd",valueType:"dateTimeRange"},{dataIndex:"option",title:"操作",key:"option",minWidth:140,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"批量导出",permission:["employee_export_contract"],onClick:()=>{j.header=i,j.title="员工合同导出",E(l)},icon:"icon-ic_edit_export"},{label:"导出【合并历史】",permission:["employee_export_contract_history"],onClick:()=>{j.header=n,j.title="员工合同【合并历史】导出",E(m)},type:"normal",icon:"icon-ic_edit_export"}],cellBtns:[{text:"详情",prop:"detail",permission:["temployeecontractinfo_detail"]}],dictKeys:["emp_natrue","contract_sign_type","personnel_type","contract_business_type","situation_type","employee_contract_type","contract_audit_status","contract_status","contract_file_status","check_type"],selectionChangeList:[],params:{},areaJson:null,areaProps:{label:"areaName",isLeaf:"isLeaf",children:"children"}}),{columns:C,cellBtns:N,btn:P,searchConfig:w,params:F,areaJson:Y,areaProps:D}=y(S),L=t=>{S.selectionChangeList=t},R=async t=>{try{const e=Object.assign({},t,S.params);delete e.fileAddress;const a=await c(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records.map(((e,a)=>({...e,index:(t.current-1)*t.size+a+1})))}}catch(e){}return{current:1,total:0,data:[]}},B=()=>{S.params={}},M=async(t,e)=>{"detail"===t&&k.push({name:"contractSearch-detail",query:{id:e.id}})};return _((async()=>{(async()=>{try{const t=await r(S.dictKeys);t&&S.columns.map((e=>{switch(e.dataIndex){case"empNatrue":e.valueEnum=t.emp_natrue;break;case"isSign":e.valueEnum=t.contract_sign_type;break;case"contractName":const a=[];for(const e in t.personnel_type)a.push({key:t.personnel_type[e],value:t.personnel_type[e]});e.valueEnum=a;break;case"contractSubName":const i=[];for(const e in t.contract_business_type)i.push({key:t.contract_business_type[e],value:t.contract_business_type[e]});e.valueEnum=i;break;case"situation":const n=[];for(let e in t.situation_type)n.push({key:t.situation_type[e],value:t.situation_type[e]});e.valueEnum=n;break;case"contractType":e.valueEnum=t.employee_contract_type;break;case"auditStatus":e.valueEnum=t.contract_audit_status;break;case"inUse":e.valueEnum=t.contract_status;break;case"isFile":e.valueEnum=t.contract_file_status;break;case"type":e.valueEnum=t.check_type}return e}))}catch(t){}})();const t=o();S.areaJson=t})),(i,n)=>(W(),x("div",g,[f(t,{ref_key:"proTableRef",ref:p,"row-key":"id",columns:b(C),request:R,btn:b(P),multi:!0,searchConfig:b(w),onSelectionChange:L,onOnReset:B},{option:I((t=>[f(e,{array:b(N),model:t,onOnClick:M},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),f(a,{ref_key:"exportExcelRef",ref:T,heads:j.header,title:j.title},null,8,["heads","title"])]))}}),[["__scopeId","data-v-c66a5fd2"]]);export{T as default};