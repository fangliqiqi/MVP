import{d as e,f as a,i as l,$ as r,j as o,c as t,W as i,P as s,aD as d,a3 as n,o as u,a as m,U as f,V as c,F as p,T as g,O as b,ay as y,az as v}from"./vue.1672389691407.js";import{_ as h,g as w,al as _,am as V,an as F,a as x}from"./index.1672389691407.js";import{k as D,l as S,j as k,m as Q,n as C}from"./company.1672389691407.js";const T=e=>(y("data-v-49760fa6"),e=e(),v(),e),U={"class":"detail-dialog"},j=T((()=>m("div",{"class":"label"},"保险公司",-1))),N={"class":"value",title:"12312"},z=T((()=>m("div",{"class":"label"},"收款单位",-1))),E={"class":"value",title:"12312"},I=T((()=>m("div",{"class":"label"},"收款银行",-1))),M={"class":"value",title:"12312"},q=T((()=>m("div",{"class":"label"},"收款银行账号",-1))),L={"class":"value",title:"12312"},O=f("删除"),R=f("删除"),B={"class":"dialog-footer"},K=f("关闭"),P=f("保存并继续创建"),$=e({name:"editInsuranceDialog"});var H=h(Object.assign($,{emits:["ok"],setup(e,{expose:y,emit:v}){var h;d();const T=a(null),$=null==(h=l())?void 0:h.appContext.config.globalProperties.$message,H=(e,a,l)=>{if(V(a)){if(0===Number(a))return void l(new Error("请输入正数最多输入两位小数！"));Number(a)<1e7?l():l(new Error("请输入9999999.99以内的数值！")),l()}else l(new Error("请输入正数最多输入两位小数！"))},W=(e,a,l)=>{""===a?l():F(a)?(Number(a)<1e7?l():l(new Error("请输入9999999.99以内的数值！")),l()):l(new Error("请输入大于等于0的数字最多两位小数！"))},A=(e,a)=>{let l;return l=2===a?e:G.info[e],"[object Number]"===Object.prototype.toString.call(l)?l:l||"--"},G=r({isShowDialog:!1,info:null,title:null,DICTS:{},dictKeys:["downshift_reason"],flag:"",insureForm:{buyStandard:"",medicalQuota:"",dieDisableQuota:"",rate:"",month:""},insureRule:{buyStandard:[{required:!0,message:"请输入购买标准",trigger:"blur"},{validator:H,trigger:"blur"}],medicalQuota:[{required:!1,message:"请输入医疗额度",trigger:"blur"},{validator:W,trigger:"blur"}],dieDisableQuota:[{required:!1,message:"请输入身故或残疾",trigger:"blur"},{validator:W,trigger:"blur"}],rate:[{required:!0,message:"请输入费率",trigger:"blur"},{validator:H,trigger:"blur"}],month:[{required:!0,message:"请输入购买月数",trigger:"blur"},{validator:(e,a,l)=>{_(a)?l():l(new Error("请输入正整数!"))},trigger:"blur"}]}});o((()=>{J()}));const J=async()=>{try{const e=await w(G.dictKeys);e&&(G.DICTS=e)}catch(e){}},X=e=>{k(e).then((e=>{200===e.code&&(G.info=e.data)}))},Y=()=>{T.value&&T.value.resetFields(),G.isShowDialog=!1},Z=()=>{T.value&&T.value.validate((async e=>{if(e)try{if("standard"===G.flag){const e=await D({...G.insureForm,insuranceTypeId:G.info.id});200===e.code?($.success(e.msg||"操作成功"),X(G.info.id),T.value?T.value.resetFields():T.value=null):$.error(e.msg||"操作失败")}if("rate"===G.flag){const e=await S({...G.insureForm,insuranceTypeId:G.info.id});200===e.code?($.success(e.msg||"操作成功"),X(G.info.id),T.value?T.value.resetFields():T.value=null):$.error(e.msg||"操作失败")}}finally{}}))},ee=e=>{x.confirm('<p style="font-size:16px;font-weight:600">是否确定删除?<br/>\n\t\t\t\t<span style="color:red;font-size:14px;font-weight:400">请谨慎操作！</span></p>',{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((()=>{"standard"===G.flag&&Q(e).then((e=>{200===e.code?($.success(e.msg||"操作成功"),X(G.info.id)):$.error(e.msg||"操作失败")})),"rate"===G.flag&&C(e).then((e=>{200===e.code?($.success(e.msg||"操作成功"),X(G.info.id)):$.error(e.msg||"操作失败")}))}))};return y({openDialog:async(e,a)=>{G.title="rate"===a?"费率":"购买标准",X(e),G.flag=a,G.isShowDialog=!0},onSubmit:Z,fommatValue:A}),(e,a)=>{const l=n("el-col"),r=n("el-row"),o=n("el-input"),d=n("el-form-item"),y=n("el-form"),v=n("el-table-column"),h=n("el-button"),w=n("el-table"),_=n("el-dialog");return u(),t("div",U,[i(_,{title:G.title,modelValue:G.isShowDialog,"onUpdate:modelValue":a[6]||(a[6]=e=>G.isShowDialog=e),"close-on-click-modal":!1,width:"816px",onClose:Y},{footer:s((()=>[m("span",B,[i(h,{onClick:a[5]||(a[5]=e=>G.isShowDialog=!1),size:"default"},{"default":s((()=>[K])),_:1}),i(h,{type:"primary",onClick:Z,size:"default"},{"default":s((()=>[P])),_:1})])])),"default":s((()=>[i(r,null,{"default":s((()=>[i(l,{style:{"font-size":"18px","margin-bottom":"12px"}},{"default":s((()=>[f(c(G.info&&G.info.name),1)])),_:1})])),_:1}),i(r,{"class":"baseinfo"},{"default":s((()=>[i(r,{"class":"rowinfo"},{"default":s((()=>[i(l,{span:12},{"default":s((()=>[j,m("div",N,c(G.info&&G.info.insuranceCompanyName),1)])),_:1}),i(l,{span:12},{"default":s((()=>[z,m("div",E,c(G.info&&G.info.receiptUnitName),1)])),_:1})])),_:1}),i(r,null,{"default":s((()=>[i(l,{span:12},{"default":s((()=>[I,m("div",M,c(G.info&&G.info.bankName),1)])),_:1}),i(l,{span:12},{"default":s((()=>[q,m("div",L,c(G.info&&G.info.bankNo),1)])),_:1})])),_:1})])),_:1}),i(y,{inline:!0,model:G.insureForm,rules:G.insureRule,ref_key:"insureForm",ref:T,"class":"demo-form-inline"},{"default":s((()=>["standard"===G.flag?(u(),t(p,{key:0},[i(d,{label:"购买标准(元)",style:{width:"222px"},prop:"buyStandard"},{"default":s((()=>[i(o,{modelValue:G.insureForm.buyStandard,"onUpdate:modelValue":a[0]||(a[0]=e=>G.insureForm.buyStandard=e),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(d,{label:"医疗额度(万元)",style:{width:"222px"},prop:"medicalQuota"},{"default":s((()=>[i(o,{modelValue:G.insureForm.medicalQuota,"onUpdate:modelValue":a[1]||(a[1]=e=>G.insureForm.medicalQuota=e),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(d,{label:"身故或残疾(万元)",style:{width:"222px"},prop:"dieDisableQuota"},{"default":s((()=>[i(o,{modelValue:G.insureForm.dieDisableQuota,"onUpdate:modelValue":a[2]||(a[2]=e=>G.insureForm.dieDisableQuota=e),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])])),_:1})],64)):g("",!0),"rate"===G.flag?(u(),t(p,{key:1},[i(d,{label:"购买月数",style:{width:"222px"},prop:"month"},{"default":s((()=>[i(o,{modelValue:G.insureForm.month,"onUpdate:modelValue":a[3]||(a[3]=e=>G.insureForm.month=e),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])])),_:1}),i(d,{label:"费率",style:{width:"222px"},prop:"rate"},{"default":s((()=>[i(o,{modelValue:G.insureForm.rate,"onUpdate:modelValue":a[4]||(a[4]=e=>G.insureForm.rate=e),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])])),_:1})],64)):g("",!0)])),_:1},8,["model","rules"]),"rate"===G.flag?(u(),b(w,{key:0,"header-cell-class-name":"arch-pro-table-header-cell",data:G.info&&G.info.insuranceTypeRateList},{"default":s((()=>[i(v,{prop:"month",label:"购买月数"}),i(v,{prop:"rate",label:"费率"}),i(v,{label:"操作"},{"default":s((e=>[i(h,{text:!0,onClick:a=>ee(e.row.id),style:{color:"var(--el-color-primary)"}},{"default":s((()=>[O])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):g("",!0),"standard"===G.flag?(u(),b(w,{key:1,"header-cell-class-name":"arch-pro-table-header-cell",data:G.info&&G.info.insuranceTypeStandardList},{"default":s((()=>[i(v,{prop:"buyStandard",label:"购买标准(元)"}),i(v,{prop:"medicalQuota",label:"医疗额度(万元)",formatter:e=>A(e.medicalQuota,2)},null,8,["formatter"]),i(v,{prop:"dieDisableQuota",formatter:e=>A(e.dieDisableQuota,2),label:"身故和残疾(万元)"},null,8,["formatter"]),i(v,{label:"操作"},{"default":s((e=>[i(h,{text:!0,onClick:a=>ee(e.row.id),style:{color:"var(--el-color-primary)"}},{"default":s((()=>[R])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])):g("",!0)])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-49760fa6"]]);export{H as default};