import{a as e,g as a,b as t}from"./addConfig.1672389691407.js";import{P as o}from"./ProTable.1672389691407.js";import{P as n}from"./index.16723896914072.js";import{_ as l}from"./index.1672389691407.js";import{d,f as r,$ as i,j as s,a2 as c,c as m,W as u,P as p,a3 as h,o as f,a as N,J as x,F as g,a5 as C,O as b}from"./vue.1672389691407.js";import"./PreviewDialog.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const I=d({name:"代码生成",components:{ProTable:o,ProButtons:n,addConfigVue:e},setup(){const e=r(null),o=r(null),n=i({searchConfig:{},dsName:null,dsNameDataSource:[],columns:[{dataIndex:"dsName",title:"数据源",hideInTable:!0,valueType:"custom",scopedSlots:{customRender:"dsName"}},{dataIndex:"index",title:"#",hideInSearch:!0},{dataIndex:"tableName",minWidth:140,title:"表名称"},{dataIndex:"tableComment",minWidth:180,title:"表注释",hideInSearch:!0},{dataIndex:"tableCollation",minWidth:120,title:"表编码",hideInSearch:!0},{dataIndex:"engine",title:"引擎",hideInSearch:!0},{dataIndex:"createTime",title:"创建时间",minWidth:140,hideInSearch:!0},{dataIndex:"option",title:"操作",key:"option",minWidth:120,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],cellBtns:[{text:"生成",prop:"gen"}],operation:[{label:"批量生成",prop:"create",handleClick:(e,a)=>{"create"===e.prop&&o.value.openDialog({tableName:a.map((e=>e.tableName)).join("-")},1,{dsName:n.dsName})}}]});return s((()=>{a().then((e=>{e&&200===e.code&&(n.dsNameDataSource=e.data)}))})),{...c(n),request:async e=>{try{const a={...e};n.dsName&&(a.dsName=n.dsName);const o=await t(a);if(o&&200==o.code&&o.data)return{current:o.data.current,total:o.data.size,data:o.data.records.map(((a,t)=>({...a,index:(e.current-1)*e.size+t+1})))}}catch(a){}return{current:1,total:0,data:[]}},onCellClick:async(e,a)=>{"gen"===e&&o.value.openDialog(a,0,{dsName:n.dsName})},proRef:e,addConfigRef:o}}}),y={"class":"system-menu-container"};var j=l(I,[["render",function(e,a,t,o,n,l){const d=h("pro-buttons"),r=h("el-option"),i=h("el-select"),s=h("pro-table"),c=h("add-config-vue");return f(),m("div",y,[u(s,{ref:"proRef","row-key":"id",columns:e.columns,request:e.request,searchConfig:e.searchConfig,multi:!0,operation:e.operation},{option:p((a=>[u(d,{array:e.cellBtns,model:a,onOnClick:e.onCellClick},null,8,["array","model","onOnClick"])])),icon:p((e=>[N("em",{"class":x(`iconfont icon-ic-arrow-fill-up ${e.icon}`)},null,2)])),dsName:p((t=>[u(i,{modelValue:e.dsName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.dsName=a),modelModifiers:{trim:!0},style:{width:"100%"},placeholder:t.placeholder||"请选择",clearable:"",filterable:""},{"default":p((()=>[(f(!0),m(g,null,C(e.dsNameDataSource,((e,a)=>(f(),b(r,{key:"arch_search_props_"+t.dateIndex+"_"+a,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","placeholder"])])),_:1},8,["columns","request","searchConfig","operation"]),u(c,{ref:"addConfigRef"},null,512)])}]]);export{j as default};