import{P as e}from"./ProTable.1672389691407.js";import{E as t}from"./index.16723896914074.js";import{Y as a,ar as s}from"./header.1672389691407.js";import{_ as o,g as n}from"./index.1672389691407.js";import{S as r,a as l}from"./dicts.1672389691407.js";import{b as i,c}from"./log.1672389691407.js";import{d,f as p,$ as u,j as m,c as f,O as g,P as y,o as _,a as h,U as S,V as j}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./city.1672389691407.js";const I={"class":"operate-log-container"},v={"class":"diff-content",style:{"margin-left":"50px"}},x={style:{"font-weight":"bold"}},b=["innerHTML"],T=d({name:"detailRecord"});var C=o(Object.assign(T,{props:{logSource:{type:Array,"default":()=>[]}},setup(o){const d=o,T=p(null),C=u({dictKeys:["emp_natrue","emp_married","emp_national","emp_political","emp_registype","education","commercial_satte","social_ecurity_state","fund_status","personnel_state","EMP_SOURCE","social_reduce_reason","project_emp_source"],DICTS:{collegeDict:{0:"否",1:"是"},fileStatusEnmu:{0:"草稿",1:"已审核"},salaryStatusOption:r,sexOption:l},searchConfig:{pagination:!1},columns:[{dataIndex:"createName",title:"操作人",minWidth:160},{dataIndex:"updateTime",title:"操作时间",minWidth:160},{dataIndex:"differenceInfo",title:"操作内容",minWidth:160,tooltip:!0,formatter:e=>{if(e.differenceInfo)return O(e.differenceInfo)}}],logSource:[]}),O=e=>e.split(",").filter((e=>!a.includes(e))).map((e=>i(e,s))).join(",").replace(/&emsp;/g,""),w=e=>{const t=e.differenceInfo,o=JSON.parse(e.newInfo),n=JSON.parse(e.oldInfo);return t.split(",").filter((e=>!a.includes(e))).map((e=>{let t="<div class='diff-item'>";const a=i(e,s);let r="",l="";return r=c(e,n,s),""!=r&&null!=r&&null!=r||0==r||(r="[空值]"),l=c(e,o,s),""!=l&&null!=l&&null!=l||0==l||(l="[空值]"),t+=`<span>修改了</span><span style="font-weight:bold;">${a}</span>：<span style="color:var(\t--hro-color-text-disabeld);" class='old-value'>${r}</span>  ->  <span class='new-val'>${l}</span>`,t+="</div>",t})).join("")},E=async e=>{try{if(d.logSource&&d.logSource.length){const{current:t,size:a}=e,s=(t-1)*a,o=t*a;return d.logSource.length>=s?{current:t,total:d.logSource.length,data:d.logSource.slice(s,o)}:{current:1,total:d.logSource.length,data:d.logSource.slice(0,a)}}}catch(t){}return{current:1,total:0,data:[]}};m((()=>{k()}));const k=async()=>{try{const e=await n(C.dictKeys);e&&(C.DICTS=Object.assign({},C.DICTS,e))}catch(e){}};return(a,s)=>(_(),f("div",I,[d.logSource.length>0?(_(),g(e,{key:0,ref_key:"proTableRef",ref:T,"row-key":"id",columns:C.columns,request:E,showHeader:!1,customEmpty:"",tableExpand:"",searchConfig:C.searchConfig},{expand:y((e=>[h("div",v,[h("div",null,[S(j(e.updateTime)+"由",1),h("span",x,j(e.createName),1)]),h("div",{innerHTML:w(e)},null,8,b)])])),_:1},8,["columns","searchConfig"])):(_(),g(t,{key:1}))]))}}),[["__scopeId","data-v-d9aa6850"]]);export{C as default};