import{P as e}from"./ProTable.1672389691407.js";import{y as a,z as t,A as s}from"./eleContract.16723896914072.js";import{c as o}from"./dicts.1672389691407.js";import{_ as i,E as l}from"./index.1672389691407.js";import{d as n,k as d,f as r,$ as c,c as u,W as m,P as g,u as f,n as p,a3 as h,o as y,a as C,ay as I,az as j,U as v}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const k={"class":"invite-container"},w=(e=>(I("data-v-619f7e52"),e=e(),j(),e))((()=>C("div",null,"暂无数据",-1))),x={"class":"dialog-footer"},S=v("取 消"),_=v("确 定"),D=n({name:"accountCerDialog"});var P=i(Object.assign(D,{props:{title:String,type:String},emits:["ok"],setup(i,{expose:n,emit:I}){const j=i,v=d((()=>j.title||"授权印章")),D=r(null),P=c({isShowDialog:!1,loading:!1,searchConfig:{pagination:!1},info:null,columns:[{dataIndex:"sealName",title:"印章名称",minWidth:180,ellipsis:!0},{dataIndex:"status",title:"印章状态",minWidth:100,valueEnum:o},{dataIndex:"createTime",title:"创建时间",minWidth:140}],selectionChangeList:[],sealIds:[]}),z=e=>{P.selectionChangeList=e},W=async e=>{try{const t=await a(e);if(t&&200==t.code&&t.data){let e=null;return"auth"===j.type?e=t.data.filter((e=>!P.sealIds.includes(e.sealId))):"noauth"===j.type&&(e=t.data.filter((e=>P.sealIds.includes(e.sealId)))),{current:1,total:e.length,data:e}}}catch(t){}return{current:1,total:0,data:[]}},b=()=>{P.isShowDialog=!1,P.loading=!1},A=()=>{const e=P.selectionChangeList.filter((e=>!P.sealIds.includes(e.id)));e&&0!==e.length?(P.loading=!0,"auth"===j.type?t({id:e.map((e=>e.id)).join(","),fddPersonAccountId:P.info.id}).then((e=>{e&&200===e.code?(l.success(e.msg||"授权成功!"),b(),I("ok")):l.error(e.msg||"授权失败")}),(e=>{l.error(e&&e.msg||"授权失败")}))["finally"]((()=>{P.loading=!1})):"noauth"===j.type&&s({id:e.map((e=>e.id)).join(","),fddPersonAccountId:P.info.id}).then((e=>{e&&200===e.code?(l.success(e.msg||"取消授权印章成功!"),b(),I("ok")):l.error(e.msg||"取消授权印章失败")}),(e=>{l.error(e&&e.msg||"取消授权印章失败")}))["finally"]((()=>{P.loading=!1}))):l.error("请先选择印章")};return n({openDialog:async(e,a)=>{P.info=e,P.isShowDialog=!0,P.sealIds=a,p((()=>{D.value&&D.value.refresh()}))}}),(a,t)=>{const s=h("el-button"),o=h("el-dialog");return y(),u("div",k,[m(o,{title:f(v),modelValue:P.isShowDialog,"onUpdate:modelValue":t[0]||(t[0]=e=>P.isShowDialog=e),width:"816px","close-on-click-modal":!1,onClose:b},{footer:g((()=>[C("span",x,[m(s,{onClick:b,size:"default"},{"default":g((()=>[S])),_:1}),m(s,{type:"primary",onClick:A,loading:P.loading,size:"default"},{"default":g((()=>[_])),_:1},8,["loading"])])])),"default":g((()=>[m(e,{ref_key:"proRef",ref:D,"row-key":"id",columns:P.columns,request:W,showHeader:!1,customEmpty:"",manualRequest:"",multi:"",onSelectionChange:z,searchConfig:P.searchConfig},{empty:g((()=>[w])),_:1},8,["columns","searchConfig"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-619f7e52"]]);export{P as default};