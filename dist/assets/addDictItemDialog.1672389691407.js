import{$ as t,E as e,a,a2 as i,a3 as o}from"./index.1672389691407.js";import{P as l}from"./ProTable.1672389691407.js";import n from"./addDicItem.1672389691407.js";import{P as d}from"./index.16723896914072.js";import{d as s,f as r,$ as c,c as m,W as p,P as u,n as h,a3 as f,o as y,T as g,a as x,J as w,U as I}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const v={"class":"system-add-dict-item-list-container"},D={key:0,"class":"options-btn-container"},b=I(" 新增 "),j=s({name:"addDictItemDialog"}),k=Object.assign(j,{setup(s,{expose:I}){const j=r(null),k=r(null),S=c({isShowDialog:!1,id:null,item:null,modal:null,searchConfig:{option:{customRender:"btns"}}}),W=c([{dataIndex:"type",title:"字典编码",minWidth:160,fixed:"left",tooltip:!0},{dataIndex:"value",title:"数据值",minWidth:140,tooltip:!0},{dataIndex:"label",title:"标签名",minWidth:120,tooltip:!0},{dataIndex:"description",title:"描述",minWidth:160,tooltip:!0},{dataIndex:"parentLabelOfValue",title:"父级字典值",minWidth:160,tooltip:!0},{dataIndex:"sortOrder",title:"排序",hideInSearch:!0,minWidth:80},{dataIndex:"remark",title:"备注信息",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"option",title:"操作",key:"option",minWidth:160,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}]),_=()=>{k.value&&k.value.openDialog({item:{type:S.item.type,dictId:S.item.id},modal:S.modal})},C=()=>S.modal&&"0"===S.modal.systemFlag,O=c([{text:"编辑",prop:"edit",tooltip:"当前字典不可删除",isGray:C},{text:"删除",prop:"delete",tooltip:"当前字典不可删除",isGray:C}]),R=()=>{j.value&&j.value.refresh()},P=(t,o)=>{"edit"===t?k.value&&k.value.openDialog({item:o,modal:S.modal}):"delete"===t&&a.confirm("是否确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const t=await i(o.id);t&&200===t.code?(e.success("删除成功"),R()):e.error(t.msg||"删除失败")}catch(t){e.error("删除失败")}}))["catch"]((()=>{}))},T=async t=>{try{let e=t;S.item&&(e=Object.assign({},t,{type:S.item.type}));const a=await o(e);if(a&&200===a.code)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(e){}return{current:1,total:0,data:[]}},V=()=>{S.isShowDialog=!1};return I({openDialog:async a=>{S.id=a.id,S.item=a,S.isShowDialog=!0,h((async()=>{await(async a=>{try{const i=await t(a);if(i&&200===i.code){const t={...i.data};S.modal=t}else e.error(i.msg||"获取字典详情失败")}catch(i){V(),e.error("获取字典详情失败")}})(a.id),R()}))}}),(t,e)=>{const a=f("svg-icon"),i=f("el-button"),o=f("el-dialog");return y(),m("div",v,[p(o,{title:"配置字典项",modelValue:S.isShowDialog,"onUpdate:modelValue":e[0]||(e[0]=t=>S.isShowDialog=t),width:"1200px","close-on-click-modal":!1,style:{"max-width":"calc(100vw - 40px)"}},{"default":u((()=>[p(l,{ref_key:"proRef",ref:j,"row-key":"id",columns:W,request:T,showHeader:!1,searchConfig:S.searchConfig,manualRequest:!0},{btns:u((()=>[S.modal&&"0"===S.modal.systemFlag?g("",!0):(y(),m("div",D,[p(i,{type:"primary","class":"arch-btn",size:"default",onClick:_},{"default":u((()=>[p(a,{name:"iconfont icon-ic_edit_add"}),b])),_:1})]))])),option:u((t=>[p(d,{array:O,model:t,onOnClick:P},null,8,["array","model"])])),icon:u((t=>[x("em",{"class":w(`iconfont ${t.icon}`)},null,2)])),_:1},8,["columns","searchConfig"])])),_:1},8,["modelValue"]),p(n,{ref_key:"addDicItemRef",ref:k,onOk:R},null,512)])}}});export{k as default};