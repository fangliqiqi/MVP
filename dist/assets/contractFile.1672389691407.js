import{P as t}from"./ProTable.1672389691407.js";import{P as e}from"./index.16723896914072.js";import{B as a}from"./index.16723896914077.js";import n from"./editContractFile.1672389691407.js";import{i}from"./header.1672389691407.js";import{_ as o,g as r,f as d}from"./index.1672389691407.js";import{g as s}from"./city.1672389691407.js";import{i as l,c}from"./contract.1672389691407.js";import{d as m,f as p,$ as u,a2 as h,j as f,c as y,W as x,P as _,u as I,a3 as b,o as W,a as v,U as k,ay as j,az as w}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./xlsx.1672389691407.js";import"./excel.1672389691407.js";import"./file.1672389691407.js";import"./index.16723896914078.js";const g=t=>(j("data-v-69de35d3"),t=t(),w(),t),S={"class":"system-dict-container"},N={"class":"el-dropdown-link"},E=k(" 模板下载 "),T=g((()=>v("a",{href:"/template/员工合同归档批量更新模板.xlsx",download:""}," 批量导入模板",-1))),C=m({name:"合同归档"});var D=o(Object.assign(C,{setup(o){const m=p(null),k=p(null),j=p(null),w=u({searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},columns:[{dataIndex:"type",title:"审核类型",hideInSearch:!1,minWidth:200,tooltip:!0},{dataIndex:"applyNo",title:"申请编号",hideInSearch:!0,minWidth:180},{dataIndex:"empName",title:"员工姓名",minWidth:160},{dataIndex:"empIdcard",title:"身份证号",minWidth:200},{dataIndex:"archivesLocation",title:"档案所在地",minWidth:200,valueType:"addRess",tooltip:!0,params:{pro:"fileProvince",city:"fileCity",town:"fileTown"}},{dataIndex:"empNatrue",title:"员工类型",minWidth:160},{dataIndex:"contractName",title:"合同类型",minWidth:200},{dataIndex:"situation",title:"签订类型",minWidth:200},{dataIndex:"subjectDepart",title:"项目名称",minWidth:200,tooltip:!0},{dataIndex:"deptNo",title:"项目编码",minWidth:160},{dataIndex:"subjectUnit",title:"客户名称",minWidth:200,tooltip:!0},{dataIndex:"contractParty",title:"合同甲方",minWidth:200,tooltip:!0},{dataIndex:"contractStart",title:"合同起始日期",hideInSearch:!0,minWidth:160,dateFormat:"YYYY-MM-DD"},{dataIndex:"contractEnd",title:"合同截止日期",hideInSearch:!0,minWidth:160,dateFormat:"YYYY-MM-DD"},{dataIndex:"contractType",title:"签订期限",minWidth:200,tooltip:!0},{dataIndex:"applyNo",title:"申请编号",minWidth:180,hideInTable:!0},{dataIndex:"createName",title:"创建人",minWidth:180,hideInSearch:!0},{dataIndex:"createTime",title:"创建时间",minWidth:180,hideInSearch:!0},{dataIndex:"inUse",title:"合同状态",hideInSearch:!0,minWidth:160},{dataIndex:"isFile",title:"附件状态",minWidth:160,formatter:t=>"1"===t.isFile?"无":"有",hideInSearch:!0},{dataIndex:"isAtta",title:"附件状态",minWidth:160,hideInTable:!0,valueEnum:{0:"有",1:"无"}},{dataIndex:"isFile",title:"归档状态",minWidth:160},{dataIndex:"option",title:"操作",key:"option",minWidth:140,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"批量更新",permission:["temployeecontractinfo_batch_update"],onClick:()=>{k.value&&k.value.openDialog()},icon:"icon-ic_edit_refresh"}],cellBtns:[{text:"归档",prop:"file",permission:["temployeecontractinfo_filing"]}],dictKeys:["emp_natrue","contract_status","situation_type","contract_file_status","employee_contract_type","personnel_type","check_type"],params:{},areaJson:null,areaProps:{label:"areaName",isLeaf:"isLeaf",children:"children"}}),{columns:g,cellBtns:C,btn:D,searchConfig:F,params:P,areaJson:Y,areaProps:B}=h(w),O=async t=>{try{const e=Object.assign({},t,w.params);delete e.fileAddress;const a=await l(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records.map(((e,a)=>({...e,index:(t.current-1)*t.size+a+1})))}}catch(e){}return{current:1,total:0,data:[]}},R=()=>{w.params={}},U=()=>{m.value.refresh()},M=async(t,e)=>{"file"===t&&(await c(e.id),j.value.openDialog(e))};return f((async()=>{(async()=>{try{const t=await r(w.dictKeys);t&&w.columns.map((e=>{switch(e.dataIndex){case"empNatrue":e.valueEnum=t.emp_natrue;break;case"contractName":const a=[];for(let e in t.personnel_type)a.push({key:t.personnel_type[e],value:t.personnel_type[e]});e.valueEnum=a;break;case"situation":const n=[];for(let e in t.situation_type)n.push({key:t.situation_type[e],value:t.situation_type[e]});e.valueEnum=n;break;case"auditStatus":e.valueEnum=t.contract_audit_status;break;case"contractType":e.valueEnum=t.employee_contract_type;break;case"inUse":e.valueEnum=t.contract_status;break;case"isFile":e.valueEnum=t.contract_file_status;break;case"type":e.valueEnum=t.check_type}return e}))}catch(t){}})();const t=s();w.areaJson=t})),(o,r)=>{const s=b("el-icon"),l=b("el-button"),c=b("el-dropdown-item"),p=b("el-dropdown-menu"),u=b("el-dropdown");return W(),y("div",S,[x(t,{ref_key:"proTableRef",ref:m,"row-key":"id",columns:I(g),request:O,btn:I(D),searchConfig:I(F),onOnReset:R},{extBtns:_((()=>[x(u,{"class":"arch-btn","popper-class":"module-download"},{dropdown:_((()=>[x(p,null,{"default":_((()=>[x(c,null,{"default":_((()=>[T])),_:1})])),_:1})])),"default":_((()=>[v("span",N,[x(l,{size:"default"},{"default":_((()=>[E,x(s,{"class":"el-icon--right"},{"default":_((()=>[x(I(d))])),_:1})])),_:1})])])),_:1})])),option:_((t=>[x(e,{array:I(C),model:t,onOnClick:M},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),x(a,{ref_key:"batchImportDialogRef",ref:k,header:I(i),url:"/yifu-archives/method/temployeecontractinfo/batchUpdate",errName:"合同归档批量更新",title:"批量更新",download:!0,onOk:U},null,8,["header"]),x(n,{ref_key:"contractFileRef",ref:j,onOk:U},null,512)])}}}),[["__scopeId","data-v-69de35d3"]]);export{D as default};