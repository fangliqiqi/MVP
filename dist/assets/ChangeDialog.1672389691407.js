import{buyType as e}from"./dict.1672389691407.js";import{m as l}from"./handle.1672389691407.js";import{E as a}from"./index.1672389691407.js";import{d as o,f as r,$ as u,c as d,O as t,P as m,T as i,a3 as n,o as s,a as p,W as c,F as y,a5 as f,u as b,U as g}from"./vue.1672389691407.js";const V={"class":"information-change"},F=p("span",{style:{color:"#313840"}},"起止保时间变动，不会触发“预估保费”变化",-1),h={"class":"dialog-footer"},w=g("取 消"),_=g("确 定"),D=o({name:"informationChangeDialog"}),N=Object.assign(D,{emits:["ok"],setup(o,{expose:g,emit:D}){const N=r(null),Y=u({isShowDialog:!1,submiting:!1,ruleForm:{policyStart:null,policyEnd:null,reason:null}}),S={reason:[{required:!0,message:"请输入变更原因",trigger:"blur"}],policyEnd:[{required:!1,validator:(e,l,a)=>{let o=new Date(Y.ruleForm.policyStart).getTime(),r=new Date(l).getTime();0==o||0==r?a():r<=o?a(new Error("保单结束时间需要大于开始时间")):a()},trigger:"change"}]},T=()=>{Y.isShowDialog=!1},k=()=>{var e;null==(e=N.value)||e.validate((async e=>{if(e){const{policyStart:e,policyEnd:o,buyType:r}=Y.ruleForm;if(e||o||r){Y.submiting=!0;try{const e=await l(Y.ruleForm);200==e.code?(T(),D("ok"),a.success("信息变更成功")):a.error(e.msg)}finally{Y.submiting=!1}}else a.warning("保单开始时间、结束时间、保单类型至少填写一个")}}))};return g({openDialog:e=>{Y.isShowDialog=!0,e&&(Y.ruleForm={id:e.id,policyStart:e.policyStart,policyEnd:e.policyEnd,empName:e.empName,insuranceCompanyName:e.insuranceCompanyName,empIdcardNo:e.empIdcardNo,insuranceTypeName:e.insuranceTypeName,buyType:e.buyType,reason:null})}}),(l,a)=>{const o=n("el-input"),r=n("el-form-item"),u=n("el-date-picker"),g=n("el-option"),D=n("el-select"),v=n("el-col"),E=n("el-row"),U=n("el-form"),C=n("el-button"),M=n("el-dialog");return s(),d("div",V,[Y.isShowDialog?(s(),t(M,{key:0,title:"参保信息变更",modelValue:Y.isShowDialog,"onUpdate:modelValue":a[8]||(a[8]=e=>Y.isShowDialog=e),width:"750px","close-on-click-modal":!1,onClose:T},{footer:m((()=>[p("span",h,[c(C,{onClick:T,size:"default"},{"default":m((()=>[w])),_:1}),c(C,{type:"primary",onClick:k,size:"default",loading:Y.submiting},{"default":m((()=>[_])),_:1},8,["loading"])])])),"default":m((()=>[c(U,{size:"default",ref_key:"formRef",ref:N,rules:S,model:Y.ruleForm,"label-width":"100px"},{"default":m((()=>[c(E,null,{"default":m((()=>[c(v,{span:12},{"default":m((()=>[c(r,{label:"姓名"},{"default":m((()=>[c(o,{modelValue:Y.ruleForm.empName,"onUpdate:modelValue":a[0]||(a[0]=e=>Y.ruleForm.empName=e),disabled:""},null,8,["modelValue"])])),_:1}),c(r,{label:"保险公司"},{"default":m((()=>[c(o,{modelValue:Y.ruleForm.insuranceCompanyName,"onUpdate:modelValue":a[1]||(a[1]=e=>Y.ruleForm.insuranceCompanyName=e),disabled:""},null,8,["modelValue"])])),_:1}),c(r,{label:"保单开始时间"},{"default":m((()=>[c(u,{style:{width:"100%"},type:"date",placeholder:"请选择保单开始日期","class":"input",modelValue:Y.ruleForm.policyStart,"onUpdate:modelValue":a[2]||(a[2]=e=>Y.ruleForm.policyStart=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1}),c(r,{label:"保单类型"},{"default":m((()=>[c(D,{disabled:4==Y.ruleForm.buyType,modelValue:Y.ruleForm.buyType,"onUpdate:modelValue":a[3]||(a[3]=e=>Y.ruleForm.buyType=e),clearable:"",placeholder:"请选择保单类型",style:{width:"100%"}},{"default":m((()=>[(s(!0),d(y,null,f(b(e),((e,a)=>(s(),t(g,{key:l.parkey,disabled:4==a,label:e,value:parseInt(a)},null,8,["disabled","label","value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1})])),_:1}),c(v,{span:12},{"default":m((()=>[c(r,{label:"身份证号"},{"default":m((()=>[c(o,{modelValue:Y.ruleForm.empIdcardNo,"onUpdate:modelValue":a[4]||(a[4]=e=>Y.ruleForm.empIdcardNo=e),disabled:""},null,8,["modelValue"])])),_:1}),c(r,{label:"险种"},{"default":m((()=>[c(o,{modelValue:Y.ruleForm.insuranceTypeName,"onUpdate:modelValue":a[5]||(a[5]=e=>Y.ruleForm.insuranceTypeName=e),disabled:""},null,8,["modelValue"])])),_:1}),c(r,{label:"保单结束时间",prop:"policyEnd"},{"default":m((()=>[c(u,{style:{width:"100%"},type:"date",placeholder:"请选择保单结束日期","class":"input",modelValue:Y.ruleForm.policyEnd,"onUpdate:modelValue":a[6]||(a[6]=e=>Y.ruleForm.policyEnd=e),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})])),_:1}),c(v,{span:24},{"default":m((()=>[c(r,{label:"变更原因",prop:"reason"},{"default":m((()=>[c(o,{type:"textarea",modelValue:Y.ruleForm.reason,"onUpdate:modelValue":a[7]||(a[7]=e=>Y.ruleForm.reason=e),maxlength:"50","show-word-limit":"",placeholder:"请输入变更原因"},null,8,["modelValue"])])),_:1}),c(r,{label:"温馨提示"},{"default":m((()=>[F])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])):i("",!0)])}}});export{N as default};