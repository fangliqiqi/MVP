import{d as e,f as a,$ as s,j as t,c as r,W as n,P as i,ax as o,o as c}from"./vue.1672389691407.js";import{P as d}from"./ProTable.1672389691407.js";import{P as l}from"./index.16723896914072.js";import{g as m,_ as u,e as p,u as h,d as g}from"./addInsurancePermission.1672389691407.js";import{g as y,E as f,a as x}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./index.167238969140713.js";import"./contractPermission.16723896914072.js";const b={"class":"cardinal-config-container"},_=e({name:"商险办理权限"}),j=Object.assign(_,{setup(e){const _=a(null),j=a(null);o();const v=()=>{_.value&&_.value.refresh()},C=a(!1),w=s({searchConfig:{labelWidth:120},columns:[{dataIndex:"userName",title:"办理人",minWidth:160},{dataIndex:"organName",title:"办理人所在部门",minWidth:180},{dataIndex:"fileAddress",title:"办理地",minWidth:220,valueType:"addRess",params:{pro:"province",city:"city"}},{dataIndex:"status",title:"授权状态",minWidth:160},{dataIndex:"option",title:"操作",key:"option",width:200,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],params:{},btn:[{label:"新增",onClick:()=>{j.value&&j.value.openDialog()},loading:C,permission:["tinsuranceareares_add"],icon:"icon-ic_edit_add"},{label:"批量导出",onClick:()=>{if(C.value=!0,w.selectionChangeList.length>0){const e=[];w.selectionChangeList.map((a=>{e.push(a.id)})),w.params={ids:e.join(",")}}else w.params=_.value.getParams(),delete w.params.size,delete w.params.current;p(w.params).then((e=>{200==e.code?f.success("导出成功"):f.error(e.msg||"导出失败")}))["catch"]((e=>{f.error(e.msg||"导出失败")}))["finally"]((()=>{C.value=!1}))},loading:C,permission:["tinsuranceareares-export"],type:"normal",icon:"icon-ic_edit_export"}],cellBtns:[{text:"删除",prop:"delete",permission:["tinsuranceareares_del"]},{text:"启用",prop:"enable",permission:["tinsuranceareares_edit"],isGray:e=>"0"==e.status},{text:"禁用",prop:"stop",permission:["tinsuranceareares_edit"],isGray:e=>"1"==e.status}],selectionChangeList:[],dictKeys:["permission_status"]}),k=e=>{w.selectionChangeList=e},I=async(e,a)=>{switch(e){case"delete":x.confirm("是否确定删除？","提示",{type:"warning"}).then((async()=>{try{const e=await g(a.id);e&&200===e.code?(f.success("删除成功"),v()):f.error(e.msg||"删除失败")}catch(e){f.error(e.sag||"删除失败")}}))["catch"]((()=>{}));break;case"enable":x.confirm("是否确定启用？","提示",{type:"warning"}).then((async()=>{try{const e=await h({id:a.id,status:0});e&&200===e.code?(f.success("启用成功"),v()):f.error(e.msg||"启用失败")}catch(e){f.error(e.sag||"启用失败")}}))["catch"]((()=>{}));break;case"stop":x.confirm("是否确定禁用？","提示",{type:"warning"}).then((async()=>{try{const e=await h({id:a.id,status:1});e&&200===e.code?(f.success("禁用成功"),v()):f.error(e.msg||"禁用失败")}catch(e){f.error(e.sag||"禁用失败")}}))["catch"]((()=>{}))}},P=async e=>{try{const a=await m(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(a){}return{current:1,total:0,data:[]}};return t((()=>{(async()=>{try{const e=await y(w.dictKeys);e&&w.columns.map((a=>("status"===a.dataIndex&&(a.valueEnum=e.permission_status),a)))}catch(e){}})()})),(e,a)=>(c(),r("div",b,[n(d,{ref_key:"proTableRef",ref:_,"row-key":"id",columns:w.columns,request:P,btn:w.btn,searchConfig:w.searchConfig,onSelectionChange:k,multi:""},{option:i((e=>[n(l,{array:w.cellBtns,model:e,onOnClick:I},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),n(u,{ref_key:"addInsurancePermissionRef",ref:j,onOk:v},null,512)]))}});export{j as default};