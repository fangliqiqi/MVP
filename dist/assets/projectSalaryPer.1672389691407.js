import{d as e,f as t,$ as a,E as o,j as s,c as n,W as r,P as i,aD as l,aA as d,o as c,i as p}from"./vue.1672389691407.js";import{P as m}from"./ProTable.1672389691407.js";import{P as u}from"./index.16723896914072.js";import f from"./addSalaryPerDialog.1672389691407.js";import{l as y,m as h}from"./settings.1672389691407.js";import{o as g,a as x}from"./events.1672389691407.js";import{a as v,E as j}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./fee.1672389691407.js";const b={"class":"cardinal-config-container"},_=e({name:"项目薪酬权限"}),S=Object.assign(_,{setup(e){const _=t(null);l();const S=d(),k=t(!1),w=t(null),{proxy:C}=p(),I=()=>{_.value&&_.value.onSearch()},D=async(e,t)=>{switch(e){case"edit":k.value=!0,w.value&&w.value.openDialog(t);break;case"remove":P(t)}},P=e=>{v.confirm('<p style="font-size:16px;font-weight:600">是否确定删除?<br/>\n\t\t\t\t<span style="color:red;font-size:14px;font-weight:400">删除后，配置将从系统消失，请谨慎操作！</span></p>',{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((async()=>{try{const t=await h(e.id);t&&200===t.code?(j.success("删除成功"),I()):j.error(t.msg||"删除失败")}catch(t){j.error("删除失败")}}))["catch"]((()=>{}))},T=a({searchConfig:{labelWidth:90},columns:[{dataIndex:"deptName",title:"项目名称",minWidth:220,tooltip:!0,fixed:"left"},{dataIndex:"deptNo",title:"项目编码",minWidth:180},{dataIndex:"canSee",title:"是否允许查看工资",minWidth:160,hideInSearch:!0,valueEnum:{0:"是",1:"否"}},{dataIndex:"option",title:"操作",key:"option",width:240,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"新增",onClick:()=>{k.value=!1,w.value&&w.value.openDialog()},permission:["salary_tdeptsee_add"],icon:"icon-ic_edit_add"}],cellBtns:[{text:"编辑",prop:"edit",permission:["salary_tdeptsee_edit"]},{text:"删除",permission:["salary_tdeptsee_del"],prop:"remove",tooltip:"当前状态不可操作"}],dictKeys:[],DICTS:{}});o((()=>{g(C)})),s((()=>{x(C,S.path,(()=>{I()}))}));const O=async e=>{try{const t=await y(e);if(t&&200==t.code&&t.data)return{current:t.data.current,total:t.data.total,data:t.data.records}}catch(t){}return{current:1,total:0,data:[]}};return(e,t)=>(c(),n("div",b,[r(m,{ref_key:"proTableRef",ref:_,"row-key":"id",columns:T.columns,request:O,btn:T.btn,searchConfig:T.searchConfig},{option:i((e=>[r(u,{array:T.cellBtns,model:e,onOnClick:D},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),r(f,{ref_key:"addSalaryPerDialogRef",ref:w,isModifyOrAddFlag:k.value,onOk:I},null,8,["isModifyOrAddFlag"])]))}});export{S as default};