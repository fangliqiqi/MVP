import{d as a,f as e,$ as t,j as s,c as i,a as n,W as o,P as r,O as f,T as c,ay as l,az as d,U as p,aD as m,aA as u,a3 as I,o as y,u as j,F as _,a5 as v,V as b,i as k}from"./vue.1672389691407.js";import{a as h}from"./staff.1672389691407.js";import{j as g,k as S}from"./subject.1672389691407.js";import{X as w}from"./header.1672389691407.js";import{_ as T,E as D,g as M,e as C,t as x,h as P,c as Y,o as E}from"./index.1672389691407.js";import{S as L,a as A}from"./dicts.1672389691407.js";import{i as H}from"./city.1672389691407.js";import R from"./attachSection.1672389691407.js";import N from"./serviceSection.1672389691407.js";import $ from"./operateLog.1672389691407.js";import"./ProTable.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./attachDetail.1672389691407.js";import"./file.1672389691407.js";import"./index.16723896914075.js";import"./staffProject.1672389691407.js";import"./contract.1672389691407.js";import"./log.1672389691407.js";import"./translate.1672389691407.js";import"./dict.1672389691407.js";import"./socialfundSearch.16723896914072.js";const O=a=>(l("data-v-77f34fce"),a=a(),d(),a),U={"class":"staff-info-page"},q={"class":"content"},B={"class":"basic-info section-container"},K={"class":"title"},V=O((()=>n("span",null,"基础信息",-1))),z=p(" 操作日志 "),F=["innerHTML"],W={"class":"desc-content"},X={"class":"detail-tooltip-container"},G=["innerHTML"],J=["innerHTML"],Q={"class":"desc-content"},Z={"class":"detail-tooltip-container"},aa=["innerHTML"],ea={"class":"jump-icon"},ta=p(" 电子"),sa=O((()=>n("br",null,null,-1))),ia=p("档案 "),na={"class":"operation-container"},oa=p("返 回"),ra=a({name:"editStaffPage"});var fa=T(Object.assign(ra,{setup(a){const{proxy:l}=k(),d=m(),p=u(),T=e(null),O=()=>{d.push("/archives/electronic?empIdcard="+ra.staffInfo.empIdcard)},ra=t({staffInfo:{},projects:[],name:null,staffId:null,projectId:null,staffInfoParams:["empCode","empNatrue","empName","validity","empIdcard","empSex","empBirthday","empAge","empMarriStatus","empNational","politicalStatus","empPhone","empEmail","idAddress","empRegisType","fileAddress","isCollege","hignEducation","school","major","admissionDate","gradutionDate","fileSource","status","contactAddress","remark"],withdrawnParams:["leaveTime","leaveReason","leaveRemark"],DICTS:{},dictKeys:["emp_natrue","emp_married","emp_national","emp_political","emp_registype","education","commercial_satte","social_ecurity_state","fund_status","personnel_state","EMP_SOURCE","social_reduce_reason"],collegeDict:{0:"否",1:"是"},attachActiveTab:"first",familyColumns:[{dataIndex:"",title:"成员姓名"},{dataIndex:"",title:"与本人关系"},{dataIndex:"",title:"出生日期"},{dataIndex:"",title:"工作单位"},{dataIndex:"",title:"联系电话"},{dataIndex:"",title:"操作"}],fileStatusEnmu:{0:"草稿",1:"已审核"}}),fa=a=>6,ca=()=>{T.value&&T.value.openDialog(ra.staffInfo)},la=a=>w[a],da=(a,e)=>x(a,e,ra.DICTS),pa=a=>{let e=ra.staffInfo[a];switch(a){case"empNatrue":e=da("emp_natrue",ra.staffInfo[a]);break;case"validity":const t=ra.staffInfo.validityStart,s=ra.staffInfo.validityEnd;e=t&&s?`${P(t).format("YYYY-MM-DD")} 至 ${"2999-12-31"==s?"长期":P(s).format("YYYY-MM-DD")}`:C;break;case"empSex":e=A[ra.staffInfo[a]]||C;break;case"empBirthday":case"admissionDate":case"gradutionDate":e=e?P(e).format("YYYY-MM-DD"):C;break;case"empMarriStatus":e=da("emp_married",ra.staffInfo[a]);break;case"empNational":e=da("emp_national",ra.staffInfo[a]);break;case"politicalStatus":e=da("emp_political",ra.staffInfo[a]);break;case"empRegisType":e=da("emp_registype",ra.staffInfo[a]);break;case"hignEducation":e=da("education",ra.staffInfo[a]);break;case"isCollege":e=ra.collegeDict[ra.staffInfo[a]]||C;break;case"idAddress":e=H({province:ra.staffInfo.idProvince,city:ra.staffInfo.idCity,town:ra.staffInfo.idTown});break;case"fileAddress":e=H({province:ra.staffInfo.fileProvince,city:ra.staffInfo.fileCity,town:ra.staffInfo.fileTown});break;case"contractStatus":e=da("personnel_state",ra.staffInfo[a]);break;case"socialStatus":e=da("social_ecurity_state",ra.staffInfo[a]);break;case"fundStatus":e=da("fund_status",ra.staffInfo[a]);break;case"insuranceStatus":e=da("commercial_satte",ra.staffInfo[a]);break;case"salaryStatus":e=L[ra.staffInfo[a]]||C;break;case"fileSource":e=da("EMP_SOURCE",ra.staffInfo[a]);break;case"status":e=1==ra.staffInfo.fileStatus?"已减档":ra.fileStatusEnmu[ra.staffInfo[a]]||C;break;case"leaveReason":e=da("social_reduce_reason",ra.staffInfo[a]);break;default:if(null==e||""==e)return C}return e},ma=()=>{const a=p.name;"withdrawn-detail"===a?d.push("/archives/staff/withdrawn"):"subject-detail"===a?d.push({path:"/archives/subject",query:{projectIdCard:p.query.projectIdCard}}):d.push("/archives/staff/online"),Y(p,l)};s((async()=>{const a=p.name;ra.name=a,ua(),"online-detail"===a||"withdrawn-detail"===a?p.params&&p.params.id?(ra.staffId=p.params.id,ya(p.params.id)):(D.error("不合法的路由地址"),ma()):"subject-detail"===a&&(p.params&&p.params.id?(ra.projectId=p.params.id,Ia(p.params.id)):(D.error("不合法的路由地址"),ma()))}));const ua=async()=>{try{const a=await M(ra.dictKeys);a&&(ra.DICTS=a)}catch(a){}},Ia=async a=>{try{const e=await g(a);e&&200===e.code&&(ra.projects=[e.data]);const t=e.data.empId;ja(t)}catch(e){D.error("获取详情失败"),ma()}},ya=async a=>{try{ja(a);const e=await S({empId:a});e&&200===e.code&&(ra.projects=e.data||[])}catch(e){D.error("获取详情失败"),ma()}},ja=async a=>{try{const e=await h(a);if(e&&200===e.code&&e.data){const a=e.data;ra.staffInfo=a}else D.error(e.msg||"获取档案详情失败"),ma()}catch(e){D.error("获取档案详情失败"),ma()}};return(a,e)=>{const t=I("el-icon"),s=I("el-tooltip"),l=I("el-col"),d=I("el-row"),p=I("el-button");return y(),i("div",U,[n("div",q,[n("div",B,[n("div",K,[V,n("div",{"class":"operate-log",onClick:ca},[o(t,{style:{"margin-right":"3px"}},{"default":r((()=>[o(j(E))])),_:1}),z])]),o(d,null,{"default":r((()=>[(y(!0),i(_,null,v(ra.staffInfoParams,(a=>(y(),f(l,{key:`basicInfo_${a}`,"class":"basic-info-item",span:6},{"default":r((()=>[n("span",{"class":"desc-title",innerHTML:la(a)},null,8,F),n("div",W,[o(s,{placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:r((()=>[n("div",X,[n("span",{innerHTML:pa(a)},null,8,G)])])),"default":r((()=>[n("span",null,b(pa(a)),1)])),_:2},1024)])])),_:2},1032,["span"])))),128)),ra.staffInfo&&1==ra.staffInfo.fileStatus?(y(!0),i(_,{key:0},v(ra.withdrawnParams,(a=>(y(),f(l,{key:`basicInfo_${a}`,"class":"basic-info-item",span:6},{"default":r((()=>[n("span",{"class":"desc-title",innerHTML:la(a)},null,8,J),n("div",Q,[o(s,{placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:r((()=>[n("div",Z,[n("span",{innerHTML:pa(a)},null,8,aa)])])),"default":r((()=>[n("span",null,b(pa(a)),1)])),_:2},1024)])])),_:2},1032,["span"])))),128)):c("",!0)])),_:1})]),ra.staffInfo.empIdcard?(y(),f(R,{key:0,empIdcard:ra.staffInfo.empIdcard},null,8,["empIdcard"])):c("",!0),ra.staffInfo.empIdcard?(y(),f(N,{key:1,info:ra.staffInfo,projects:ra.projects,getStaffTitle:la,getStaffValue:pa,getColNumber:fa},null,8,["info","projects"])):c("",!0)]),o($,{ref_key:"operateLogRef",ref:T},null,512),"online-detail"===ra.name?(y(),i("div",{key:0,"class":"snap-btn",onClick:O},[n("div",ea,[o(t,{style:{"vertical-align":"text-top"}},{"default":r((()=>[o(j(E))])),_:1})]),ta,sa,ia])):c("",!0),n("div",na,[o(p,{onClick:ma,style:{height:"100%"}},{"default":r((()=>[oa])),_:1})])])}}}),[["__scopeId","data-v-77f34fce"]]);export{fa as default};