import{d as a,f as t,$ as e,E as i,j as n,c as s,W as o,P as r,aD as d,aA as c,o as l,i as m}from"./vue.1672389691407.js";import{P as p}from"./ProTable.1672389691407.js";import{P as u}from"./index.16723896914072.js";import{e as f,f as h}from"./socialfundSet.1672389691407.js";import{i as y}from"./city.1672389691407.js";import{h as b,W as x,e as g,a as I,E as T}from"./index.1672389691407.js";import{o as w,a as _}from"./events.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";const D={"class":"cardinal-config-container"},v=a({name:"基数配置"}),S=Object.assign(v,{setup(a){const v=t(null),S=d(),W=c(),{proxy:Y}=m(),j=()=>{v.value&&v.value.onSearch()},k=async(a,t)=>{switch(a){case"detail":{const a=C.detailName[t.baseType]||null;a?S.push({name:a,params:{id:t.id}}):T.warning("基数配置详情获取失败")}break;case"edit":{const a=C.editName[t.baseType]||null;a?S.push({name:a,params:{id:t.id}}):T.warning("基数配置详情获取失败")}break;case"enable":I.confirm("是否确定启用？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const a=await h({id:t.id,status:0});a&&200===a.code?(T.success("启用成功"),j()):T.error(a.msg||"启用失败")}catch(a){T.error("启用失败")}}))["catch"]((()=>{}));break;case"disable":I.confirm("是否确定禁用？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const a=await h({id:t.id,status:1});a&&200===a.code?(T.success("禁用成功"),j()):T.error(a.msg||"禁用失败")}catch(a){T.error("禁用失败")}}))["catch"]((()=>{}))}},C=e({searchConfig:{labelWidth:90},detailName:{0:"social-config-detail",1:"fund-config-detail"},addName:{0:"social-config-add",1:"fund-config-add"},editName:{0:"social-config-edit",1:"fund-config-edit"},columns:[{dataIndex:"departName",title:"户名称",minWidth:220,tooltip:!0,fixed:"left"},{dataIndex:"address",valueType:"addRess",params:{pro:"province",city:"city",town:"town"},title:"缴纳地",minWidth:180,ellipsis:!0,formatter:a=>y({province:a.province,city:a.city,town:a.town})},{dataIndex:"applyStartDate",title:"适用周期",minWidth:220,tooltip:!0,hideInSearch:!0,formatter:a=>(a.applyStartDate?b(a.applyStartDate).format("YYYY-MM-DD"):null)+"~"+(a.applyEndDate?b(a.applyEndDate).format("YYYY-MM-DD"):"永久")},{dataIndex:"applyDate",title:"适用月",hideInTable:!0,valueType:"date",selectType:"month",valueFormat:"YYYY-MM-DD HH:mm:ss"},{dataIndex:"upperLimit",title:"基数上限",minWidth:160,hideInSearch:!0,formatter:a=>x(a.upperLimit)},{dataIndex:"lowerLimit",title:"基数下限",hideInSearch:!0,minWidth:160,formatter:a=>x(a.lowerLimit)},{dataIndex:"baseType",title:"类别",minWidth:160,valueEnum:{0:"社保",1:"公积金"}},{dataIndex:"fundPayType",title:"是否省直",hideInSearch:!0,minWidth:160,formatter:a=>{if(0==a.baseType)return g;return{0:"市直",1:"省直"}[a.fundPayType]||g}},{dataIndex:"status",title:"状态",minWidth:160,valueEnum:{0:"启用",1:"禁用"}},{dataIndex:"createTime",title:"创建时间",minWidth:160,hideInSearch:!0},{dataIndex:"option",title:"操作",key:"option",width:240,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"新增社保配置",onClick:()=>{S.push({name:"social-config-add"})},permission:["social_sysbasesetinfo_add"],icon:"icon-ic_edit_add"},{label:"新增公积金配置",onClick:()=>{S.push({name:"fund-config-add"})},permission:["social_sysbasesetinfo_add"],icon:"icon-ic_edit_add"}],cellBtns:[{text:"详情",prop:"detail",permission:["social_sysbasesetinfo_detail"]},{text:"启用",permission:["social_sysbasesetinfo_enable"],prop:"enable",tooltip:"当前状态不可操作",isGray:a=>1!=a.status},{text:"禁用",permission:["social_sysbasesetinfo_enable"],prop:"disable",tooltip:"当前状态不可操作",isGray:a=>0!=a.status}],dictKeys:[],DICTS:{}});i((()=>{w(Y)})),n((()=>{_(Y,W.path,(()=>{j()}))}));const B=async a=>{try{a.deleteFlag=0;const t=await f(a);if(t&&200==t.code&&t.data)return{current:t.data.current,total:t.data.total,data:t.data.records}}catch(t){}return{current:1,total:0,data:[]}};return(a,t)=>(l(),s("div",D,[o(p,{ref_key:"proTableRef",ref:v,"row-key":"id",columns:C.columns,request:B,btn:C.btn,searchConfig:C.searchConfig},{option:r((a=>[o(u,{array:C.cellBtns,model:a,onOnClick:k},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"])]))}});export{S as default};