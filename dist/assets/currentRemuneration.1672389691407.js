import{P as e}from"./ProTable.1672389691407.js";import{P as t}from"./index.16723896914072.js";import a from"./currentRemunerationDilog.1672389691407.js";import{b as r}from"./batchDelete.1672389691407.js";import n from"./currentRemunerationFresh.1672389691407.js";import{g as o,d as i,c as s}from"./currentRemuneration.16723896914072.js";import{E as l}from"./index.16723896914076.js";import{f as c,$ as d,j as m,E as u,a2 as p,c as h,W as f,P as x,aD as y,aA as g,a3 as _,o as b,i as R}from"./vue.1672389691407.js";import{o as I,a as j}from"./events.1672389691407.js";import{ae as v}from"./header.1672389691407.js";import{_ as C,f as k,a as D,E as S}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./xlsx.1672389691407.js";import"./vuedraggable.umd.1672389691407.js";const T={"class":"archives-online-container"};var E=C({name:"本期稿酬申报",components:{ProTable:e,ProButtons:t,ArrowDown:k,batchDelete:r,ExportExcelDialog:l,currentRemunerationDilog:a,currentRemunerationFresh:n},setup(){const e=y(),t=g(),a=c(null),r=c(null),n=c(!1),l=c(null),{proxy:h}=R(),f=()=>{a.value&&a.value.onSearch()},x=d({searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},fn:null,columns:[{dataIndex:"declareUnit",title:"申报单位",hideInSearch:!0,minWidth:160,fixed:"left",tooltip:!0},{dataIndex:"declareMonth",title:"申报月份",valueType:"date",minWidth:160,hideInSearch:!1,selectType:"month",format:"YYYYMM",valueFormat:"YYYYMM"},{dataIndex:"empName",title:"姓名",minWidth:140,tooltip:!0,hideInSearch:!1},{dataIndex:"cardType",title:"证件类型",minWidth:200,hideInSearch:!0},{dataIndex:"empIdcard",title:"证件号码",minWidth:200,hideInSearch:!1},{dataIndex:"income",title:"收入",minWidth:160,hideInSearch:!0},{dataIndex:"personalTax",title:"个税",minWidth:160,hideInSearch:!0},{dataIndex:"option",title:"操作",key:"option",width:100,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"导出",onClick:()=>{x.params=a.value.getParams(),delete x.params.size,delete x.params.current,n.value=!0,s(x.params).then((e=>{S.success("导出成功")}))["catch"]()["finally"]((()=>{n.value=!1}))},type:"default",loading:n,permission:["salary_tstatisticsremuneration-export"],icon:"icon-ic_edit_export"},{label:"批量删除",type:"default",onClick:()=>{r.value&&r.value.openDialog()},permission:["salary_tstatisticsremuneration_del"]},{label:"手动刷新",type:"default",onClick:()=>{l.value&&l.value.openDialog()},permission:["salary_tstatisticsremuneration_del"]}],cellBtns:[{text:"删除",prop:"delete",permission:["salary_tstatisticsremuneration_del"],tooltip:"当前状态不可删除"}],DICTS:{},dictKeys:["emp_natrue","emp_married","emp_national","emp_political","emp_registype","education","EMP_SOURCE","social_ecurity_state","commercial_satte","personnel_state","fund_status"],params:{},areaProps:{label:"areaName",isLeaf:"isLeaf",children:"children"}}),_=e=>{D.confirm('<p style="font-size:16px;font-weight:600">是否确定删除?<br/>\n\t\t\t\t<span style="color:red;font-size:14px;font-weight:400">删除后，本条信息将从系统消失，请谨慎操作！</span></p>',{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((async()=>{try{const t=await i(e.id);t&&200===t.code?(S.success("删除成功"),f()):S.error(t.msg||"删除失败")}catch(t){S.error(t&&t.msg||"删除失败")}}))["catch"]((()=>{}))};return m((()=>{j(h,t.path,(()=>{f()}))})),u((()=>{I(h)})),{...p(x),request:async e=>{try{const t=Object.assign({},e),a=await o(t);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(t){}return{current:1,total:0,data:[]}},onCellClick:async(t,a)=>{switch(t){case"detail":e.push({name:"decution-detail",params:{id:a.id}});break;case"delete":_(a)}},proTableRef:a,refreshList:f,currentRemunerationDilogRef:r,APPLY_DELETE_IMPORT_HEADER:v,onReset:()=>{x.params={}},isShowExportLoading:n,currentRemunerationFreshRef:l}}},[["render",function(e,t,a,r,n,o){const i=_("pro-buttons"),s=_("pro-table"),l=_("current-remuneration-dilog"),c=_("current-remuneration-Fresh");return b(),h("div",T,[f(s,{ref:"proTableRef","row-key":"id",columns:e.columns,request:r.request,btn:e.btn,multi:!1,searchConfig:e.searchConfig,onOnReset:r.onReset},{option:x((t=>[f(i,{array:e.cellBtns,model:t,onOnClick:r.onCellClick},null,8,["array","model","onOnClick"])])),_:1},8,["columns","request","btn","searchConfig","onOnReset"]),f(l,{ref:"currentRemunerationDilogRef",onOk:r.refreshList},null,8,["onOk"]),f(c,{ref:"currentRemunerationFreshRef",onOk:r.refreshList},null,8,["onOk"])])}],["__scopeId","data-v-9b7f586e"]]);export{E as default};