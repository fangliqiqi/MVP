import{_ as e,$ as l,E as a,Q as t,a0 as r,a1 as o}from"./index.1672389691407.js";import{P as d}from"./index.16723896914073.js";import{d as s,f as i,$ as u,c as n,W as m,P as p,a3 as c,o as f,a as y,U as g}from"./vue.1672389691407.js";const b={"class":"system-add-dic-container"},h={"class":"dialog-footer"},_=g("取 消"),F=g("确 定"),V=s({name:"systemAddDic"});var v=e(Object.assign(V,{emits:["ok"],setup(e,{expose:s,emit:g}){const V=i(null),v=i(null),k=u({isShowDialog:!1,id:null,title:"新增字典",ruleForm:{systemFlag:"1",description:null,parentItemType:null,type:null,remark:null},options:[]}),w={description:[{required:!0,message:"请输入字典名称",trigger:"blur"}],type:[{required:!0,message:"请输入字典编码",trigger:"blur"}]},x=async e=>{try{const l=await t(e);if(l&&200==l.code&&l.data)return{current:l.data.current,total:l.data.total,data:l.data.records}}catch(l){}return{current:1,total:0,data:[]}},I=async e=>{try{const t=await l(e);if(t&&200===t.code){const e={...t.data};k.options=[{type:e.parentItemType,description:e.parentItemName}],k.ruleForm=e}else a.error(t.msg||"获取字典详情失败")}catch(t){D(),a.error("获取字典详情失败")}},D=()=>{V.value&&V.value.clearValidate(),k.isShowDialog=!1},S=()=>{D()},T=i(!1),U=()=>{V.value&&V.value.validate((e=>{e&&(T.value=!0,null!==k.id&&void 0!==k.id?r(k.ruleForm).then((e=>{e&&200==e.code?(a.success("编辑字典成功"),g("ok"),D()):a.error(e.msg||"编辑字典失败")}),(()=>{a.error("编辑字典失败")}))["finally"]((()=>{T.value=!1})):o(k.ruleForm).then((e=>{e&&200==e.code?(a.success("新增字典成功"),g("ok"),D()):a.error(e.msg||"新增字典失败")}),(()=>{a.error("新增字典失败")}))["finally"]((()=>{T.value=!1})))}))};return s({openDialog:async e=>{e&&e.id?(k.title="编辑字典",k.id=e.id,await I(e.id)):(k.title="新增字典",k.id=null,k.ruleForm={systemFlag:"1",description:null,parentItemType:null,type:null,remark:null}),k.isShowDialog=!0}}),(e,l)=>{const a=c("el-form-item"),t=c("el-col"),r=c("el-input"),o=c("el-row"),s=c("el-form"),i=c("el-button"),u=c("el-dialog");return f(),n("div",b,[m(u,{title:k.title,modelValue:k.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>k.isShowDialog=e),"close-on-click-modal":!1,width:"550px",onClose:D},{footer:p((()=>[y("span",h,[m(i,{onClick:S,size:"default"},{"default":p((()=>[_])),_:1}),m(i,{type:"primary",loading:T.value,onClick:U,size:"default"},{"default":p((()=>[F])),_:1},8,["loading"])])])),"default":p((()=>[m(s,{ref_key:"formRef",ref:V,model:k.ruleForm,rules:w,size:"default","label-width":"90px"},{"default":p((()=>[m(o,null,{"default":p((()=>[m(t,{"class":"mb20"},{"default":p((()=>[m(a,{label:"上级字典",prop:"parentItemType"},{"default":p((()=>[m(d,{disabled:k.id,ref_key:"pageSelectRef",ref:v,modelValue:k.ruleForm.parentItemType,"onUpdate:modelValue":l[0]||(l[0]=e=>k.ruleForm.parentItemType=e),request:x,"value-key":"type",title:"description",search:"description",options:k.options},null,8,["disabled","modelValue","options"])])),_:1})])),_:1}),m(t,{"class":"mb20"},{"default":p((()=>[m(a,{label:"字典名称",prop:"description"},{"default":p((()=>[m(r,{modelValue:k.ruleForm.description,"onUpdate:modelValue":l[1]||(l[1]=e=>k.ruleForm.description=e),modelModifiers:{trim:!0},placeholder:"请输入字典名称",maxlength:"100",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(t,{"class":"mb20"},{"default":p((()=>[m(a,{label:"字典编码",prop:"type"},{"default":p((()=>[m(r,{disabled:k.id,modelValue:k.ruleForm.type,"onUpdate:modelValue":l[2]||(l[2]=e=>k.ruleForm.type=e),modelModifiers:{trim:!0},placeholder:"请输入字典编码",maxlength:"30",clearable:""},null,8,["disabled","modelValue"])])),_:1})])),_:1}),m(t,{"class":"mb20"},{"default":p((()=>[m(a,{label:"备注信息",prop:"remark"},{"default":p((()=>[m(r,{modelValue:k.ruleForm.remark,"onUpdate:modelValue":l[3]||(l[3]=e=>k.ruleForm.remark=e),type:"textarea",placeholder:"请输入备注信息",maxlength:"255"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-4dbbce09"]]);export{v as default};