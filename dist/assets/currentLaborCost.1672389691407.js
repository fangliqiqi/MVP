import{P as e}from"./ProTable.1672389691407.js";import{P as t}from"./index.16723896914072.js";import a from"./currentLaborCost.16723896914072.js";import r from"./currentLaborCostFresh.1672389691407.js";import{b as o}from"./batchDelete.1672389691407.js";import{g as s,d as n,c as i}from"./currentLaborCost.16723896914073.js";import{E as l}from"./index.16723896914076.js";import{f as c,$ as d,a2 as m,c as p,W as u,P as h,aD as f,a3 as b,o as x}from"./vue.1672389691407.js";import{ae as y}from"./header.1672389691407.js";import{_,f as C,a as g,E as I}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./xlsx.1672389691407.js";import"./vuedraggable.umd.1672389691407.js";const L={"class":"archives-online-container"};var v=_({name:"本期劳务费申报",components:{ProTable:e,ProButtons:t,ArrowDown:C,batchDelete:o,ExportExcelDialog:l,currentLaborCost:a,currentLaborCostFresh:r},setup(){const e=f(),t=c(null),a=c(null),r=c(!1),o=c(null),l=d({searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},columns:[{dataIndex:"declareUnit",title:"申报单位",hideInSearch:!0,minWidth:160,fixed:"left",tooltip:!0},{dataIndex:"declareMonth",title:"申报月份",valueType:"date",minWidth:160,hideInSearch:!1,selectType:"month",format:"YYYYMM",valueFormat:"YYYYMM"},{dataIndex:"empName",title:"姓名",minWidth:140,tooltip:!0,hideInSearch:!1},{dataIndex:"cardType",title:"证件类型",minWidth:200,hideInSearch:!0},{dataIndex:"empIdcard",title:"证件号码",minWidth:200,tooltip:!0},{dataIndex:"incomeItem",title:"所得项目",minWidth:160,hideInSearch:!0},{dataIndex:"income",title:"收入",minWidth:160,hideInSearch:!0},{dataIndex:"personalTax",title:"个税",minWidth:160,hideInSearch:!0},{dataIndex:"option",title:"操作",key:"option",width:100,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"导出",onClick:()=>{l.params=t.value.getParams(),delete l.params.size,delete l.params.current,r.value=!0,i(l.params).then((e=>{I.success("导出成功")}))["catch"]()["finally"]((()=>{r.value=!1}))},type:"default",loading:r,permission:["salary_tstatisticslabor-export"],icon:"icon-ic_edit_export"},{label:"批量删除",type:"default",onClick:()=>{a.value&&a.value.openDialog()},permission:["salary_tstatisticslabor_del"]},{label:"手动刷新",type:"default",onClick:()=>{o.value&&o.value.openDialog()},permission:["salary_tstatisticslabor_del"]}],cellBtns:[{text:"删除",prop:"delete",permission:["salary_tstatisticslabor_del"],tooltip:"当前状态不可删除"}],DICTS:{},dictKeys:["emp_natrue","emp_married","emp_national","emp_political","emp_registype","education","EMP_SOURCE","social_ecurity_state","commercial_satte","personnel_state","fund_status"],params:{},areaProps:{label:"areaName",isLeaf:"isLeaf",children:"children"}});m(l);const p=()=>{t.value&&t.value.onSearch()},u=e=>{g.confirm('<p style="font-size:16px;font-weight:600">是否确定删除?<br/>\n\t\t\t\t<span style="color:red;font-size:14px;font-weight:400">删除后，该条信息将从系统消失，请谨慎操作！</span></p>',{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((async()=>{try{const t=await n(e.id);t&&200===t.code?(I.success("删除成功"),p()):I.error(t.msg||"删除失败")}catch(t){I.error(t&&t.msg||"删除失败")}}))["catch"]((()=>{}))};return{...m(l),request:async e=>{try{const t=Object.assign({},e),a=await s(t);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(t){}return{current:1,total:0,data:[]}},onCellClick:async(t,a)=>{switch(t){case"detail":e.push({name:"decution-detail",params:{id:a.id}});break;case"delete":u(a)}},proTableRef:t,refreshList:p,currentLaborCostRef:a,APPLY_DELETE_IMPORT_HEADER:y,isShowExportLoading:r,currentLaborCostFreshRef:o}}},[["render",function(e,t,a,r,o,s){const n=b("pro-buttons"),i=b("pro-table"),l=b("current-labor-cost",!0),c=b("current-labor-cost-fresh");return x(),p("div",L,[u(i,{ref:"proTableRef","row-key":"id",columns:e.columns,request:r.request,btn:e.btn,multi:!1,searchConfig:e.searchConfig},{option:h((t=>[u(n,{array:e.cellBtns,model:t,onOnClick:r.onCellClick},null,8,["array","model","onOnClick"])])),_:1},8,["columns","request","btn","searchConfig"]),u(l,{ref:"currentLaborCostRef",onOk:r.refreshList},null,8,["onOk"]),u(c,{ref:"currentLaborCostFreshRef",onOk:r.refreshList},null,8,["onOk"])])}],["__scopeId","data-v-1d116c94"]]);export{v as default};