import{r as e}from"./currentLaborCost.16723896914073.js";import{_ as l,E as a}from"./index.1672389691407.js";import{d as o,f as t,$ as r,c as s,W as d,P as i,a3 as u,o as n,a as c,ay as m,az as f,U as p}from"./vue.1672389691407.js";const v={"class":"archives-add-electronic-container"},h=(e=>(m("data-v-0df840a2"),e=e(),f(),e))((()=>c("span",{"class":"tips",style:{color:"var(--el-color-danger)"}},"由于数据量庞大，请避开正常作业时间，同时在点击 ‘确认刷新’ 按钮后系统会自动在后台运行刷新动作",-1))),g={"class":"dialog-footer"},_=p("取 消"),b=p("确 定 刷 新"),w=o({name:"currentlaborcostfresh"});var y=l(Object.assign(w,{emits:["ok"],setup(l,{expose:o,emit:m}){const f=t(null),p=t(!1),w=r({isShowDialog:!1,id:null,title:"手动刷新",ruleForm:{declareMonth:null},fileList:[],literatureTypesDataSource:{},options:[],pickerOptions:{disabledDate:e=>e&&e.valueOf()>Date.now()}}),y={declareMonth:[{required:!0,message:"请选择月份"}]},D=()=>{w.ruleForm={},w.isShowDialog=!1,f.value&&f.value.clearValidate()},M=()=>{p.value=!1,D()},k=()=>{f.value&&f.value.validate((l=>{l&&(p.value=!0,e(w.ruleForm).then((e=>{e&&200==e.code?(m("ok"),D(),a.success(e.msg||"刷新成功，请稍后查看")):a.error(e.msg||"刷新失败")}),(()=>{a.error("刷新失败")}))["finally"]((e=>{p.value=!1})))}))};return o({openDialog:async e=>{w.title="手动刷新",w.ruleForm={declareMonth:null},setTimeout((()=>{f.value&&f.value.clearValidate()}),100),w.isShowDialog=!0}}),(e,l)=>{const a=u("el-date-picker"),o=u("el-form-item"),t=u("el-col"),r=u("el-row"),m=u("el-form"),V=u("el-button"),Y=u("el-dialog");return n(),s("div",v,[d(Y,{title:w.title,modelValue:w.isShowDialog,"onUpdate:modelValue":l[1]||(l[1]=e=>w.isShowDialog=e),width:"576px",onClose:D,"close-on-click-modal":!1},{footer:i((()=>[c("span",g,[d(V,{onClick:M,size:"default"},{"default":i((()=>[_])),_:1}),d(V,{type:"primary",onClick:k,loading:p.value,size:"default"},{"default":i((()=>[b])),_:1},8,["loading"])])])),"default":i((()=>[d(m,{ref_key:"formRef",ref:f,model:w.ruleForm,rules:y,size:"default","label-width":"140px"},{"default":i((()=>[d(r,null,{"default":i((()=>[d(t,{"class":"mb20"},{"default":i((()=>[d(o,{label:"申报月份",prop:"declareMonth"},{"default":i((()=>[d(a,{modelValue:w.ruleForm.declareMonth,"onUpdate:modelValue":l[0]||(l[0]=e=>w.ruleForm.declareMonth=e),type:"month",placeholder:"请选择申报月份",style:{width:"100%"},format:"YYYYMM","value-format":"YYYYMM","disabled-date":w.pickerOptions.disabledDate},null,8,["modelValue","disabled-date"])])),_:1})])),_:1}),d(t,null,{"default":i((()=>[d(o,null,{"default":i((()=>[h])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-0df840a2"]]);export{y as default};