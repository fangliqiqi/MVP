import{P as e}from"./ProTable.1672389691407.js";import{P as t}from"./index.16723896914072.js";import{g as a,a as n,b as r,d as o}from"./addElectronic.16723896914072.js";import{E as s,a as i}from"./index.1672389691407.js";import{d as l,f as c,$ as d,c as m,W as u,P as p,o as f,a as h,V as y}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const x={"class":"custserve-container"},T=["onClick"],g=l({name:"电子保单"}),v=Object.assign(g,{setup(l){const g=c(null),v=c(null),I=d({columns:[{dataIndex:"enclosureName",title:"保单号",hideInTable:!0},{dataIndex:"enclosureName",title:"保单号",valueType:"custom",scopedSlots:{customRender:"enclosureName"},hideInSearch:!0},{dataIndex:"createName",title:"导入人"},{dataIndex:"createTime",title:"导入时间",valueFormat:"YYYY-MM-DD",valueType:"date",hideInSearch:!0},{dataIndex:"policyDate",title:"导入时间",hideInTable:!0,selectType:"daterange",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",searchIndex:"startEndTime",startTime:"startTime",endTime:"endTime",valueType:"dateTimeRange"},{dataIndex:"remark",title:"备注",minWidth:150,ellipsis:!0},{dataIndex:"option",title:"操作",key:"option",width:70,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"导入",onClick:()=>{var e;null==(e=null==v?void 0:v.value)||e.openDialog()},permission:["insurance_handle_electronic_import"],icon:"icon-ic_edit_add"}],cellBtns:[{text:"删除",prop:"delete",permission:["insurance_handle_electronic_delete"]}]}),b=(e,t)=>{if("delete"===e)(e=>{i.confirm('<p style="font-size:16px;font-weight:600">是否确定删除?<br/>\n\t\t\t\t<span style="color:red;font-size:14px;font-weight:400">删除后，电子保单记录将从系统消失，请谨慎操作！</span></p>',{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((async()=>{var t;try{const a=await o(e.id);200===a.code?s.success("删除成功"):s.error(a.msg||"删除失败")}catch(a){s.error("删除失败")}finally{null==(t=null==g?void 0:g.value)||t.doSearch()}}))["catch"]((()=>{}))})(t)},k=()=>{var e;null==(e=null==g?void 0:g.value)||e.refresh()},Y=async e=>{const t=Object.assign({},I.params,e);try{const n=await a({current:e.current,size:e.size,mId:t.mId},t);if(n&&200==n.code&&n.data)return{current:n.data.current,total:n.data.total,data:n.data.records||[]}}catch(n){}return{current:1,total:0,data:[]}};return(a,o)=>(f(),m("div",x,[u(e,{ref_key:"proTableRef",ref:g,"row-key":"id",columns:I.columns,request:Y,btn:I.btn,searchConfig:I.searchConfig},{option:p((e=>[u(t,{array:I.cellBtns,model:e,onOnClick:b},null,8,["array","model"])])),enclosureName:p((e=>[h("a",{onClick:t=>(e=>{s.warning("正在下载"),r(e.id).then((e=>{const t=(e.data||"").replace(/(http:|https:)/,location.protocol);window.open(t,"_blank")}))})(e),"class":"item-click"},y(e.enclosureName),9,T)])),_:1},8,["columns","btn","searchConfig"]),u(n,{ref_key:"addElectronicRef",ref:v,onOk:k},null,512)]))}});export{v as default};