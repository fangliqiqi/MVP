import{s as e,a7 as t,h as a,a as i,E as n}from"./index.1672389691407.js";import{P as r}from"./ProTable.1672389691407.js";import{P as s}from"./index.16723896914072.js";import o from"./detailLog.1672389691407.js";import{d,f as l,$ as c,a2 as m,c as p,W as u,P as h,u as y,o as f,U as x,V as I}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const g={"class":"system-dict-container"},T=d({name:"日志管理"}),j=Object.assign(T,{setup(d){const T=l(null),j=l(null),P={0:"正常",9:"异常"},v=c({columns:[{dataIndex:"index",title:"序号",hideInSearch:!0,minWidth:"80px"},{dataIndex:"type",title:"类型",scopedSlots:{customRender:"type"},valueType:"select",valueEnum:P},{dataIndex:"title",title:"标题",minWidth:200,tooltip:!0},{dataIndex:"remoteAddr",title:"IP地址",hideInSearch:!0},{dataIndex:"method",title:"请求方式",hideInSearch:!0},{dataIndex:"serviceId",title:"服务端",hideInSearch:!0},{dataIndex:"time",title:"请求时间",hideInSearch:!0},{dataIndex:"createTime",title:"创建时间",width:"200px",searchIndex:"createTime",valueType:"dateTimeRange"},{dataIndex:"option",title:"操作",key:"option",minWidth:120,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],initParams:{createTime:[a().format("YYYY-MM-DD 00:00:00"),a().format("YYYY-MM-DD 23:59:59")]},cellBtns:[{text:"查看",prop:"detail",permission:[]},{text:"删除",prop:"delete",permission:["sys_log_del"]}]}),{columns:S,cellBtns:Y,initParams:E}=m(v),w=async a=>{try{const i=await async function(a){return e({url:t+"/yifu-upms/method/log/page",method:"GET",params:a})}(a);if(i&&200==i.code&&i.data)return{current:i.data.current,total:i.data.total,data:i.data.records.map(((e,t)=>({...e,index:(a.current-1)*a.size+t+1})))}}catch(i){}return{current:1,total:0,data:[]}},D=async(a,r)=>{"delete"===a?i.confirm("是否确定删除？","提示",{type:"warning"}).then((async()=>{try{const a=await async function(a){return e({url:t+`/yifu-upms/method/log/${a}`,method:"DELETE"})}(r.id);a&&200==a.code?(n.success("删除成功"),T.value.refresh()):n.warning(a.msg)}catch(a){}})):"detail"===a&&j.value.openDialog(r)};return(e,t)=>(f(),p("div",g,[u(r,{"row-key":"id",ref_key:"proRef",ref:T,columns:y(S),columnEmptyText:"--",request:w,initParams:y(E)},{type:h((e=>[x(I(P[e.type]),1)])),option:h((e=>[u(s,{array:y(Y),model:e,onOnClick:D},null,8,["array","model"])])),_:1},8,["columns","initParams"]),u(o,{ref_key:"detailLogRef",ref:j},null,512)]))}});export{j as default};