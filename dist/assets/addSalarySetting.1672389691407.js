import{_ as e,E as l}from"./index.1672389691407.js";import{s as a,t as o,v as r}from"./settings.1672389691407.js";import{d as t,f as i,$ as d,c as s,W as u,P as m,a3 as n,o as c,a as f,U as p}from"./vue.1672389691407.js";const g={"class":"archives-add-electronic-container"},v={"class":"dialog-footer"},F=p("取 消"),h=p("确 定"),b=t({name:"addSalarySetting"});var _=e(Object.assign(b,{emits:["ok"],setup(e,{expose:t,emit:p}){const b=i(null),_=d({isShowDialog:!1,id:null,title:"新增配置",ruleForm:{dbFiedName:null,cnName:null},fileList:[],literatureTypesDataSource:{},options:[]}),N={dbFiedName:[{required:!0,message:"系统标准数据项"}],cnName:[{required:!0,message:"原始数据对应项"}]},w=async e=>{try{const o=await a(e);o&&200===o.code?(_.options=[{...o.data}],_.ruleForm=o.data||{},_.isShowDialog=!0):(l.error(o.msg||"获取详情失败"),V())}catch(o){V(),l.error("获取详情失败")}},V=()=>{_.ruleForm={},_.isShowDialog=!1,b.value&&b.value.clearValidate()},y=()=>{V()},S=i(!1),D=()=>{b.value&&b.value.validate((e=>{e&&(S.value=!0,null!==_.id&&void 0!==_.id?o(_.ruleForm).then((e=>{e&&200==e.code?(l.success("编辑成功"),p("ok"),V()):l.error(e.msg||"编辑失败")}),(()=>{l.error("编辑失败")}))["finally"]((e=>{S.value=!1})):r(_.ruleForm).then((e=>{e&&200==e.code?(l.success("新增成功"),p("ok"),V()):l.error(e.msg||"新增失败")}),(()=>{l.error("新增失败")}))["finally"]((e=>{S.value=!1})))}))};return t({openDialog:async e=>{e&&e.id?(_.title="编辑配置",_.id=e.id,await w(e.id)):(_.title="新增配置",_.id=null,_.ruleForm={dbFiedName:null,cnName:null},setTimeout((()=>{b.value&&b.value.clearValidate()}),100)),_.isShowDialog=!0}}),(e,l)=>{const a=n("el-input"),o=n("el-form-item"),r=n("el-col"),t=n("el-row"),i=n("el-form"),d=n("el-button"),p=n("el-dialog");return c(),s("div",g,[u(p,{title:_.title,modelValue:_.isShowDialog,"onUpdate:modelValue":l[2]||(l[2]=e=>_.isShowDialog=e),"close-on-click-modal":!1,width:"576px",onClose:V},{footer:m((()=>[f("span",v,[u(d,{onClick:y,size:"default"},{"default":m((()=>[F])),_:1}),u(d,{type:"primary",onClick:D,loading:S.value,size:"default"},{"default":m((()=>[h])),_:1},8,["loading"])])])),"default":m((()=>[u(i,{ref_key:"formRef",ref:b,model:_.ruleForm,rules:N,size:"default","label-width":"140px"},{"default":m((()=>[u(t,null,{"default":m((()=>[u(r,{"class":"mb20"},{"default":m((()=>[u(o,{label:"系统标准数据项",prop:"dbFiedName"},{"default":m((()=>[u(a,{modelValue:_.ruleForm.dbFiedName,"onUpdate:modelValue":l[0]||(l[0]=e=>_.ruleForm.dbFiedName=e),maxlength:"30",placeholder:"系统标准数据项"},null,8,["modelValue"])])),_:1})])),_:1}),u(r,{"class":"mb20"},{"default":m((()=>[u(o,{label:"原始数据对应项",prop:"cnName"},{"default":m((()=>[u(a,{modelValue:_.ruleForm.cnName,"onUpdate:modelValue":l[1]||(l[1]=e=>_.ruleForm.cnName=e),maxlength:"30",placeholder:"原始数据对应项"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-0502f7b0"]]);export{_ as default};