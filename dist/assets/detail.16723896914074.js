import{d as a,f as e,$ as t,a2 as i,k as l,j as n,c as d,a as r,Q as o,u as s,O as h,P as c,W as m,aA as p,aD as u,a3 as y,ai as I,o as S,F as f,a5 as v,V as x,T as k,U as b,i as g}from"./vue.1672389691407.js";import{P as W}from"./ProTable.1672389691407.js";import{P}from"./index.16723896914072.js";import{t as L}from"./index.16723896914075.js";import{E as T}from"./index.16723896914074.js";import{_,E as w,g as E,h as N,c as R,P as j}from"./index.1672389691407.js";import{ab as F,ac as C,ad as D}from"./header.1672389691407.js";import{e as A}from"./excel.1672389691407.js";import{i as O}from"./city.1672389691407.js";import{b as B}from"./payimport.16723896914072.js";import{g as M}from"./file.1672389691407.js";import"./index.16723896914073.js";const U={"class":"edit-staff-page"},V={"class":"content"},G={key:0,"class":"title"},Y=["href"],$={key:0,"class":"check_right"},z={"class":"check_content"},J={"class":"operation-container"},K=b("导 出"),q=b("关 闭"),Q=a({name:"detail"});var H=_(Object.assign(Q,{setup(a){const _=e(null),Q=p(),H=u(),X=e(null),{proxy:Z}=g(),aa=e("first"),ea=t({name:"",salary:{},salaryAccountList:[],auditLogList:[],loading:!1,infoShow:[{filelabel:"薪资原表",type:11,remark:"remark",remarkLabel:"说明",fileList:[]},{filelabel:"自有员工发放说明(工资表中存在自有员工)",type:8,remark:"ownRemark",remarkLabel:"发放原因",fileList:[]},{filelabel:"薪资员工发放稿费/劳务费说明",type:12,remark:"haveSalaryRemark",remarkLabel:"发放原因",fileList:[]},{filelabel:"特殊值(3500/5000)发放说明",type:13,remark:"haveSpecialRemark",remarkLabel:"发放原因",fileList:[]},{filelabel:"重复金额发放原因说明",type:14,remark:"repeatRemark",remarkLabel:"发放原因",fileList:[]}],cellBtns:[{text:"详情",prop:"detail",permission:[]}],pagination:{currentPage:1},dictKeys:["salary_status"],salaryStatus:{}}),{cellBtns:ta,salaryAccountList:ia,infoShow:la,auditLogList:na,loading:da}=i(ea),ra=l((()=>{const a=[{dataIndex:"empName",title:"员工姓名",hideInSearch:!0,minWidth:160},{dataIndex:"salaryStyle",title:"工资发放方式",hideInSearch:!0,minWidth:160,valueEnum:{0:"现金",1:"转账"}},{dataIndex:"empIdcard",title:"身份证号",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"empPhone",title:"手机号码",hideInSearch:!0,minWidth:160},{dataIndex:"bankNo",title:"银行卡号",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"bankName",title:"开户行总行",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"bankProvince",title:"开户行省",hideInSearch:!0,minWidth:160,tooltip:!0,valueType:"addRess",params:{pro:"bankProvince"}},{dataIndex:"bankCity",title:"开户行市",hideInSearch:!0,minWidth:160,tooltip:!0,valueType:"addRess",params:{city:"bankCity"}},{dataIndex:"bankSubName",title:"开户行支行",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"salaryGiveTime",title:"工资发放时间",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"立即发",1:"暂停发"}},{dataIndex:"deduSocialMonth",title:"社保扣缴月份",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"deduProvidentMonth",title:"公积金扣缴月份",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"socialPriority",title:"社保优先级",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"生成",1:"缴纳"}},{dataIndex:"fundPriority",title:"公积金优先级",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"生成",1:"缴纳"}},{dataIndex:"annualBonusType",title:"年终奖扣税方案",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"合并",1:"单独"}},{dataIndex:"isDeductSocial",title:"是否扣除社保",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"isDeductFund",title:"是否扣除公积金",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"salaryMonth",title:"工资月份",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"deptName",title:"项目名称",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"isRepeat",title:"本月是否重复金额",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"ownFlag",title:"是否自有员工",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"haveSpecialFlag",title:"是否薪资特殊值",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"option",title:"操作",key:"option",minWidth:140,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],e=[{dataIndex:"empName",title:"员工姓名",hideInSearch:!0,minWidth:160},{dataIndex:"empIdcard",title:"身份证号",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"empPhone",title:"手机号码",hideInSearch:!0,minWidth:160},{dataIndex:"relaySalary",title:"劳务费",hideInSearch:!0,minWidth:160},{dataIndex:"bankNo",title:"银行卡号",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"bankName",title:"开户行总行",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"bankProvince",title:"开户行省",hideInSearch:!0,minWidth:160,tooltip:!0,valueType:"addRess",params:{pro:"bankProvince"}},{dataIndex:"bankCity",title:"开户行市",hideInSearch:!0,minWidth:160,tooltip:!0,valueType:"addRess",params:{city:"bankCity"}},{dataIndex:"bankSubName",title:"开户行支行",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"salaryGiveTime",title:"工资发放时间",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"立即发",1:"暂停发"}},{dataIndex:"isPersonTax",title:"是否个人承担部分税费",hideInSearch:!0,minWidth:200,valueEnum:{0:"公司承担全部税费",1:"个人承担部分税费",2:"个人承担全部税费"}},{dataIndex:"salaryTax",title:"个税-个人承担",hideInSearch:!0,minWidth:160},{dataIndex:"salaryTaxUnit",title:"个税-单位承担",hideInSearch:!0,minWidth:160},{dataIndex:"relaySalaryUnit",title:"公司应发",hideInSearch:!0,minWidth:160},{dataIndex:"actualSalary",title:"个人实收",hideInSearch:!0,minWidth:160},{dataIndex:"isRepeat",title:"本月是否重复金额",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"ownFlag",title:"是否自有员工",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"haveSalaryFlag",title:"是否发薪员工",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}}],t=[{dataIndex:"empName",title:"员工姓名",hideInSearch:!0,minWidth:160},{dataIndex:"empIdcard",title:"身份证号",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"empPhone",title:"手机号码",hideInSearch:!0,minWidth:160},{dataIndex:"relaySalary",title:"稿酬",hideInSearch:!0,minWidth:160},{dataIndex:"bankNo",title:"银行卡号",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"bankName",title:"开户行总行",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"bankProvince",title:"开户行省",hideInSearch:!0,minWidth:160,tooltip:!0,valueType:"addRess",params:{pro:"bankProvince"}},{dataIndex:"bankCity",title:"开户行市",hideInSearch:!0,minWidth:160,tooltip:!0,valueType:"addRess",params:{city:"bankCity"}},{dataIndex:"bankSubName",title:"开户行支行",hideInSearch:!0,minWidth:160,tooltip:!0},{dataIndex:"salaryTax",title:"个税",hideInSearch:!0,minWidth:160},{dataIndex:"actualSalary",title:"个人实收",hideInSearch:!0,minWidth:160},{dataIndex:"isRepeat",title:"本月是否重复金额",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"ownFlag",title:"是否自有员工",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}},{dataIndex:"haveSalaryFlag",title:"是否发薪员工",hideInSearch:!0,minWidth:160,tooltip:!0,valueEnum:{0:"否",1:"是"}}],i=ea.salary.formType;return"0"==i||"1"==i?a:"3"==i?e:"4"==i?t:void 0})),oa=(a,e)=>{if("detail"==a){const a=e.saiList.map((a=>{var e;return a.label=a.cnName,a.key=null!=(e=a.salaryMoney)?e:a.textValue,a.key=0==a.key?"0.00":a.key,a}));X.value&&X.value.openDialog(a,[],sa)}},sa=l((()=>{const a=ea.salary.formType;return"0"==a?"薪资报表":"1"==a?"绩效报表":"3"==a?"劳务费报表":"4"==a?"稿酬报表":void 0}));n((async()=>{if(Q.params.id)try{ea.name=Q.name,ea.loading=!0;const a=await B(Q.params.id);200==a.code?(ea.salary=a.data.salary,ea.salaryAccountList=a.data.salaryAccountList,ea.auditLogList=a.data.auditLogList,ea.infoShow.map((e=>{e.remarkText=a.data.salary[e.remark]})),ea.loading=!1):(w.error(a.msg||"获取详情失败"),ea.loading=!1);const e=await M(Q.params.id);200==e.code?e.data.map((a=>{ea.infoShow.map((e=>{e.type==a.relationType&&e.fileList.push(a)}))})):w.error(e.msg||"获取附件失败");const t=await E(ea.dictKeys);t&&t.salary_status&&(ea.salaryStatus=t.salary_status)}catch(a){ea.loading=!1,w.error(a.msg||"获取详情失败")}}));const ha=l((()=>ea.salaryAccountList?ea.salaryAccountList.length:0)),ca=a=>{ea.pagination.currentPage=a},ma=l((()=>{const a=ea.salaryAccountList;if(Q.params.dataId){const e=a.filter((a=>a.id==Q.params.dataId))[0],t=a.indexOf(e);t>-1&&0!=t&&(a.splice(t,1),a.unshift(e))}if(a.length>0){const e=10*(ea.pagination.currentPage-1),t=10*ea.pagination.currentPage;return{records:a.slice(e,t)}}})),pa=({row:a,rowIndex:e})=>0===e&&Q.params.dataId?"first-row":"",ua=l((()=>{const a=ea.salary.formType;return"0"==a||"1"==a?F:"3"==a?C:"4"==a?D:void 0})),ya=async()=>{const a=JSON.parse(JSON.stringify(ea.salaryAccountList));a.map((a=>(a.status=Ia(ea.salary.status,ea.salaryStatus),a.salaryStyle=Ia(a.salaryStyle,{0:"现金",1:"转账"}),a.salaryGiveTime=Ia(a.salaryGiveTime,{0:"立即发",1:"暂停发"}),a.socialPriority=Ia(a.socialPriority,{0:"生成",1:"缴纳"}),a.fundPriority=Ia(a.fundPriority,{0:"生成",1:"缴纳"}),a.annualBonusType=Ia(a.annualBonusType,{0:"合并",1:"单独"}),a.isDeductSocial=Ia(a.isDeductSocial,{0:"否",1:"是"}),a.isDeductFund=Ia(a.isDeductFund,{0:"否",1:"是"}),a.isRepeat=Ia(a.isRepeat,{0:"否",1:"是"}),a.ownFlag=Ia(a.ownFlag,{0:"否",1:"是"}),a.haveSpecialFlag=Ia(a.haveSpecialFlag,{0:"否",1:"是"}),a.haveSalaryFlag=Ia(a.haveSalaryFlag,{0:"否",1:"是"}),a.isPersonTax=Ia(a.isPersonTax,{0:"公司承担全部税费",1:"个人承担部分税费",2:"个人承担全部税费"}),a.bankProvince=O({province:a.bankProvince}),a.bankCity=O({city:a.bankCity}),a))),A(ua.value,a,`${sa.value}导出${N().format("YYYYMMDD")}`)},Ia=(a,e)=>null==a||""===a&&0!==a?"":e[a]||a,Sa=()=>{let a=null;switch(ea.name){case"payservice-import-detail":a="/payservice/payImport/payImportApply";break;case"payservice-audit-detail":a="/payservice/payImport/payImportAudit";break;case"payservice-project-detail":a="/payservice/paySearch/payProjectSearch";break;case"payservice-bill-detail":a="/payservice/paySearch/peopleBillSearch";break;default:return H.back(),void R(Q,Z)}H.push({path:a,query:{}}),R(Q,Z)};return(a,e)=>{const t=y("el-pagination"),i=y("el-tab-pane"),l=y("el-form-item"),n=y("el-col"),p=y("el-row"),u=y("el-form"),g=y("el-timeline-item"),w=y("el-timeline"),E=y("el-tabs"),N=y("el-button"),R=I("loading");return S(),d("div",U,[r("div",V,[o((S(),h(E,{modelValue:aa.value,"onUpdate:modelValue":e[1]||(e[1]=a=>aa.value=a),type:"card","class":"demo-tabs"},{"default":c((()=>[m(i,{label:s(sa),name:"first"},{"default":c((()=>[m(W,{ref_key:"proTableRef",ref:_,"row-key":"id",columns:s(ra),dataSource:s(ma),styleChange:!0,tableRowClassName:pa},{option:c((a=>[m(P,{array:s(ta),model:a,onOnClick:oa},null,8,["array","model"])])),_:1},8,["columns","dataSource"]),m(t,{currentPage:ea.pagination.currentPage,"onUpdate:currentPage":e[0]||(e[0]=a=>ea.pagination.currentPage=a),"page-size":10,background:"",layout:"total, prev, pager, next, jumper",total:s(ha),onCurrentChange:ca,"hide-on-single-page":""},null,8,["currentPage","total"])])),_:1},8,["label"]),m(i,{label:"情况说明",name:"second"},{"default":c((()=>[0!=ea.salary.status?(S(),h(u,{key:0,"label-width":"110px"},{"default":c((()=>[(S(!0),d(f,null,v(s(la),((a,e)=>(S(),d("div",{key:e},[a.remarkText||a.fileList.length||"11"==a.type?(S(),d("div",G,[r("span",null,x(a.filelabel),1)])):k("",!0),a.remarkText||a.fileList.length||"11"==a.type?(S(),h(p,{key:1,style:{"margin-top":"20px"}},{"default":c((()=>[m(n,{span:24},{"default":c((()=>[m(l,{label:a.remarkLabel},{"default":c((()=>[b(x(a.remarkText),1)])),_:2},1032,["label"]),m(l,{label:"附件"},{"default":c((()=>[r("div",null,[(S(!0),d(f,null,v(a.fileList,(a=>(S(),d("a",{href:a.attaUrl,key:a.attaUrl,target:"_blank",style:{display:"block"}},x(a.attaName),9,Y)))),128))])])),_:2},1024)])),_:2},1024)])),_:2},1024)):k("",!0)])))),128))])),_:1})):(S(),h(T,{key:1}))])),_:1}),m(i,{label:"流程进展明细",name:"third"},{"default":c((()=>[s(na).length>0?(S(),d("div",$,[m(w,{style:{padding:"20px"}},{"default":c((()=>[(S(!0),d(f,null,v(s(na),((a,e)=>(S(),h(g,{key:e,color:"#58BD7D",size:"large",icon:s(j)},{"default":c((()=>[r("div",z,[r("p",null,x(a.nodeId),1),m(l,{label:"操作人："},{"default":c((()=>[b(x(a.approvalManName),1)])),_:2},1024),m(l,{label:"操作时间："},{"default":c((()=>[b(x(a.approvalTime),1)])),_:2},1024),a.approvalOpinion?(S(),h(l,{key:0,label:"备注："},{"default":c((()=>[r("div",null,x(a.approvalOpinion),1)])),_:2},1024)):k("",!0)])])),_:2},1032,["icon"])))),128))])),_:1})])):(S(),h(T,{key:1}))])),_:1})])),_:1},8,["modelValue"])),[[R,s(da)]]),r("div",J,[m(N,{type:"primary",onClick:ya,style:{height:"100%"}},{"default":c((()=>[K])),_:1}),m(N,{onClick:Sa,style:{height:"100%"}},{"default":c((()=>[q])),_:1})])]),m(L,{ref_key:"tableDetailRef",ref:X,labelWidth:"160px",formType:"Array"},null,512)])}}}),[["__scopeId","data-v-78b580fc"]]);export{H as default};