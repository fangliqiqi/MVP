import{P as e}from"./ProTable.1672389691407.js";import{P as t}from"./index.16723896914072.js";import{t as a}from"./index.16723896914075.js";import i from"./addPolicyconfig.1672389691407.js";import{_ as n,g as o,a as s,E as c}from"./index.1672389691407.js";import{k as d,l,m as r}from"./socialfundSet.1672389691407.js";import{d as p,f as m,$ as y,a2 as f,j as h,c as u,W as g,P as _,u as x,o as b}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./file.1672389691407.js";import"./index.167238969140713.js";const I={"class":"system-dict-container"},k=p({name:"政策配置"});var v=n(Object.assign(k,{setup(n){const p=m(null),k=m(null),v=m(null),j=y({searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},columns:[{dataIndex:"archivesLocation",title:"社保缴纳地",minWidth:200,valueType:"addRess",params:{pro:"province",city:"city"}},{dataIndex:"target",title:"适用范围",minWidth:140,hideInSearch:!0},{dataIndex:"year",title:"适用年份",minWidth:140,hideInSearch:!0},{dataIndex:"month",title:"生效月份",minWidth:160,hideInSearch:!0,formatter:e=>e.startMonth+"~"+e.endMonth},{dataIndex:"pension",title:"养老",minWidth:140,hideInSearch:!0},{dataIndex:"medical",title:"医疗",minWidth:140,hideInSearch:!0},{dataIndex:"bear",title:"生育",minWidth:140,hideInSearch:!0},{dataIndex:"unemployed",title:"失业",minWidth:140,hideInSearch:!0},{dataIndex:"injury",title:"工伤",minWidth:140,hideInSearch:!0},{dataIndex:"openFlag",title:"状态",minWidth:140},{dataIndex:"createTime",title:"创建时间",minWidth:160,hideInSearch:!0},{dataIndex:"option",title:"操作",key:"option",minWidth:220,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"创建新配置",onClick:()=>{k.value&&k.value.openDialog()},permission:["social_tagentconfig_add"],icon:"icon-ic_edit_add"}],cellBtns:[{text:"详情",prop:"detail",permission:["social_tagentconfig_get"]},{text:"编辑",prop:"edit",permission:["social_tagentconfig_edit"]},{text:"删除",prop:"delete",permission:["social_tagentconfig_del"]},{text:"禁用",prop:"stop",permission:["social_tagentconfig_edit"],isGray:e=>1==e.openFlag,tooltip:"目前禁用状态不可操作"},{text:"启用",prop:"start",permission:["social_tagentconfig_edit"],isGray:e=>0==e.openFlag,tooltip:"目前启用状态不可操作"}],dictKeys:["policy_config_scope","policy_config_status","hu_config_type"],dictData:{},detailConfig:[{label:"政策适应范围",key:"target",dict:"policy_config_scope"},{label:"政策适应年份",key:"year"},{label:"生效月份",key:"openFlag",formatter:e=>e.startMonth+"~"+e.endMonth},{label:"社保缴纳地",key:"address",address:["province","city"]},{label:"养老",key:"pension",dict:"policy_config_status"},{label:"医疗",key:"medical",dict:"policy_config_status"},{label:"生育",key:"bear",dict:"policy_config_status"},{label:"失业",key:"unemployed",dict:"policy_config_status"},{label:"工伤",key:"injury",dict:"policy_config_status"},{label:"状态",key:"openFlag",dict:"hu_config_type"},{label:"创建时间",key:"createTime"}]}),{columns:W,cellBtns:S,btn:w,searchConfig:D}=f(j),C=async e=>{try{const t=await d(e);if(t&&200==t.code&&t.data)return{current:t.data.current,total:t.data.total,data:t.data.records}}catch(t){}return{current:1,total:0,data:[]}},F=()=>{p.value.refresh()},P=async(e,t)=>{if("delete"===e)s.confirm("是否确定删除？","提示",{type:"warning"}).then((async()=>{const e=await l(t.id);e&&200==e.code?(c.success("删除成功"),F()):c.error(e.msg||"删除失败")}))["catch"]((e=>{}));else if("edit"===e)k.value&&k.value.openDialog(t);else if("detail"===e)v.value&&v.value.openDialog(t,j.detailConfig,"政策配置详情");else{{const a="stop"==e?"是否确定禁用？":"是否确定启用？",i="stop"==e?"禁用成功":"启用成功",n="stop"==e?"禁用失败":"启用失败";s.confirm(a,"提示",{type:"warning"}).then((async()=>{const a=await r({id:t.id,openFlag:"stop"==e?1:0});a&&200==a.code?(c.success(i),F()):c.error(a.msg||n)}))["catch"]((e=>{}))}}};return h((async()=>{(async()=>{try{const e=await o(j.dictKeys);e&&(j.dictData=e,j.columns.map((t=>{switch(t.dataIndex,t.dataIndex){case"target":t.valueEnum=e.policy_config_scope;break;case"pension":case"medical":case"bear":case"unemployed":case"injury":t.valueEnum=e.policy_config_status;break;case"openFlag":t.valueEnum=e.hu_config_type}return t})))}catch(e){}})()})),(n,o)=>(b(),u("div",I,[g(e,{ref_key:"proTableRef",ref:p,"row-key":"id",columns:x(W),request:C,btn:x(w),searchConfig:x(D),hasTown:!1},{option:_((e=>[g(t,{array:x(S),model:e,onOnClick:P},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),g(i,{ref_key:"addPolicyconfigRef",ref:k,onOk:F},null,512),g(a,{ref_key:"tableDetailRef",ref:v,labelWidth:"130px",dictData:j.dictData},null,8,["dictData"])]))}}),[["__scopeId","data-v-3d49d940"]]);export{v as default};