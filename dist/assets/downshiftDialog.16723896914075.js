import{s as e}from"./staff.1672389691407.js";import{d as a,f as l,$ as o,j as s,c as t,W as r,P as i,aD as d,a3 as u,o as n,a as m,u as c,F as f,a5 as p,O as v,U as g,ay as h,az as _}from"./vue.1672389691407.js";import{_ as y,g as w,l as b,E as D}from"./index.1672389691407.js";const k=e=>(h("data-v-2964c50a"),e=e(),_(),e),V={"class":"downshift-archives-dialog"},x={"class":"tips"},F=g(),S=k((()=>m("span",{style:{"vertical-align":"text-bottom"}},"减档后，档案将流转到“离职库”",-1))),R={"class":"dialog-footer"},C=g("取 消"),j=g("确 定"),z=a({name:"downShiftDialog"});var I=y(Object.assign(z,{emits:["ok"],setup(a,{expose:g,emit:h}){d();const _=l(null),y=o({isShowDialog:!1,ruleForm:{},info:null,DICTS:{},dictKeys:["downshift_reason"]}),k=o({leaveReason:[{required:!0,message:"请选择减档原因",trigger:"blur"}]});s((()=>{z()}));const z=async()=>{try{const e=await w(y.dictKeys);e&&(y.DICTS=e)}catch(e){}},I=()=>{_.value&&_.value.clearValidate(),y.isShowDialog=!1},U=()=>{_.value&&_.value.validate((async a=>{if(a)try{const a=await e(y.ruleForm);a&&200===a.code?(D.success("减档成功"),h("ok"),I()):D.error(a.msg||"减档失败，请联系管理员")}catch(l){D.error("减档失败，请联系管理员")}}))};return g({openDialog:async e=>{y.info=e,y.ruleForm={id:e.id},y.isShowDialog=!0}}),(e,a)=>{const l=u("el-icon"),o=u("el-option"),s=u("el-select"),d=u("el-form-item"),g=u("el-col"),h=u("el-input"),w=u("el-row"),D=u("el-form"),z=u("el-button"),T=u("el-dialog");return n(),t("div",V,[r(T,{title:"减档",modelValue:y.isShowDialog,"onUpdate:modelValue":a[2]||(a[2]=e=>y.isShowDialog=e),"close-on-click-modal":!1,width:"576px",onClose:I},{footer:i((()=>[m("span",R,[r(z,{onClick:I,size:"default"},{"default":i((()=>[C])),_:1}),r(z,{type:"primary",onClick:U,size:"default"},{"default":i((()=>[j])),_:1})])])),"default":i((()=>[m("div",x,[r(l,null,{"default":i((()=>[r(c(b))])),_:1}),F,S]),r(D,{ref_key:"formRef",ref:_,model:y.ruleForm,rules:k,size:"default","label-width":"90px"},{"default":i((()=>[r(w,{style:{"margin-top":"40px"}},{"default":i((()=>[r(g,{"class":"mb20"},{"default":i((()=>[r(d,{label:"减档原因",prop:"leaveReason"},{"default":i((()=>[r(s,{modelValue:y.ruleForm.leaveReason,"onUpdate:modelValue":a[0]||(a[0]=e=>y.ruleForm.leaveReason=e),placeholder:"请选择减档原因",style:{width:"100%"}},{"default":i((()=>[(n(!0),t(f,null,p(y.DICTS.downshift_reason,((e,a)=>(n(),v(o,{label:e,value:a,key:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),r(g,{"class":"mb20"},{"default":i((()=>[r(d,{label:"减档备注",prop:"leaveRemark"},{"default":i((()=>[r(h,{modelValue:y.ruleForm.leaveRemark,"onUpdate:modelValue":a[1]||(a[1]=e=>y.ruleForm.leaveRemark=e),type:"textarea",placeholder:"请输入减档备注",maxlength:"200",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),r(g,{"class":"mb20"},{"default":i((()=>[r(d)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-2964c50a"]]);export{I as default};