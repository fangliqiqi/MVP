import{i as e,f as a,g as l,h as o}from"./company.1672389691407.js";import{d as i,f as r,$ as d,j as t,c as s,W as m,P as n,aD as u,n as c,a3 as g,o as p,a as f,F as b,a5 as h,O as F,U as y,V as _}from"./vue.1672389691407.js";import{_ as N,g as k,E as V}from"./index.1672389691407.js";const w={"class":"downshift-archives-dialog"},D={"class":"dialog-footer"},v=y("关闭"),U=y("保存"),C=i({name:"downShiftDialog"});var x=N(Object.assign(C,{emits:["ok"],setup(i,{expose:N,emit:C}){u();const x=r(null),I=d({isShowDialog:!1,loading:!1,ruleForm:{},info:null,DICTS:{},dictKeys:["downshift_reason"],companyList:[],title:"",flag:"",nameDisableFlag:!1}),S=d({name:[{required:!0,message:"请输入险种",trigger:"blur"}],insuranceCompanyId:[{required:!0,message:"请选择保险公司",trigger:"change"}],bankName:[{required:!0,message:"请输入收款银行",trigger:"blur"}],bankNo:[{required:!0,message:"请输入收款银行账号",trigger:"blur"}],receiptUnitName:[{required:!0,message:"请输入收款单位",trigger:"blur"}]});t((()=>{j()}));const j=async()=>{try{const a=await k(I.dictKeys),l=await e();a&&(I.DICTS=a),l&&(I.companyList=l.data)}catch(a){}},q=()=>{I.nameDisableFlag=!1,I.ruleForm.id&&(I.ruleForm.id=""),x.value&&x.value.resetFields(),I.isShowDialog=!1,I.loading=!1},M=()=>{x.value&&x.value.validate((async e=>{if(e){I.loading=!0;try{let e=null;e=I.ruleForm.id?await l(I.ruleForm):await o(I.ruleForm),e&&200===e.code?(V.success(e.msg||"操作成功"),C("ok"),q(),I.loading=!1):(I.loading=!1,V.error(e.msg||"操作失败"))}catch(a){I.loading=!1,V.error("操作失败，请联系管理员")}}}))};return N({openDialog:async e=>{I.isShowDialog=!0,I.title="新增险种",I.flag="add"},editDialog:e=>{var l;I.info=e,I.isShowDialog=!0,I.title="编辑险种",I.flag="edit",l=e.id,a({id:l}).then((e=>{e.data&&e.data.length>0&&(I.nameDisableFlag=!0)})),c((()=>{I.ruleForm={id:e.id,name:e.name,insuranceCompanyId:e.insuranceCompanyId,bankName:e.bankName,bankNo:e.bankNo,receiptUnitName:e.receiptUnitName}}))}}),(e,a)=>{const l=g("el-input"),o=g("el-form-item"),i=g("el-col"),r=g("el-option"),d=g("el-select"),t=g("el-row"),u=g("el-form"),c=g("el-button"),N=g("el-dialog");return p(),s("div",w,[m(N,{title:I.title,modelValue:I.isShowDialog,"onUpdate:modelValue":a[5]||(a[5]=e=>I.isShowDialog=e),"close-on-click-modal":!1,width:"576px",onClose:q},{footer:n((()=>[f("span",D,[m(c,{onClick:q,size:"default"},{"default":n((()=>[v])),_:1}),m(c,{type:"primary",onClick:M,loading:I.loading,size:"default"},{"default":n((()=>[U])),_:1},8,["loading"])])])),"default":n((()=>[m(u,{ref_key:"formRef",ref:x,model:I.ruleForm,rules:S,size:"default","label-width":"120px"},{"default":n((()=>[m(t,null,{"default":n((()=>[m(i,{"class":"mb20"},{"default":n((()=>[m(o,{label:"险种",prop:"name"},{"default":n((()=>[m(l,{modelValue:I.ruleForm.name,"onUpdate:modelValue":a[0]||(a[0]=e=>I.ruleForm.name=e),modelModifiers:{trim:!0},placeholder:"请输入险种",disabled:I.nameDisableFlag,clearable:"",maxlength:50},null,8,["modelValue","disabled"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":n((()=>[m(o,{label:"保险公司",prop:"insuranceCompanyId"},{"default":n((()=>[m(d,{modelValue:I.ruleForm.insuranceCompanyId,"onUpdate:modelValue":a[1]||(a[1]=e=>I.ruleForm.insuranceCompanyId=e),modelModifiers:{trim:!0},filterable:"",style:{width:"100%"},disabled:I.nameDisableFlag},{"default":n((()=>[(p(!0),s(b,null,h(I.companyList,(e=>(p(),F(r,{key:"head"+e.id,value:e.id,label:e.companyName},{"default":n((()=>[y(_(e.companyName),1)])),_:2},1032,["value","label"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":n((()=>[m(o,{label:"收款银行",prop:"bankName"},{"default":n((()=>[m(l,{modelValue:I.ruleForm.bankName,"onUpdate:modelValue":a[2]||(a[2]=e=>I.ruleForm.bankName=e),modelModifiers:{trim:!0},placeholder:"请输入收款银行",maxlength:50,clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":n((()=>[m(o,{label:"收款银行账号",prop:"bankNo"},{"default":n((()=>[m(l,{modelValue:I.ruleForm.bankNo,"onUpdate:modelValue":a[3]||(a[3]=e=>I.ruleForm.bankNo=e),modelModifiers:{trim:!0},placeholder:"请输入收款银行账号",maxlength:50,clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":n((()=>[m(o,{label:"收款单位",prop:"receiptUnitName"},{"default":n((()=>[m(l,{modelValue:I.ruleForm.receiptUnitName,"onUpdate:modelValue":a[4]||(a[4]=e=>I.ruleForm.receiptUnitName=e),modelModifiers:{trim:!0},placeholder:"请输入收款单位",maxlength:50,clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-27bca3da"]]);export{x as default};