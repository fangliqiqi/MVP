import{P as e}from"./ProTable.1672389691407.js";import{P as a}from"./index.16723896914072.js";import{E as t}from"./index.16723896914076.js";import{B as o}from"./index.16723896914077.js";import{d as n,f as s,$ as i,a2 as r,j as d,c as l,W as c,P as m,u,aD as p,a3 as h,o as f,a as x,U as y,ay as g,az as v}from"./vue.1672389691407.js";import{_ as b,g as _,f as I,a as j,E as w}from"./index.1672389691407.js";import{c as C}from"./socialHandlePermission.16723896914072.js";import{A as W,F as P,E as k}from"./header.1672389691407.js";import{g as E,s as S}from"./socialfundSearch.16723896914072.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./xlsx.1672389691407.js";import"./vuedraggable.umd.1672389691407.js";import"./excel.1672389691407.js";const T=e=>(g("data-v-b5f9fef6"),e=e(),v(),e),D={"class":"system-dict-container"},R={"class":"el-dropdown-link"},Y=y(" 模板下载 "),L=T((()=>x("a",{href:"/template/socialfund/批量调基模板.xlsx",download:""}," 批量调基模板",-1))),N=n({name:"社保公积金查询"});var B=b(Object.assign(N,{setup(n){const y=s(null),g=p(),v=s(null),b=s(null),T=(e,a)=>a.map((e=>{const a=e.message;return{line:e.lineNum,isError:a?"是":"否",error:a}})),N=async e=>{try{e=Object.assign({},{type:0},e);const a=await C(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records};w.error(a.msg)}catch(a){}return{current:1,total:0,data:[]}},B=i({batchExtParams:[{dataIndex:"doMonth",title:"月份",position:"header",type:"month",config:{placeholder:"请选择月份",format:"YYYYMM",valueFormat:"YYYYMM",clearable:!0,disabledDate:e=>e&&e.valueOf()>Date.now()}}],batchRules:{doMonth:[{required:!0,message:"请选择月份",trigger:"change"}]},searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},columns:[{dataIndex:"empName",title:"员工姓名",minWidth:180},{dataIndex:"empIdcard",title:"身份证号",minWidth:200},{dataIndex:"empType",title:"员工类型",minWidth:140},{dataIndex:"unitName",title:"单位名称",minWidth:220,tooltip:!0,hideInSearch:!0},{dataIndex:"settleDomainName",title:"项目名称",minWidth:200,tooltip:!0},{dataIndex:"settleDomainCode",title:"项目编码",minWidth:200},{dataIndex:"socialHouseholdName",title:"社保户",minWidth:200,valueType:"PageSelect",request:N,pageProps:{valueKey:"name",title:"name",search:"name",parmas:{type:0}},tooltip:!0},{dataIndex:"archivesLocation",title:"社保缴纳地",minWidth:200,valueType:"addRess",tooltip:!0,type:0,params:{pro:"socialProvince",city:"socialCity",town:"socialTown"}},{dataIndex:"providentHouseholdName",title:"公积金户",minWidth:200,valueType:"PageSelect",request:N,pageProps:{valueKey:"name",title:"name",search:"name",parmas:{type:1}},tooltip:!0},{dataIndex:"archivesLocation",title:"公积金缴纳地",minWidth:200,valueType:"addRess",tooltip:!0,params:{pro:"fundProvince",city:"fundCity",town:"fundTown"}},{dataIndex:"socialStatus",title:"社保状态",minWidth:180},{dataIndex:"fundStatus",title:"公积金状态",minWidth:180},{dataIndex:"option",title:"操作",key:"option",minWidth:120,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"批量导出",onClick:()=>{let e=Object.assign({},y.value.getParams());delete e.size,delete e.current,v.value&&v.value.openDialog(((a,t)=>{const o={...e,exportFields:a.map((e=>e.dataIndex))},n=B.selectionChangeList.map((e=>e.id));n&&n.length&&(o.idList=n),S(o).then((e=>{e.code&&200!==e.code&&j.error(e.msg),t(!0)}))}))},permission:["tsocialfundinfo-export"],icon:"icon-ic_edit_export"},{label:"批量调基",onClick:()=>{b.value&&b.value.openDialog()},permission:["tsocialfundinfo-batch-import"],type:"normal",icon:"icon-ic_edit_add"}],cellBtns:[{text:"详情",prop:"detail",permission:["tsocialfundinfo_get"]}],dictKeys:["emp_natrue","social_handle_status","fund_handle_status"],selectionChangeList:[]}),{columns:M,cellBtns:O,btn:H,searchConfig:q}=r(B),K=e=>{B.selectionChangeList=e},z=async e=>{try{const a=await E(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(a){}return{current:1,total:0,data:[]}},F=()=>{y.value.refresh()},A=async(e,a)=>{"detail"===e&&g.push({name:"social-fund-detail",params:{id:a.id}})};return d((async()=>{(async()=>{try{const e=await _(B.dictKeys);e&&B.columns.map((a=>{switch(a.dataIndex){case"empType":a.valueEnum=e.emp_natrue;break;case"socialStatus":a.valueEnum=e.social_handle_status;break;case"fundStatus":a.valueEnum=e.fund_handle_status}return a}))}catch(e){}})()})),(n,s)=>{const i=h("el-icon"),r=h("el-button"),d=h("el-dropdown-item"),p=h("el-dropdown-menu"),g=h("el-dropdown");return f(),l("div",D,[c(e,{ref_key:"proTableRef",ref:y,"row-key":"id",columns:u(M),request:z,btn:u(H),multi:!0,searchConfig:u(q),onSelectionChange:K},{extBtns:m((()=>[c(g,{"class":"arch-btn","popper-class":"module-download"},{dropdown:m((()=>[c(p,null,{"default":m((()=>[c(d,null,{"default":m((()=>[L])),_:1})])),_:1})])),"default":m((()=>[x("span",R,[c(r,{size:"default"},{"default":m((()=>[Y,c(i,{"class":"el-icon--right"},{"default":m((()=>[c(u(I))])),_:1})])),_:1})])])),_:1})])),option:m((e=>[c(a,{array:u(O),model:e,onOnClick:A},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),c(t,{ref_key:"exportExcelRef",ref:v,heads:u(W),title:"社保公积金查询批量导出",useCode:"tsocialfundinfo-export"},null,8,["heads"]),c(o,{ref_key:"batchImportDialogRef",ref:b,header:u(P),errName:"批量调基",title:"批量调基",errorHeader:u(k),errorData:T,url:"/yifu-social/method/tsocialfundinfo/importListAdd",rules:B.batchRules,"ext-params":B.batchExtParams,customError:"",download:!0,onOk:F},null,8,["header","errorHeader","rules","ext-params"])])}}}),[["__scopeId","data-v-b5f9fef6"]]);export{B as default};