import{_ as e,E as a}from"./index.1672389691407.js";import{d as l,f as o,$ as t,i as r,c as s,W as i,P as d,aD as n,a3 as u,ai as m,o as c,a as p,Q as g,O as f,U as h}from"./vue.1672389691407.js";import{r as y,s as k,u as w}from"./handle.1672389691407.js";const v={"class":"downshift-archives-dialog"},_={"class":"dialog-footer"},b=h("取 消"),D=h("确 定"),x=l({name:"downShiftDialog"});var C=e(Object.assign(x,{props:{title:String,type:Number,required:Boolean},emits:["ok","onLoading","sucess","errorBack"],setup(e,{expose:l,emit:h}){var x;const C=e;n();const S=o(null),F=t({isShowDialog:!1,loading:!1,ruleForm:{},info:null,DICTS:{},dictKeys:["downshift_reason"],selectionChangeList:[]}),V=t({remark:[{required:C.required,message:"请输入办理意见",trigger:"blur"}]}),L=null==(x=r())?void 0:x.appContext.config.globalProperties.$message,j=()=>{S.value&&(S.value.clearValidate(),S.value.resetFields()),F.isShowDialog=!1,F.loading=!1},q=()=>{S.value&&S.value.validate((async e=>{if(e){F.loading=!0;try{const e=F.selectionChangeList.map((e=>({id:e.id,remark:F.ruleForm.remark}))),a=F.selectionChangeList.map((e=>e.id));let l;1===C.type?l=await y(e):2===C.type?l=await k(e):3!==C.type&&4!==C.type||(l=await w({refundType:C.type,insuranceDetailList:a,remark:F.ruleForm.remark})),l&&200===l.code&&0===l.data.length?(L.success("操作成功"),h("sucess"),j()):l.data&&l.data.length>0&&(h("errorBack",l.data),F.loading=!1)}catch(l){F.loading=!1,a.error("退回失败，请联系管理员")}}}))};return l({openDialog:async e=>{F.selectionChangeList=e,F.isShowDialog=!0}}),(a,l)=>{const o=u("el-input"),t=u("el-form-item"),r=u("el-col"),n=u("el-row"),h=u("el-form"),y=u("el-button"),k=u("el-dialog"),w=m("debounce");return c(),s("div",v,[i(k,{title:e.title,modelValue:F.isShowDialog,"onUpdate:modelValue":l[1]||(l[1]=e=>F.isShowDialog=e),"close-on-click-modal":!1,width:"576px",onClose:j},{footer:d((()=>[p("span",_,[i(y,{onClick:j,size:"default"},{"default":d((()=>[b])),_:1}),g((c(),f(y,{type:"primary",loading:F.loading,size:"default"},{"default":d((()=>[D])),_:1},8,["loading"])),[[w,q]])])])),"default":d((()=>[i(h,{ref_key:"formRef",ref:S,model:F.ruleForm,rules:V,size:"default","label-width":"100px"},{"default":d((()=>[i(n,{style:{"margin-top":"10px"}},{"default":d((()=>[i(r,{"class":"mb20"},{"default":d((()=>[i(t,{label:"办理意见：",prop:"remark"},{"default":d((()=>[i(o,{modelValue:F.ruleForm.remark,"onUpdate:modelValue":l[0]||(l[0]=e=>F.ruleForm.remark=e),modelModifiers:{trim:!0},type:"textarea",placeholder:"请输入办理意见",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-55608f3e"]]);export{C as default};