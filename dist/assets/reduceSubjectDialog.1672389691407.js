import{_ as e,g as l,l as a,E as o}from"./index.1672389691407.js";import{i as s}from"./subject.1672389691407.js";import{d as u,f as r,$ as t,j as d,c as n,W as m,P as i,a3 as p,o as c,a as f,U as v,V as _,F as g,a5 as b,O as h,u as y,ay as F,az as R}from"./vue.1672389691407.js";const D=e=>(F("data-v-11be909a"),e=e(),R(),e),V={"class":"downshift-archives-dialog"},k=D((()=>f("div",{"class":"line"},null,-1))),S={"class":"tips"},w=D((()=>f("span",{style:{"vertical-align":"text-bottom"}},"减项后，人员将无法在该项目下开展任何服务，请谨慎操作！",-1))),j={"class":"dialog-footer"},x=v("取 消"),E=v("确 定"),L=u({name:"reduceSubjectDialog"});var N=e(Object.assign(L,{emits:["ok"],setup(e,{expose:u,emit:F}){const R=r(null),D=t({isShowDialog:!1,loading:!1,leaveReasonDataSource:{},ruleForm:{empId:null,id:null,empName:null,empIdcard:null,deptName:null,deptNo:null,leaveReason:null,leaveRemark:null,isLeaveEmployee:null},info:null}),L=t({leaveReason:[{required:!0,message:"请选择减项原因",trigger:"change"}],isLeaveEmployee:[{required:!0,message:"请选择是否同步减档",trigger:"change"}]}),N=()=>{R.value&&R.value.clearValidate(),D.isShowDialog=!1},U=()=>{R.value&&R.value.validate((e=>{e&&(D.loading=!0,s(D.ruleForm).then((e=>{200===e.code?(1===D.ruleForm.isLeaveEmployee?o.success("减项减档成功"):o.success(e.msg||"减项成功，项目状态已更新为“已减项”"),F("ok"),N()):o.error(e.msg)}))["finally"]((()=>{D.loading=!1})))}))};return d((()=>{l("social_reduce_reason").then((e=>{D.leaveReasonDataSource=e}))})),u({openDialog:async e=>{D.ruleForm=e,D.ruleForm.leaveReason=null,D.ruleForm.leaveRemark=null,D.ruleForm.isLeaveEmployee=null,D.isShowDialog=!0,D.leaveReasonDataSource&&0!==Object.keys(D.leaveReasonDataSource).length||l("social_reduce_reason").then((e=>{D.leaveReasonDataSource=e}))}}),(e,l)=>{const o=p("el-form-item"),s=p("el-col"),u=p("el-option"),r=p("el-select"),t=p("el-input"),d=p("el-icon"),F=p("el-row"),z=p("el-form"),I=p("el-button"),C=p("el-dialog");return c(),n("div",V,[m(C,{title:"减项",modelValue:D.isShowDialog,"onUpdate:modelValue":l[3]||(l[3]=e=>D.isShowDialog=e),"close-on-click-modal":!1,width:"576px",onClose:N},{footer:i((()=>[f("span",j,[m(I,{onClick:N,size:"default"},{"default":i((()=>[x])),_:1}),m(I,{type:"primary",onClick:U,loading:D.loading,size:"default"},{"default":i((()=>[E])),_:1},8,["loading"])])])),"default":i((()=>[m(z,{ref_key:"formRef",ref:R,model:D.ruleForm,rules:L,size:"default","label-width":"90px"},{"default":i((()=>[m(F,null,{"default":i((()=>[m(s,{span:12},{"default":i((()=>[m(o,{label:"姓名"},{"default":i((()=>[v(_(D.ruleForm.empName),1)])),_:1})])),_:1}),m(s,{span:12},{"default":i((()=>[m(o,{label:"身份证号"},{"default":i((()=>[v(_(D.ruleForm.empIdcard),1)])),_:1})])),_:1}),m(s,{span:12},{"default":i((()=>[m(o,{label:"项目名称"},{"default":i((()=>[v(_(D.ruleForm.deptName),1)])),_:1})])),_:1}),m(s,{span:12},{"default":i((()=>[m(o,{label:"项目编码"},{"default":i((()=>[v(_(D.ruleForm.deptNo),1)])),_:1})])),_:1}),m(s,{span:24},{"default":i((()=>[k])),_:1}),m(s,{span:12},{"default":i((()=>[m(o,{label:"减项原因",prop:"leaveReason"},{"default":i((()=>[m(r,{placeholder:"请选择",modelValue:D.ruleForm.leaveReason,"onUpdate:modelValue":l[0]||(l[0]=e=>D.ruleForm.leaveReason=e),style:{width:"100%"}},{"default":i((()=>[(c(!0),n(g,null,b(D.leaveReasonDataSource,((e,l)=>(c(),h(u,{key:"leaveReasonDataSource"+l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(s,{span:12},{"default":i((()=>[m(o,{label:"同步减档",prop:"isLeaveEmployee"},{"default":i((()=>[m(r,{placeholder:"请选择",modelValue:D.ruleForm.isLeaveEmployee,"onUpdate:modelValue":l[1]||(l[1]=e=>D.ruleForm.isLeaveEmployee=e),style:{width:"100%"}},{"default":i((()=>[m(u,{value:"1",label:"是"}),m(u,{value:"0",label:"否"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(s,{span:24},{"default":i((()=>[m(o,{label:"减项备注",prop:"leaveRemark"},{"default":i((()=>[m(t,{type:"textarea",modelValue:D.ruleForm.leaveRemark,"onUpdate:modelValue":l[2]||(l[2]=e=>D.ruleForm.leaveRemark=e),placeholder:"请输入减项备注",maxlength:"200",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(s,{span:24},{"default":i((()=>[m(o,{label:""},{"default":i((()=>[f("div",S,[m(d,null,{"default":i((()=>[m(y(a))])),_:1}),w])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-11be909a"]]);export{N as default};