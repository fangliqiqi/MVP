import{P as e}from"./ProTable.1672389691407.js";import{P as a}from"./index.16723896914072.js";import t from"./editPayPeople.1672389691407.js";import{B as i}from"./index.16723896914077.js";import{ah as n}from"./header.1672389691407.js";import{_ as o,g as l,f as s,E as d}from"./index.1672389691407.js";import{a as r,e as p}from"./paysearch.1672389691407.js";import{d as c,f as m,$ as h,a2 as u,j as y,c as f,W as x,P as I,u as b,a3 as _,o as v,a as g,U as k,ay as W,az as j}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./xlsx.1672389691407.js";import"./excel.1672389691407.js";const S=e=>(W("data-v-02b1581a"),e=e(),j(),e),P={"class":"system-dict-container"},w={"class":"el-dropdown-link"},C=k(" 模板下载 "),N=S((()=>g("a",{href:"/template/payservice/薪酬人员查询批量更新模板.xlsx",download:""}," 批量更新模板",-1))),O=c({name:"薪酬人员查询"});var B=o(Object.assign(O,{setup(o){const c=m(null),k=m(null),W=m(!1),j=m(null),S=e=>{O.selectOptions=e},O=h({searchConfig:{labelWidth:110,option:{extBtn:"extBtns"}},columns:[{dataIndex:"empName",title:"员工姓名",minWidth:160},{dataIndex:"empIdcard",title:"身份证号",minWidth:200,tooltips:!0},{dataIndex:"deptName",title:"项目名称",minWidth:160,tooltip:!0},{dataIndex:"deptNo",title:"项目编码",minWidth:140},{dataIndex:"invoiceTitle",title:"封面抬头",minWidth:200,tooltip:!0},{dataIndex:"unitName",title:"客户名称",hideInSearch:!0,minWidth:180,tooltip:!0},{dataIndex:"bankName",title:"开户行总行",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"bankProvince",title:"开户行省",hideInSearch:!0,minWidth:150,valueType:"addRess",params:{pro:"bankProvince"}},{dataIndex:"bankCity",title:"开户行市",hideInSearch:!0,minWidth:140,valueType:"addRess",params:{pro:"bankCity"}},{dataIndex:"bankSubName",title:"开户行支行",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"bankNo",title:"银行卡号",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"empPhone",title:"手机号码",hideInSearch:!0,minWidth:160},{dataIndex:"taxMonth",title:"计税月份",hideInSearch:!0,minWidth:160},{dataIndex:"fileStatus",title:"在职状态",hideInSearch:!0,minWidth:160,valueEnum:{0:"在职",1:"离职"}},{dataIndex:"option",title:"操作",key:"option",minWidth:140,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"批量导出",permission:["salary_tsalaryemployee-export"],onClick:()=>{if(W.value=!0,O.selectOptions.length>0){const e=[];O.selectOptions.map((a=>{e.push(a.id)})),O.params={ids:e.join(",")}}else O.params=c.value.getParams(),delete O.params.size,delete O.params.current;p(O.params).then((e=>{200==e.code?d.success("导出成功"):d.error(e.msg||"导出失败")}))["catch"]((e=>{d.error(e.msg||"导出失败")}))["finally"]((()=>{W.value=!1}))},loading:W,icon:"icon-ic_edit_export"},{label:"批量更新",permission:["tsalaryemployee_batch_update"],onClick:()=>{j.value&&j.value.openDialog()},type:"normal",icon:"icon-ic_edit_refresh"}],cellBtns:[{text:"编辑",prop:"edit",permission:["salary_tsalaryemployee_get","salary_tsalaryemployee_edit"]}],selectOptions:[],params:{},dictKeys:[]}),{columns:B,cellBtns:R,btn:T,searchConfig:z}=u(O),D=async e=>{try{const a=await r(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records.map(((a,t)=>({...a,index:(e.current-1)*e.size+t+1})))}}catch(a){}return{current:1,total:0,data:[]}},E=()=>{c.value.refresh()},K=async(e,a)=>{"edit"===e&&k.value&&k.value.openDialog(a)};return y((()=>{(async()=>{try{await l(O.dictKeys)&&O.columns.map((e=>e))}catch(e){}})()})),(o,l)=>{const d=_("el-icon"),r=_("el-button"),p=_("el-dropdown-item"),m=_("el-dropdown-menu"),h=_("el-dropdown");return v(),f("div",P,[x(e,{ref_key:"proTableRef",ref:c,"row-key":"id",columns:b(B),request:D,btn:b(T),searchConfig:b(z),multi:!0,onSelectionChange:S},{extBtns:I((()=>[x(h,{"class":"arch-btn","popper-class":"module-download"},{dropdown:I((()=>[x(m,null,{"default":I((()=>[x(p,null,{"default":I((()=>[N])),_:1})])),_:1})])),"default":I((()=>[g("span",w,[x(r,{size:"default"},{"default":I((()=>[C,x(d,{"class":"el-icon--right"},{"default":I((()=>[x(b(s))])),_:1})])),_:1})])])),_:1})])),option:I((e=>[x(a,{array:b(R),model:e,onOnClick:K},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),x(i,{ref_key:"batchImportDialogRef",ref:j,header:b(n),url:"/yifu-salary/method/tsalaryemployee/batchUpdateSalaryEmployee",errName:"薪酬人员查询批量更新",title:"批量更新",download:!0,onOk:E},null,8,["header"]),x(t,{ref_key:"editPayPeopleRef",ref:k,onOk:E},null,512)])}}}),[["__scopeId","data-v-02b1581a"]]);export{B as default};