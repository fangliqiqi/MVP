import{d as e,f as a,$ as t,j as i,c as n,W as o,P as r,ax as s,o as d}from"./vue.1672389691407.js";import{P as l}from"./ProTable.1672389691407.js";import{P as c}from"./index.16723896914072.js";import{g as m,_ as h,e as p}from"./feedback.1672389691407.js";import{E as u}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const f={"class":"cardinal-config-container"},I=e({name:"最低工资提醒"}),y=Object.assign(I,{setup(e){const I=a(null),y=a(null),x=s(),g=()=>{I.value&&I.value.onSearch()},b=a(!1),S=t({searchConfig:{labelWidth:120},columns:[{dataIndex:"customerName",title:"客户名称",minWidth:220,tooltip:!0,hideInSearch:!0},{dataIndex:"departName",title:"项目名称",minWidth:180,hideInSearch:!0,tooltip:!0},{dataIndex:"employeeName",title:"员工姓名",minWidth:180},{dataIndex:"employeeIdnum",title:"身份证号",minWidth:200,tooltip:!0},{dataIndex:"salaryMonth",title:"工资月份",valueType:"date",selectType:"month",format:"YYYYMM",valueFormat:"YYYYMM",minWidth:160},{dataIndex:"customerName",title:"客户名称",minWidth:220,hideInTable:!0},{dataIndex:"relaySalary",title:"应发工资",hideInSearch:!0,minWidth:160},{dataIndex:"actualSalary",title:"实发工资",minWidth:160,hideInSearch:!0},{dataIndex:"",title:"项目所在地",minWidth:160,hideInSearch:!0,valueType:"addRess",params:{pro:"province",city:"city",town:"town"},tooltip:!0},{dataIndex:"salaryBase",title:"最低工资标准",hideInSearch:!0,tooltip:!0,minWidth:200},{dataIndex:"createName",title:"创建人",tooltip:!0,minWidth:200},{dataIndex:"feedBack",title:"反馈原因",hideInSearch:!0,tooltip:!0,minWidth:200},{dataIndex:"option",title:"操作",key:"option",width:120,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],params:{},btn:[{label:"批量导出",onClick:()=>{if(b.value=!0,S.selectionChangeList.length>0){const e=[];S.selectionChangeList.map((a=>{e.push(a.id)})),S.params={ids:e.join(",")}}else S.params=I.value.getParams(),delete S.params.size,delete S.params.current;p(S.params).then((e=>{200==e.code?u.success("导出成功"):u.error(e.msg||"导出失败")}))["catch"]((e=>{u.error(e.msg||"导出失败")}))["finally"]((()=>{b.value=!1}))},loading:b,permission:[],icon:"icon-ic_edit_export"}],cellBtns:[{text:"反馈",prop:"feedback",permission:[],isGray:e=>e.feedBack||e.createBy!=S.userInfos.id}],dictKeys:[],selectionChangeList:[],userInfos:{}}),W=e=>{S.selectionChangeList=e},k=async(e,a)=>{if("feedback"===e)y.value&&y.value.openDialog(a,"minSalary")};i((()=>{S.userInfos=x.state.userInfos.userInfos}));const v=async e=>{try{e.createTime&&(e.createTime=null);const a=await m(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(a){}return{current:1,total:0,data:[]}};return(e,a)=>(d(),n("div",f,[o(l,{ref_key:"proTableRef",ref:I,"row-key":"id",columns:S.columns,request:v,btn:S.btn,searchConfig:S.searchConfig,onSelectionChange:W,multi:""},{option:r((e=>[o(c,{array:S.cellBtns,model:e,onOnClick:k},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),o(h,{ref_key:"feedbackVueRef",ref:y,onOk:g},null,512)]))}});export{y as default};