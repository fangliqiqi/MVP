import{P as e}from"./ProTable.1672389691407.js";import{m as a,n as t,o as n}from"./eleContract.16723896914072.js";import{P as o}from"./index.16723896914072.js";import{b as l,C as r}from"./dicts.1672389691407.js";import{g as s,E as i,a as c}from"./index.1672389691407.js";import d from"./accountCerDialog.1672389691407.js";import u from"./inviteDialog.1672389691407.js";import m from"./sealListDialog.1672389691407.js";import{d as p,f,j as y,$ as v,c as h,W as g,P as I,o as k}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const x={"class":"contract-apply-container"},b=p({name:"客服账号"}),S=Object.assign(b,{setup(p){const b=f(null),S=f(null),_=f(null),j=f(null),D=f(null),E=f(null);y((()=>{O()}));const O=async()=>{try{const e=await s(W.dictKeys);e&&(W.DICTS=e,W.columns=W.columns.map((a=>{const t={...a};switch(a.dataIndex){case"empNatrue":t.valueEnum=e.emp_natrue;break;case"fileSource":t.valueEnum=e.EMP_SOURCE;break;case"socialStatus":t.valueEnum=e.social_ecurity_state;break;case"insuranceStatus":t.valueEnum=e.commercial_satte;break;case"fundStatus":t.valueEnum=e.fund_status;break;case"contractStatus":t.valueEnum=e.personnel_state}return t})))}catch(e){}},w=async e=>{try{const t=await a(Object.assign({},e,{systemFlag:0}));if(t&&200==t.code&&t.data)return{current:t.data.current,total:t.data.total,data:t.data.records}}catch(t){}return{current:1,total:0,data:[]}},C=()=>{S.value&&S.value.doSearch()},R=async(e,a)=>{switch(e){case"real":c.confirm("确定发送实名邀请","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{n({id:a.id}).then((e=>{e&&200===e.code?(i.success("发送成功，请继续完成实名认证"),C(),window.open(e.data)):i.error(e.msg||"发送失败")}),(e=>{i.error(e&&e.msg||"发送失败")}))}));break;case"invite":_.value&&_.value.openDialog(a);break;case"seal":t({personAccountId:a.id}).then((e=>{if(e&&200===e.code){const t=e.data.map((e=>e.sealId));D.value&&D.value.openDialog(a,t)}else i.error(e.msg||"获取印章权限失败")}),(e=>{i.error(e&&e.msg||"获取印章权限失败")}));break;case"cacelSeal":t({personAccountId:a.id}).then((e=>{if(e&&200===e.code){const t=e.data.map((e=>e.sealId));E.value&&E.value.openDialog(a,t)}else i.error(e.msg||"获取印章权限失败")}),(e=>{i.error(e&&e.msg||"获取印章权限失败")}));break;case"removeOrg":j.value&&j.value.openDialog(a)}},W=v({cellBtns:[{text:"发送实名",prop:"real",tooltip:"当前状态不可操作",isGray:e=>1==e.realStatus},{text:"邀请加入",prop:"invite",tooltip:"当前状态不可操作",isGray:e=>1!=e.realStatus},{text:"移出组织",prop:"removeOrg",tooltip:"当前状态不可操作",isGray:e=>!e.companyInfoId},{text:"授权印章",prop:"seal",tooltip:"当前状态不可操作",isGray:e=>!(e.companyInfoId&&!e.sealId||e.sealId)},{text:"取消授权印章",prop:"cacelSeal",tooltip:"当前状态不可操作",isGray:e=>!e.sealId}],btn:[{label:"新增",onClick:()=>{b.value&&b.value.openDialog()},permission:["demo_fddpersonaccount_add"],icon:"icon-ic_edit_add"}],columns:[{dataIndex:"name",title:"客服姓名",minWidth:160,ellipsis:!0},{dataIndex:"idCard",title:"身份证号",minWidth:160,ellipsis:!0},{dataIndex:"moblie",title:"手机号码",hideInSearch:!0,minWidth:160},{dataIndex:"systemFlag",title:"用户类型",hideInSearch:!0,minWidth:120,valueEnum:l},{dataIndex:"realStatus",title:"实名状态",minWidth:140,valueEnum:r},{dataIndex:"companyName",title:"组织",minWidth:180,ellipsis:!0,hideInSearch:!0},{dataIndex:"sealName",title:"印章",minWidth:160,ellipsis:!0,hideInSearch:!0},{dataIndex:"option",title:"操作",key:"option",width:360,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}]});return(a,t)=>(k(),h("div",x,[g(e,{ref_key:"proTableRef",ref:S,"row-key":"id",columns:W.columns,request:w,btn:W.btn},{option:I((e=>[g(o,{array:W.cellBtns,model:e,onOnClick:R},null,8,["array","model"])])),_:1},8,["columns","btn"]),g(d,{ref_key:"accountCerDialogRef",ref:b,onOk:C},null,512),g(u,{title:"邀请加入组织",type:"invite",ref_key:"inviteDialogRef",ref:_,onOk:C},null,512),g(u,{title:"移出组织",type:"remove",ref_key:"removeGroupDialogRef",ref:j,onOk:C},null,512),g(m,{title:"印章列表",type:"auth",ref_key:"sealRef",ref:D,onOk:C},null,512),g(m,{title:"已授权印章列表",type:"noauth",ref_key:"cancelSealRef",ref:E,onOk:C},null,512)]))}});export{S as default};