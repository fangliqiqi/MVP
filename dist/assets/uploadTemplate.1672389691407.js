import{_ as a,L as o,u as e,E as i}from"./index.1672389691407.js";import{d as l,$ as s,c as t,Q as d,O as n,P as c,a3 as p,ai as r,o as u,W as m,u as f,ay as g,az as D,a as h,U as _}from"./vue.1672389691407.js";const v=a=>(g("data-v-f8b34782"),a=a(),D(),a),w={"class":"upload-template-container"},x=v((()=>h("div",{"class":"el-upload__text"},[
_("拖拽或 "),
h("em",null,"点击上传")],-1))),O=v((()=>h("div",{"class":"el-upload__tip"},"支持上传PDF、DOC、DOCX格式文档，且大小不得超过5Mb.",-1))),S=l({name:"uploadTemplateDialog"});var z=a(Object.assign(S,{emits:["ok"],setup(a,{expose:l,emit:g}){const D=s({isShowDialog:!1,limitZipSize:5,loading:!1,info:{},headers:{Authorization:`${o.get("token_type")} ${o.get("access_token")}`},file:null}),h=a=>{if(!(a.size/1024/1024<D.limitZipSize))return i.erro(`上传文件大小不能超过 ${D.limitZipSize}MB!`),!1;D.loading=!0},_=(a,o)=>{let e=a.name;if(!/\.(zip|ZIP|pdf|PDF|doc|DOC|docx|DOCX)$/.test(e))return i.error("上传文件必须为PDF、DOC、DOCX格式文档"),D.file=null,!1;D.file=a},v=a=>{i.error("模板上传失败，请稍后重试"),D.loading=!1},S=(a,o,e)=>{a&&200===a.code?(i.success("模板上传成功"),g("ok"),z()):i.error(a.msg||"模板上传失败"),D.loading=!1},z=()=>{D.isShowDialog=!1};return l({openDialog:async a=>{D.loading=!1,D.info=a,D.file=null,D.isShowDialog=!0}}),(a,o)=>{const i=p("el-icon"),l=p("el-upload"),s=p("el-dialog"),g=r("loading");return u(),t("div",w,[d((u(),n(s,{title:"模板上传",modelValue:D.isShowDialog,"onUpdate:modelValue":o[0]||(o[0]=a=>D.isShowDialog=a),width:"576px","close-on-click-modal":!1,onClose:z},{"default":c((()=>[m(l,{"class":"upload-demo",drag:"",action:`/yifu-archives/method/fddcontracttemplate/upload?id=${D.info.id}`,accept:"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/pdf,pplication/x-pdf","show-file-list":!1,"on-success":S,"on-error":v,headers:D.headers,"on-change":_,"before-upload":h},{tip:c((()=>[O])),"default":c((()=>[m(i,{"class":"el-icon--upload"},{"default":c((()=>[m(f(e))])),_:1}),x])),_:1},8,["action","headers"])])),_:1},8,["modelValue"])),[[g,D.loading]])])}}}),[["__scopeId","data-v-f8b34782"]]);export{z as default};