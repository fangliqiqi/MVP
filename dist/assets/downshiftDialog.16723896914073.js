import{s as e,u as l,d as a}from"./company.1672389691407.js";import{_ as r}from"./index.167238969140713.js";import{_ as o,E as i}from"./index.1672389691407.js";import{d as n,f as d,$ as s,c as u,W as m,P as t,n as c,a3 as p,o as g,a as y,U as f}from"./vue.1672389691407.js";import"./city.1672389691407.js";const b={"class":"downshift-archives-dialog"},F=f("按天"),h=f("按月"),_={"class":"dialog-footer"},v=f("关闭"),D=f("保存"),C=n({name:"downShiftDialog"});var w=o(Object.assign(C,{emits:["ok"],setup(o,{expose:n,emit:f}){const C=d(null),w=d(null),H=s({isShowDialog:!1,loading:!1,ruleForm:{companyName:"",companyAddress:"",companyDocking:"",billingType:"1",insuranceHandleProvince:null,insuranceHandleProvinceName:null,insuranceHandleCity:null,insuranceHandleCityName:null},title:"",nameDisableFlag:!1,isEdit:!1}),N=s({companyName:[{required:!0,message:"请输入保险公司",trigger:"blur"}],companyAddress:[{required:!0,message:"请输入地址",trigger:"blur"}],companyDocking:[{required:!0,message:"请输入对接人",trigger:"blur"}],billingType:[{required:!0,message:"请选择计费方式",trigger:"change"}],insuranceHandleCity:[{required:!0,message:"请选择商险办理地",trigger:"change"}]}),V=()=>{H.nameDisableFlag=!1,H.ruleForm&&(H.ruleForm.id=""),w.value&&w.value.resetFields(),H.isShowDialog=!1,H.loading=!1},k=()=>{w.value&&w.value.validate((async e=>{if(e){H.loading=!0;try{let e=null;e=H.ruleForm.id?await l(H.ruleForm):await a(H.ruleForm),e&&200===e.code?(i.success("操作成功"),f("ok",H.isEdit),H.ruleForm.id="",V()):i.error(e.msg||"操作失败")}catch(r){i.error("操作失败，请联系管理员")}finally{H.loading=!1}}}))},x=e=>{e.city&&(H.ruleForm.insuranceHandleProvince=e.pro,H.ruleForm.insuranceHandleProvinceName=e.proName,H.ruleForm.insuranceHandleCity=e.city,H.ruleForm.insuranceHandleCityName=e.cityName)},P=()=>{H.ruleForm.insuranceHandleProvince=null,H.ruleForm.insuranceHandleProvinceName=null,H.ruleForm.insuranceHandleCity=null,H.ruleForm.insuranceHandleCityName=null};return n({openDialog:async e=>{H.isShowDialog=!0,H.title="新增保险公司",H.isEdit=!1},editDialog:l=>{var a;H.isShowDialog=!0,H.isEdit=!0,H.title="编辑保险公司",a=l.companyName,e({CompanyName:a}).then((e=>{e.data&&e.data.length>0&&(H.nameDisableFlag=!0)})),c((()=>{H.ruleForm=Object.assign(H.ruleForm,l)})),setTimeout((()=>{C.value.initParams()}),50)},rules:N}),(e,l)=>{const a=p("el-input"),o=p("el-form-item"),i=p("el-col"),n=p("el-radio"),d=p("el-radio-group"),s=p("el-row"),c=p("el-form"),f=p("el-button"),j=p("el-dialog");return g(),u("div",b,[m(j,{title:H.title,modelValue:H.isShowDialog,"onUpdate:modelValue":l[4]||(l[4]=e=>H.isShowDialog=e),"close-on-click-modal":!1,width:"576px",onClose:V},{footer:t((()=>[y("span",_,[m(f,{onClick:V,size:"default"},{"default":t((()=>[v])),_:1}),m(f,{type:"primary",onClick:k,loading:H.loading,size:"default"},{"default":t((()=>[D])),_:1},8,["loading"])])])),"default":t((()=>[m(c,{ref_key:"formRef",ref:w,model:H.ruleForm,rules:N,size:"default","label-width":"95px"},{"default":t((()=>[m(s,null,{"default":t((()=>[m(i,{"class":"mb20"},{"default":t((()=>[m(o,{label:"保险公司",prop:"companyName"},{"default":t((()=>[m(a,{modelValue:H.ruleForm.companyName,"onUpdate:modelValue":l[0]||(l[0]=e=>H.ruleForm.companyName=e),modelModifiers:{trim:!0},disabled:H.nameDisableFlag,placeholder:"请输入保险公司",clearable:"",maxlength:60},null,8,["modelValue","disabled"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":t((()=>[m(o,{label:"地址",prop:"companyAddress"},{"default":t((()=>[m(a,{modelValue:H.ruleForm.companyAddress,"onUpdate:modelValue":l[1]||(l[1]=e=>H.ruleForm.companyAddress=e),modelModifiers:{trim:!0},placeholder:"请输入地址",maxlength:50,clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":t((()=>[m(o,{label:"对接人",prop:"companyDocking"},{"default":t((()=>[m(a,{modelValue:H.ruleForm.companyDocking,"onUpdate:modelValue":l[2]||(l[2]=e=>H.ruleForm.companyDocking=e),modelModifiers:{trim:!0},placeholder:"请输入对接人",clearable:"",maxlength:20},null,8,["modelValue"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":t((()=>[m(o,{label:"商险办理地",prop:"insuranceHandleCity"},{"default":t((()=>[m(r,{ref_key:"pageAreaRef",ref:C,address:H.ruleForm.insuranceHandleCity,onCurrentChange:x,onClear:P,style:{width:"100%"},"check-strictly":!1,"has-town":!1},null,8,["address"])])),_:1})])),_:1}),m(i,{"class":"mb20"},{"default":t((()=>[m(o,{label:"计费方式",prop:"billingType"},{"default":t((()=>[m(d,{modelValue:H.ruleForm.billingType,"onUpdate:modelValue":l[3]||(l[3]=e=>H.ruleForm.billingType=e)},{"default":t((()=>[m(n,{label:"0"},{"default":t((()=>[F])),_:1}),m(n,{label:"1"},{"default":t((()=>[h])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-0bdd5500"]]);export{w as default};