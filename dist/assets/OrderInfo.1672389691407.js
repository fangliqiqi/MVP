import{d as e,$ as a,w as l,h as t,k as o,c as r,W as s,P as d,a as n,U as c,V as u,u as i,J as p,T as m,ay as f,az as N,ax as _,a3 as b,o as y,F as h,a5 as j}from"./vue.1672389691407.js";import v from"./ReplyRecord.1672389691407.js";import{_ as w,E as k,C,D as x}from"./index.1672389691407.js";import"./ProTable.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./index.16723896914072.js";import"./AddReply.1672389691407.js";import"./ReplyFileDetail.1672389691407.js";const E=e=>(f("data-v-b9b8ce4a"),e=e(),N(),e),S=["onClick"],T=c("--"),g={"class":"title"},O=E((()=>n("span",null,"回复记录",-1))),R={key:0,"class":"flowlist"},A=e({name:"OrderInfo"});var D=w(Object.assign(A,{props:{id:null},emits:["fetchOrder","onActionUpdate"],setup(e,{emit:f}){const N=e,w=_(),E=()=>{f("onActionUpdate")},A=a({createName:null,createTime:null,customerName:null,deptName:null,deptNo:null,orderContent:null,orderEnclosure:[],orderNo:null,orderStatus:null,collapse:!1,orderStatusDict:{0:"待处理",1:"处理中",2:"已办结"}}),D=()=>{x(N.id).then((e=>{if(200===e.code){const a=e.data||{};A.createName=a.createName,A.createTime=a.createTime,A.customerName=a.customerName,A.deptName=a.deptName,A.deptNo=a.deptNo,A.orderContent=a.orderContent,A.orderEnclosure=a.orderEnclosure,A.orderNo=a.orderNo,A.orderStatus=a.orderStatus}else A.orderNo=null}))["catch"]((()=>{A.orderNo=null}))};l((()=>{N.id&&D()})),l((()=>{f("fetchOrder",A.orderNo)})),t((()=>w.state.order.updateTime),(()=>{0==A.orderStatus&&D()}));const U=()=>{A.collapse=!A.collapse},z=o((()=>A.collapse?"收起":"展开"));return(e,a)=>{const l=b("el-form-item"),t=b("el-col"),o=b("el-row"),f=b("el-form");return y(),r("div",null,[s(f,{ref:"formRef",size:"default","label-width":"80px"},{"default":d((()=>[s(o,{style:{"margin-top":"20px"}},{"default":d((()=>[s(t,{span:6},{"default":d((()=>[s(l,{label:"下单人"},{"default":d((()=>[c(u(A.createName||"--"),1)])),_:1})])),_:1}),s(t,{span:6},{"default":d((()=>[s(l,{label:"订单日期"},{"default":d((()=>[c(u(A.createTime||"--"),1)])),_:1})])),_:1}),s(t,{span:6},{"default":d((()=>[s(l,{label:"项目编码"},{"default":d((()=>[c(u(A.deptNo||"--"),1)])),_:1})])),_:1}),s(t,{span:6},{"default":d((()=>[s(l,{label:"项目名称"},{"default":d((()=>[c(u(A.deptName||"--"),1)])),_:1})])),_:1}),s(t,{span:6},{"default":d((()=>[s(l,{label:"订单号"},{"default":d((()=>[c(u(A.orderNo||"--"),1)])),_:1})])),_:1}),s(t,{span:6},{"default":d((()=>[s(l,{label:"客户单位"},{"default":d((()=>[c(u(A.customerName||"--"),1)])),_:1})])),_:1}),s(t,{span:6},{"default":d((()=>[s(l,{label:"订单状态"},{"default":d((()=>[c(u(A.orderStatusDict[A.orderStatus]||"--"),1)])),_:1})])),_:1}),s(t,{span:24},{"default":d((()=>[s(l,{label:"订单内容"},{"default":d((()=>[c(u(A.orderContent||"--"),1)])),_:1})])),_:1}),s(t,{span:24},{"default":d((()=>[s(l,{label:"原始单据","class":"file"},{"default":d((()=>[A.orderEnclosure&&A.orderEnclosure.length?(y(!0),r(h,{key:0},j(A.orderEnclosure,(e=>(y(),r("p",{key:e.id},[n("a",{onClick:a=>{return l=e,k.warning("正在下载"),void C(l.id).then((e=>{const a=(e.data||"").replace(/(http:|https:)/,location.protocol);window.open(a,"_blank")}));var l}},u(e.enclosureName),9,S)])))),128)):(y(),r(h,{key:1},[T],64))])),_:1})])),_:1})])),_:1})])),_:1},512),n("div",g,[O,n("div",{"class":"college-container",onClick:U,style:{color:"var(--el-color-primary)","font-weight":"600"}},[c(u(i(z))+" ",1),n("em",{"class":p("iconfont icon-ic-arrow-down "+(A.collapse?"isCollapse":""))},null,2)])]),A.collapse?(y(),r("div",R,[s(v,{orderNo:A.orderNo,onOnActionUpdate:E},null,8,["orderNo"])])):m("",!0)])}}}),[["__scopeId","data-v-b9b8ce4a"]]);export{D as default};