import{g as e,d as t}from"./role.1672389691407.js";import{P as a}from"./ProTable.1672389691407.js";import{P as o}from"./index.16723896914072.js";import r from"./addRole.1672389691407.js";import i from"./addManage.1672389691407.js";import n from"./detailRole.1672389691407.js";import{a as s,E as l}from"./index.1672389691407.js";import{d,f as c,$ as p,a2 as m,c as u,W as f,P as h,u as x,o as y}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const _={"class":"system-dict-container"},j=d({name:"角色管理"}),I=Object.assign(j,{setup(d){const j=c(null),I=c(null),g=c(null),k=c(null),R=p({btn:[{label:"新增",onClick:()=>{I.value.openDialog()},permission:["sys_role_add"],icon:"icon-ic_edit_add"}],columns:[{dataIndex:"index",title:"序号",hideInSearch:!0,Width:"80px"},{dataIndex:"roleName",title:"角色名称",minWidth:"200px",tooltip:!0},{dataIndex:"roleCode",title:"角色标识",hideInSearch:!0,minWidth:"200px",tooltip:!0},{dataIndex:"roleDesc",title:"角色描述",hideInSearch:!0,width:400,tooltip:!0},{dataIndex:"createTime",title:"创建时间",hideInSearch:!0,minWidth:"200px"},{dataIndex:"option",title:"操作",key:"option",width:280,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],cellBtns:[{text:"查看",prop:"detail",permission:[]},{text:"编辑",prop:"edit",permission:["sys_role_edit"]},{text:"权限",prop:"perm",permission:["sys_role_perm"]},{text:"删除",prop:"del",permission:["sys_role_del"]}]}),{columns:v,cellBtns:b,btn:w}=m(R),S=async t=>{try{const a=await e(t);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records.map(((e,a)=>({...e,index:(t.current-1)*t.size+a+1})))}}catch(a){}return{current:1,total:0,data:[]}},D=async(e,a)=>{"detail"==e?k.value.openDialog(a):"edit"==e?I.value.openDialog(a):"perm"==e?g.value.openDialog(a):"del"==e&&s.confirm("是否确定删除？","提示",{type:"warning"}).then((async()=>{try{const e=await t(a.roleId);e&&200==e.code?(l.success("删除成功"),j.value.refresh()):l.error(e.msg)}catch(e){}}))["catch"]((()=>{}))},W=()=>{j.value.refresh()};return(e,t)=>(y(),u("div",_,[f(a,{"row-key":"id",ref_key:"proRef",ref:j,columns:x(v),btn:x(w),columnEmptyText:"--",request:S},{option:h((e=>[f(o,{array:x(b),model:e,onOnClick:D},null,8,["array","model"])])),_:1},8,["columns","btn"]),f(r,{ref_key:"addRoleRef",ref:I,onOk:W},null,512),f(i,{ref_key:"addManageRef",ref:g},null,512),f(n,{ref_key:"detailRoleRef",ref:k},null,512)]))}});export{I as default};