import{g as e,d as t}from"./permission.1672389691407.js";import{d as s,f as a,$ as i,a2 as r,j as n,E as o,c as d,W as c,P as m,u as l,aD as p,aA as u,o as h,i as y}from"./vue.1672389691407.js";import{P as f}from"./ProTable.1672389691407.js";import{P as x}from"./index.16723896914072.js";import{o as I,a as S}from"./events.1672389691407.js";import{a as j,E as _}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const k={"class":"system-dict-container"},b=s({name:"数据权限"}),v=Object.assign(b,{setup(s){const b=a(null),v=p(),A=u(),{proxy:P}=y(),g=i({btn:[{label:"新增",onClick:()=>{v.push({path:"/system/permission/addPermission",query:{}})},permission:["sys_permission_add"],icon:"icon-ic_edit_add"}],columns:[{dataIndex:"linkType",title:"类型",hideInSearch:!0,formatter:e=>1==e.linkType?"用户":"用户组"},{dataIndex:"linkName",title:"应用对象"},{dataIndex:"isCreateAuth",title:"创建人",hideInSearch:!0,formatter:e=>1==e.isCreateAuth?"开":"关"},{dataIndex:"isSettleAuth",title:"项目",hideInSearch:!0,formatter:e=>1==e.isSettleAuth?"开":"关"},{dataIndex:"isDeptAuth",title:"部门",hideInSearch:!0,valueEnum:{0:"关",1:"本部门",2:"多部门"}},{dataIndex:"isDiySql",title:"自定义SQL",hideInSearch:!0,formatter:e=>1==e.isDiySql?"开":"关"},{dataIndex:"option",title:"操作",key:"option",minWidth:100,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],cellBtns:[{text:"编辑",prop:"edit",permission:["sys_permission_edit"]},{text:"删除",prop:"del",permission:["sys_permission_del"]}]}),{columns:q,cellBtns:w,btn:C}=r(g),D=async t=>{try{const s=await e(t);if(s&&200==s.code&&s.data)return{current:s.data.current,total:s.data.total,data:s.data.records.map(((e,s)=>({...e,index:(t.current-1)*t.size+s+1})))}}catch(s){}return{current:1,total:0,data:[]}},E=async(e,s)=>{"edit"==e?v.push({path:"/system/permission/editPermission",query:{id:s.id}}):"del"==e&&j.confirm("是否确定删除？","提示",{type:"warning"}).then((async()=>{try{const e=await t(s.id);e&&200==e.code?(_.success("删除成功"),b.value.refresh()):_.error(e.msg)}catch(e){}}))["catch"]((()=>{}))},T=()=>{S(P,A.path,(()=>{b.value.refresh()}))};return n((()=>{T()})),o((()=>{I(P)})),(e,t)=>(h(),d("div",k,[c(f,{"row-key":"id",ref_key:"proRef",ref:b,columns:l(q),btn:l(C),columnEmptyText:"--",request:D},{option:m((e=>[c(x,{array:l(w),model:e,onOnClick:E},null,8,["array","model"])])),_:1},8,["columns","btn"])]))}});export{v as default};