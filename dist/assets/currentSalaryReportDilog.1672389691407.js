import{s as e,_ as a,E as l}from"./index.1672389691407.js";import{d as t,f as o,$ as s,c as r,W as i,P as u,a3 as d,o as n,a as c,ay as m,az as f,U as p}from"./vue.1672389691407.js";async function h(a){return e({url:"/yifu-salary/method/tstatisticscurrentreport/page",method:"GET",params:a})}async function y(a){return e({url:"/yifu-salary/method/tstatisticscurrentreport/export",method:"POST",responseType:"blob",data:a})}async function v(a){return e({url:"/yifu-salary/method/tstatisticscurrentreport/"+a,method:"delete"})}const g={"class":"archives-add-electronic-container"},_=(e=>(m("data-v-8546a50c"),e=e(),f(),e))((()=>c("span",{"class":"tips",style:{color:"var(--el-color-danger)"}},"由于数据量庞大，请避开正常作业时间，同时在点击 ‘确认刷新’ 按钮后系统会自动在后台运行刷新动作",-1))),b={"class":"dialog-footer"},M=p("取 消"),S=p("确 定 刷 新"),w=t({name:"currentsalaryreportdilog"});var D=a(Object.assign(w,{emits:["ok"],setup(a,{expose:t,emit:m}){const f=o(null),p=o(!1),h=s({isShowDialog:!1,id:null,title:"手动刷新",ruleForm:{settleMonth:null},fileList:[],literatureTypesDataSource:{},options:[],pickerOptions:{disabledDate:e=>e&&e.valueOf()>Date.now()}}),y={settleMonth:[{required:!0,message:"请选择月份"}]},v=()=>{h.ruleForm={},h.isShowDialog=!1,f.value&&f.value.clearValidate()},w=()=>{p.value=!1,v()},D=()=>{f.value&&f.value.validate((a=>{a&&(p.value=!0,async function(a){return e({url:"/yifu-salary/method/tstatisticstaxsalary/doRefreshStatisticsTaxAll",method:"POST",params:a})}(h.ruleForm).then((e=>{e&&200==e.code?(m("ok"),v(),l.success(e.msg||"刷新成功，请稍后查看")):l.error(e.msg||"刷新失败")}),(()=>{l.error("刷新失败")}))["finally"]((e=>{p.value=!1})))}))};return t({openDialog:async e=>{h.title="手动刷新",h.ruleForm={settleMonth:null},setTimeout((()=>{f.value&&f.value.clearValidate()}),100),h.isShowDialog=!0}}),(e,a)=>{const l=d("el-date-picker"),t=d("el-form-item"),o=d("el-col"),s=d("el-row"),m=d("el-form"),k=d("el-button"),x=d("el-dialog");return n(),r("div",g,[i(x,{title:h.title,modelValue:h.isShowDialog,"onUpdate:modelValue":a[1]||(a[1]=e=>h.isShowDialog=e),width:"576px",onClose:v,"close-on-click-modal":!1},{footer:u((()=>[c("span",b,[i(k,{onClick:w,size:"default"},{"default":u((()=>[M])),_:1}),i(k,{type:"primary",onClick:D,loading:p.value,size:"default"},{"default":u((()=>[S])),_:1},8,["loading"])])])),"default":u((()=>[i(m,{ref_key:"formRef",ref:f,model:h.ruleForm,rules:y,size:"default","label-width":"140px"},{"default":u((()=>[i(s,null,{"default":u((()=>[i(o,{"class":"mb20"},{"default":u((()=>[i(t,{label:"申报月份",prop:"settleMonth"},{"default":u((()=>[i(l,{modelValue:h.ruleForm.settleMonth,"onUpdate:modelValue":a[0]||(a[0]=e=>h.ruleForm.settleMonth=e),type:"month",placeholder:"请选择申报月份",style:{width:"100%"},format:"YYYYMM","value-format":"YYYYMM","disabled-date":h.pickerOptions.disabledDate},null,8,["modelValue","disabled-date"])])),_:1})])),_:1}),i(o,null,{"default":u((()=>[i(t,null,{"default":u((()=>[_])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-8546a50c"]]),k=Object.freeze(Object.defineProperty({__proto__:null,"default":D},Symbol.toStringTag,{value:"Module"}));export{y as a,k as b,D as c,v as d,h as g};