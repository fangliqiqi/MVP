import{_ as e}from"./index.167238969140713.js";import{_ as l,E as a,g as o}from"./index.1672389691407.js";import{n as r,m as t,o as d}from"./socialfundSet.1672389691407.js";import{d as u,f as n,$ as s,k as i,j as m,c as p,W as c,P as g,a3 as f,o as y,a as h,F as _,a5 as F,O as b,U as v,V,u as w}from"./vue.1672389691407.js";import"./city.1672389691407.js";const M={"class":"system-add-dic-container"},k={"class":"dialog-footer"},Y=v("取 消"),j=v("确 定"),O=u({name:"addPolicyconfig"});var U=l(Object.assign(O,{emits:["ok"],setup(l,{expose:u,emit:O}){const U=n(null),q=n(null),D=s({isShowDialog:!1,loading:!1,id:null,title:"新增政策配置",ruleForm:{target:"",year:"",startMonth:"",endMonth:"",province:"",city:"",pension:"",medical:"",bear:"",unemployed:"",injury:""},address:null,month:null,dictKeys:["policy_config_scope","policy_config_status","hu_config_type"],dictOptions:{policy_config_scope:null,policy_config_status:null,hu_config_type:null}}),C={target:[{required:!0,message:"请选择适应范围",trigger:"blur"}],year:[{required:!0,message:"请选择适应年份",trigger:"blur"}],startMonth:[{required:!0,message:"请选择生效月份",trigger:"change"}],province:[{required:!0,message:"请选择社保缴纳地",trigger:"change"}],pension:[{required:!0,message:"请选择养老",trigger:"change"}],medical:[{required:!0,message:"请选择医疗",trigger:"change"}],bear:[{required:!0,message:"请选择生育",trigger:"change"}],unemployed:[{required:!0,message:"请选择失业",trigger:"change"}],injury:[{required:!0,message:"请选择工伤",trigger:"change"}]},S=e=>{D.ruleForm.province=e.pro,D.ruleForm.city=e.city,D.address=e.city||e.pro},x=e=>{D.ruleForm.province=null,D.ruleForm.city=null,D.address=null},z=e=>{D.month=null,D.ruleForm.startMonth=null,D.ruleForm.endMonth=null},K=e=>{e?(D.ruleForm.startMonth=e[0],D.ruleForm.endMonth=e[1]):(D.ruleForm.startMonth=null,D.ruleForm.endMonth=null)},P=i((()=>{if(D.ruleForm.year)return[new Date(D.ruleForm.year),new Date(D.ruleForm.year)]})),R=()=>{U.value&&U.value.resetFields(),D.ruleForm={target:"",year:"",startMonth:"",endMonth:"",province:"",city:"",pension:"",medical:"",bear:"",unemployed:"",injury:""},D.address=null,D.month=null,D.isShowDialog=!1,D.loading=!1},A=()=>{R()},E=()=>{U.value.validate((e=>{e&&(D.loading=!0,null!==D.id&&void 0!==D.id?t(D.ruleForm).then((e=>{e&&200==e.code?(a.success("编辑政策配置成功"),O("ok"),R()):a.error(e.msg||"编辑政策配置失败")}),(()=>{a.error("编辑政策配置失败")}))["finally"]((()=>{D.loading=!1})):d(D.ruleForm).then((e=>{e&&200==e.code?(a.success("新增政策配置成功"),O("ok"),R()):a.error(e.msg||"新增政策配置失败")}),(e=>{const l=e&&e.msg||"新增政策配置失败";a.error(l)}))["finally"]((()=>{D.loading=!1})))}))};return m((()=>{(async()=>{try{const e=await o(D.dictKeys);e&&(D.dictOptions=e)}catch(e){}})()})),u({openDialog:async e=>{if(e&&e.id){const l=await r(e.id);200==l.code?(D.title="政策配置编辑",D.id=e.id,D.ruleForm=l.data,D.address=l.data.city||l.data.province,D.address=D.address?Number(D.address):null,D.month=[l.data.startMonth,l.data.endMonth],D.ruleForm.target=l.data.target.toString(),D.isShowDialog=!0):a.error(l.msg||"获取政策配置详情失败")}else D.title="政策配置新增",D.id=null,D.isShowDialog=!0}}),(l,a)=>{const o=f("el-radio"),r=f("el-radio-group"),t=f("el-form-item"),d=f("el-col"),u=f("el-date-picker"),n=f("el-option"),s=f("el-select"),i=f("el-row"),m=f("el-form"),O=f("el-button"),I=f("el-dialog");return y(),p("div",M,[c(I,{title:D.title,modelValue:D.isShowDialog,"onUpdate:modelValue":a[8]||(a[8]=e=>D.isShowDialog=e),"close-on-click-modal":!1,width:"816px",onClose:R},{footer:g((()=>[h("span",k,[c(O,{onClick:A,size:"default"},{"default":g((()=>[Y])),_:1}),c(O,{type:"primary",onClick:E,loading:D.loading,size:"default"},{"default":g((()=>[j])),_:1},8,["loading"])])])),"default":g((()=>[c(m,{ref_key:"formRef",ref:U,model:D.ruleForm,rules:C,size:"default","label-width":"110px"},{"default":g((()=>[c(i,null,{"default":g((()=>[c(d,{span:12},{"default":g((()=>[c(t,{label:"政策适应范围",prop:"target"},{"default":g((()=>[c(r,{modelValue:D.ruleForm.target,"onUpdate:modelValue":a[0]||(a[0]=e=>D.ruleForm.target=e)},{"default":g((()=>[(y(!0),p(_,null,F(D.dictOptions.policy_config_scope,((e,l)=>(y(),b(o,{key:l,label:l},{"default":g((()=>[v(V(e),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"政策适应年份",prop:"year"},{"default":g((()=>[c(u,{modelValue:D.ruleForm.year,"onUpdate:modelValue":a[1]||(a[1]=e=>D.ruleForm.year=e),type:"year",format:"YYYY","value-format":"YYYY",placeholder:"适应年份",style:{width:"100%"},onChange:z},null,8,["modelValue"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"生效月份",prop:"startMonth"},{"default":g((()=>[c(u,{modelValue:D.month,"onUpdate:modelValue":a[2]||(a[2]=e=>D.month=e),type:"monthrange","start-placeholder":"开始月份","end-placeholder":"结束月份","value-format":"YYYYMM",format:"YYYYMM",style:{width:"100%"},onChange:K,"popper-class":"month-picker","default-value":w(P),disabled:!D.ruleForm.year},null,8,["modelValue","default-value","disabled"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"社保缴纳地",prop:"province"},{"default":g((()=>[c(e,{ref_key:"pageAreaRef",ref:q,address:D.address,onCurrentChange:S,onClear:x,hasTown:!1,style:{width:"100%"}},null,8,["address"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"养老",prop:"pension"},{"default":g((()=>[c(s,{modelValue:D.ruleForm.pension,"onUpdate:modelValue":a[3]||(a[3]=e=>D.ruleForm.pension=e),placeholder:"请选择",style:{width:"100%"}},{"default":g((()=>[(y(!0),p(_,null,F(D.dictOptions.policy_config_status,((e,l)=>(y(),b(n,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"医疗",prop:"medical"},{"default":g((()=>[c(s,{modelValue:D.ruleForm.medical,"onUpdate:modelValue":a[4]||(a[4]=e=>D.ruleForm.medical=e),placeholder:"请选择",style:{width:"100%"}},{"default":g((()=>[(y(!0),p(_,null,F(D.dictOptions.policy_config_status,((e,l)=>(y(),b(n,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"生育",prop:"bear"},{"default":g((()=>[c(s,{modelValue:D.ruleForm.bear,"onUpdate:modelValue":a[5]||(a[5]=e=>D.ruleForm.bear=e),placeholder:"请选择",style:{width:"100%"}},{"default":g((()=>[(y(!0),p(_,null,F(D.dictOptions.policy_config_status,((e,l)=>(y(),b(n,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"失业",prop:"unemployed"},{"default":g((()=>[c(s,{modelValue:D.ruleForm.unemployed,"onUpdate:modelValue":a[6]||(a[6]=e=>D.ruleForm.unemployed=e),placeholder:"请选择",style:{width:"100%"}},{"default":g((()=>[(y(!0),p(_,null,F(D.dictOptions.policy_config_status,((e,l)=>(y(),b(n,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),c(d,{span:12},{"default":g((()=>[c(t,{label:"工伤",prop:"injury"},{"default":g((()=>[c(s,{modelValue:D.ruleForm.injury,"onUpdate:modelValue":a[7]||(a[7]=e=>D.ruleForm.injury=e),placeholder:"请选择",style:{width:"100%"}},{"default":g((()=>[(y(!0),p(_,null,F(D.dictOptions.policy_config_status,((e,l)=>(y(),b(n,{key:l,label:e,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-3aaea3c6"]]);export{U as default};