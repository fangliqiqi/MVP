import{d as a,f as e,$ as n,w as t,k as i,j as s,n as o,c as l,a as r,W as d,P as p,F as c,a5 as u,T as f,ay as y,az as m,aD as P,aA as I,a3 as h,o as v,O as x,V as g,u as T,U as M,i as b}from"./vue.1672389691407.js";import{_ as L,E as k,e as C,c as D,h as _}from"./index.1672389691407.js";import{e as w}from"./events.1672389691407.js";import{a as N,h as j}from"./socialfundSet.1672389691407.js";import{P as H}from"./ProTable.1672389691407.js";import{i as S}from"./city.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";const O=a=>(y("data-v-f96c1476"),a=a(),m(),a),Y={"class":"cardinal-config-detail-container"},A={"class":"content"},U={"class":"basic-info section-container"},$=O((()=>r("div",{"class":"title"},[
r("span",null,"基础信息")],-1))),B=["innerHTML"],E={"class":"desc-content"},F={"class":"detail-tooltip-container"},W=["innerHTML"],q={key:1},J={"class":"section-container"},R=O((()=>r("div",{"class":"title"},[
r("span",null,"比例配置"),
r("span",{style:{color:"var(--hro-text-gray-color)"}},"（比例配置适用于最高、最低、自定义）")],-1))),z=["innerHTML"],V={"class":"desc-content"},G={"class":"detail-tooltip-container"},K=["innerHTML"],Q={key:1},X=["innerHTML"],Z={"class":"desc-content"},aa={"class":"detail-tooltip-container"},ea=["innerHTML"],na={key:1},ta={key:1,"class":"fund-list-container"},ia=O((()=>r("span",{"class":"desc-title"}," 单位公积金比例 ",-1))),sa={"class":"desc-content"},oa=O((()=>r("span",{"class":"desc-title"}," 个人公积金比例 ",-1))),la={"class":"desc-content"},ra={"class":"section-container"},da=O((()=>r("div",{"class":"title"},[
r("span",null,"补缴配置")],-1))),pa=["innerHTML"],ca={"class":"desc-content"},ua={"class":"detail-tooltip-container"},fa=["innerHTML"],ya={key:1},ma={key:0,"class":"section-container"},Pa=O((()=>r("div",{"class":"title"},[
r("span",null,"变更日志")],-1))),Ia=O((()=>r("div",null,"暂无数据",-1))),ha={"class":"diff-content",style:{"margin-left":"50px"}},va={style:{"font-weight":"bold"}},xa=["innerHTML"],ga={"class":"operation-container"},Ta=M("返 回"),Ma=a({name:"cardinalConfigDetail"});var ba=L(Object.assign(Ma,{setup(a){const{proxy:y}=b(),m=P(),L=I(),O=e(null),Ma=[],ba=(a,e)=>{var n,t;if(!a)return null;e||(e=_a.info);const i=_a.config[a],s=e[a];let o=null;if(i.options)return null!=(n=_a.DICTS[i.options][s])?n:C;if(i.dateFormat)return s?_(s).format(i.dateFormat):C;if(i.unit)return null==s||""===s?C:s+i.unit;switch(a){case"socialAddress":case"fundAddress":o=S({province:e.province,city:e.city,town:e.town});break;case"socialDepartName":case"fundDepartName":case"departId":case"departName":o=null!=(t=e.departName)?t:C;break;case"applyStartDate":o=(e.applyStartDate?_(e.applyStartDate).format("YYYY-MM-DD"):null)+"~"+(e.applyEndDate?_(e.applyEndDate).format("YYYY-MM-DD"):"永久");break;default:o=null!=s?s:C}return o},La=async a=>{try{const e=await j(Object.assign({},a,{type:_a.baseType,mainId:_a.id}));if(e&&200==e.code&&e.data)return{current:e.data.current,total:e.data.total,data:e.data.records}}catch(e){}return{current:1,total:0,data:[]}},ka=a=>{let e=null;const n="social-config-detail"===_a.name?"社保":"公积金";switch(a){case"province":e=n+"所在省";break;case"city":e=n+"所在市";break;case"town":e=n+"所在县";break;case"departName":case"departId":e=n+"户";break;default:e=_a.config[a]?_a.config[a].title:"未知"}return e},Ca=(a,e)=>{const n=ba(a,e);return n===C?"[空值]":n},Da=a=>{const e=a.differenceInfo,n=JSON.parse(a.newInfo),t=JSON.parse(a.oldInfo);return e.split(",").filter((a=>!Ma.includes(a))).map((a=>{let e="<div class='diff-item'>";const i=ka(a);let s="",o="";return s=Ca(a,t),""!=s&&null!=s&&null!=s||(s="[空值]"),o=Ca(a,n),""!=o&&null!=o&&null!=o||(o="[空值]"),e+=`<span>修改了</span><span style="font-weight:bold;">${i}</span>：<span style="color:var(\t--hro-color-text-disabeld);" class='old-value'>${s}</span>  ->  <span class='new-val'>${o}</span>`,e+="</div>",e})).join("")},_a=n({logSource:[],showLog:!1,DICTS:{illnesOptions:{0:"是",1:"否"},canOverpay:{0:"是",1:"否"},insurance:{insurancePension:"养老",insuranceMedical:"医疗",insuranceUnemployment:"失业",insuranceInjury:"工伤",insuranceBirth:"生育",insuranceBigailment:"大病"},overpayNumber:{1:"一个月",2:"二个月",3:"三个月",4:"四个月",5:"五个月",6:"六个月",7:"七个月",8:"八个月",9:"九个月",10:"十个月",11:"十一个月",12:"十二个月"},haveThisMonth:{0:"是",1:"否"},insuranceIsLatestCardinality:{0:"最新基数",1:"当期基数"},fundPayType:{0:"市直",1:"省直"},collectType:{0:"按年",1:"按月"},isChargePersonal:{0:"立即收费",1:"次年起收"},collectMoth:{1:"一月",2:"二月",3:"三月",4:"四月",5:"五月",6:"六月",7:"七月",8:"八月",9:"九月",10:"十月",11:"十一月",12:"十二月"},fundPayPoint:{1:"四舍五入取整",2:"元以下舍去",3:"见角进元",4:"保留两位小数",5:"保留一位小数"},valueType:{0:"按定值",1:"按比例"}},config:{applyStartDate:{dataIndex:"applyStartDate",title:"适用周期"},lowerLimit:{dataIndex:"lowerLimit",title:"基数下限"},upperLimit:{dataIndex:"upperLimit",title:"基数上限"},doMonth:{dataIndex:"doMonth",title:"执行月份",dateFormat:"YYYY年MM月"},unitMedicalPro:{dataIndex:"unitMedicalPro",title:"单位医疗比例",unit:"%"},unitPersionPro:{dataIndex:"unitPersionPro",title:"单位养老比例",unit:"%",push:18},unitUnemploymentPro:{dataIndex:"unitUnemploymentPro",title:"单位失业比例",unit:"%"},unitInjuryPro:{dataIndex:"unitInjuryPro",title:"单位工伤比例",unit:"%"},unitBirthPro:{dataIndex:"unitBirthPro",title:"单位生育比例",unit:"%"},unitProSum:{dataIndex:"unitProSum",title:"单位比例合计",unit:"%"},personalMedicalPro:{dataIndex:"personalMedicalPro",title:"个人医疗比例",unit:"%"},personalPersionPro:{dataIndex:"personalPersionPro",title:"个人养老比例",unit:"%"},personalUnemploymentPro:{dataIndex:"personalUnemploymentPro",title:"个人失业比例",unit:"%"},personalProSum:{dataIndex:"personalProSum",title:"个人比例合计",unit:"%"},canOverpay:{dataIndex:"canOverpay",title:"是否可补缴",options:"canOverpay"},insurance:{dataIndex:"insurance",title:"补缴险种",tooltip:!0},overpayNumber:{dataIndex:"overpayNumber",title:"最大补缴期限",options:"overpayNumber"},haveThisMonth:{dataIndex:"haveThisMonth",title:"是否含起缴当月",options:"haveThisMonth"},insuranceIsLatestCardinality:{dataIndex:"insuranceIsLatestCardinality",title:"补缴基数",options:"insuranceIsLatestCardinality"},payPolicy:{dataIndex:"payPolicy",title:"补缴政策",type:"textarea",span:12,tooltip:!0},fundPayType:{dataIndex:"fundPayType",title:"公积金类型",options:"fundPayType"},fundDepartName:{dataIndex:"fundDepartName",title:"公积金户",tooltip:!0},socialDepartName:{dataIndex:"socialDepartName",title:"社保户",tooltip:!0},socialAddress:{dataIndex:"socialAddress",title:"社保缴纳地"},fundAddress:{dataIndex:"fundAddress",title:"公积金缴纳地",tooltip:!0},fundPayPoint:{dataIndex:"fundPayPoint",title:"单边小数点",options:"fundPayPoint"},isIllness:{dataIndex:"isIllness",title:"大病是否收费",options:"illnesOptions"},collectType:{dataIndex:"collectType",title:"大病缴纳周期",options:"collectType"},isChargePersonal:{dataIndex:"isChargePersonal",title:"收费模式",options:"isChargePersonal"},collectMoth:{dataIndex:"collectMoth",title:"缴纳月份",options:"collectMoth"},payCompany:{dataIndex:"payCompany",title:"单位大病金额",unit:"元/年"},payPersonal:{dataIndex:"payPersonal",title:"个人大病金额",unit:"元/年"},valueType:{dataIndex:"valueType",title:"缴纳方式",options:"valueType"},payCompanyPro:{dataIndex:"payCompanyPro",title:"单位大病比例",type:"unit-input",unit:"%"},payPersonalPro:{dataIndex:"payPersonalPro",title:"个人大病比例",type:"unit-input",unit:"%"},empty:{type:"empty",span:12},empty18:{type:"empty",span:18}},socialConfig:{basic:["socialDepartName","socialAddress","applyStartDate","lowerLimit","upperLimit","doMonth"],ratio:["unitMedicalPro","unitPersionPro","unitUnemploymentPro","unitInjuryPro","unitBirthPro","unitProSum","empty","personalMedicalPro","personalPersionPro","personalUnemploymentPro","personalProSum"]},fundConfig:{basic:["fundDepartName","fundPayType","fundAddress","applyStartDate","lowerLimit","upperLimit","fundPayPoint","doMonth"]},id:null,baseType:null,info:{},logColumns:[{dataIndex:"createName",title:"操作人",minWidth:80},{dataIndex:"updateTime",title:"操作时间",minWidth:140},{dataIndex:"differenceInfo",title:"操作内容",minWidth:160,tooltip:!0,formatter:a=>{if(a.differenceInfo)return a.differenceInfo.split(",").filter((a=>!Ma.includes(a))).map((a=>ka(a))).join(",")}}]});t((()=>{}));const wa=i((()=>"social-config-detail"===_a.name?_a.socialConfig.basic.map((a=>_a.config[a])):"fund-config-detail"===_a.name?_a.fundConfig.basic.map((a=>_a.config[a])):[])),Na=i((()=>{const a=["canOverpay"];return"social-config-detail"===_a.name?0==_a.info.canOverpay&&a.push("insurance","overpayNumber","haveThisMonth","insuranceIsLatestCardinality","empty18","payPolicy"):"fund-config-detail"===_a.name&&0==_a.info.canOverpay&&a.push("overpayNumber","haveThisMonth","insuranceIsLatestCardinality","payPolicy"),a.map((a=>_a.config[a]))})),ja=i((()=>{const a=["isIllness"];if(0==_a.info.isIllness)if(a.push("collectType"),a.push("isChargePersonal"),0==_a.info.collectType){const e=["collectMoth","payCompany","payPersonal"];a.push(...e)}else if(1==_a.info.collectType){_a.config.payCompany.unit="元/月",_a.config.payPersonal.unit="元/月";const e=["valueType"];0==_a.info.valueType?(e.push("payCompany"),e.push("payPersonal")):1==_a.info.valueType&&(e.push("payCompanyPro"),e.push("payPersonalPro")),a.push(...e)}return a.map((a=>_a.config[a]))})),Ha=()=>{try{m.push({path:"/socialfund/settings/cardinalConfig",query:{}}),D(L,y),w(y,"/socialfund/settings/cardinalConfig")}catch(a){}};s((()=>{const a=L.name;_a.name=a,("social-config-detail"===a||"fund-config-detail"===a)&&L.params&&L.params.id?(_a.id=L.params.id,_a.baseType="social-config-detail"===a?1:2,Sa(L.params.id)):(k.warning("访问路由不合法"),Ha())}));const Sa=a=>{N(a).then((a=>{if(a&&200==a.code){_a.info=a.data;const e=[];"0"==a.data.insurancePension&&e.push("养老"),"0"==a.data.insuranceMedical&&e.push("医疗"),"0"==a.data.insuranceUnemployment&&e.push("失业"),"0"==a.data.insuranceInjury&&e.push("工伤"),"0"==a.data.insuranceBirth&&e.push("生育"),"0"==a.data.insuranceBigailment&&e.push("大病"),_a.info.insurance=e.length?e.join("，"):C,o((()=>{O.value&&_a.showLog&&O.value.refresh()}))}else k.error(a.msg||"获取基数配置详情失败"),Ha()}),(a=>{k.error(a&&a.msg||"获取基数配置详情失败")}))};return(a,e)=>{const n=h("el-tooltip"),t=h("el-col"),i=h("el-row"),s=h("el-divider"),o=h("el-button");return v(),l("div",Y,[r("div",A,[r("div",U,[$,d(i,{style:{"margin-top":"24px"}},{"default":p((()=>[(v(!0),l(c,null,u(T(wa),(a=>(v(),x(t,{key:`basicInfo_${a}`,"class":"basic-info-item",span:a.span||6},{"default":p((()=>[a.dataIndex?(v(),l(c,{key:0},[r("span",{"class":"desc-title",innerHTML:a.title},null,8,B),r("div",E,[a.tooltip?(v(),x(n,{key:0,placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:p((()=>[r("div",F,[r("span",{innerHTML:ba(a.dataIndex)},null,8,W)])])),"default":p((()=>[r("span",null,g(ba(a.dataIndex)),1)])),_:2},1024)):(v(),l("span",q,g(ba(a.dataIndex)),1))])],64)):f("",!0)])),_:2},1032,["span"])))),128))])),_:1})]),r("div",J,[R,"social-config-detail"===_a.name?(v(),l(c,{key:0},[d(i,{style:{"margin-top":"24px"}},{"default":p((()=>[(v(!0),l(c,null,u(_a.socialConfig.ratio,(a=>(v(),x(t,{key:`basicInfo_${a}`,"class":"basic-info-item",span:_a.config[a]&&_a.config[a].span||6},{"default":p((()=>[_a.config[a].dataIndex?(v(),l(c,{key:0},[r("span",{"class":"desc-title",innerHTML:_a.config[a].title},null,8,z),r("div",V,[_a.config[a].tooltip?(v(),x(n,{key:0,placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:p((()=>[r("div",G,[r("span",{innerHTML:ba(a)},null,8,K)])])),"default":p((()=>[r("span",null,g(ba(a)),1)])),_:2},1024)):(v(),l("span",Q,g(ba(a)),1))])],64)):f("",!0)])),_:2},1032,["span"])))),128))])),_:1}),d(s),d(i,null,{"default":p((()=>[(v(!0),l(c,null,u(T(ja),(a=>(v(),x(t,{key:`basicInfo_${a}`,"class":"basic-info-item",span:a.span||6},{"default":p((()=>[a.dataIndex?(v(),l(c,{key:0},[r("span",{"class":"desc-title",innerHTML:a.title},null,8,X),r("div",Z,[a.tooltip?(v(),x(n,{key:0,placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:p((()=>[r("div",aa,[r("span",{innerHTML:ba(a.dataIndex)},null,8,ea)])])),"default":p((()=>[r("span",null,g(ba(a.dataIndex)),1)])),_:2},1024)):(v(),l("span",na,g(ba(a.dataIndex)),1))])],64)):f("",!0)])),_:2},1032,["span"])))),128))])),_:1})],64)):"fund-config-detail"===_a.name?(v(),l("div",ta,[_a.info&&_a.info.fundProList?(v(!0),l(c,{key:0},u(_a.info.fundProList,((a,e)=>(v(),x(i,{key:`fundProList-${e}`,"class":"fund-pro-list-item"},{"default":p((()=>[d(t,{span:6,"class":"basic-info-item"},{"default":p((()=>[ia,r("div",sa,[r("span",null,g(a.companyPro+"%"),1)])])),_:2},1024),d(t,{span:6,"class":"basic-info-item"},{"default":p((()=>[oa,r("div",la,[r("span",null,g(a.personalPro+"%"),1)])])),_:2},1024)])),_:2},1024)))),128)):f("",!0)])):f("",!0)]),r("div",ra,[da,d(i,{style:{"margin-top":"24px"}},{"default":p((()=>[(v(!0),l(c,null,u(T(Na),(a=>(v(),x(t,{key:`basicInfo_${a}`,"class":"basic-info-item",span:a.span||6},{"default":p((()=>[a.dataIndex?(v(),l(c,{key:0},[r("span",{"class":"desc-title",innerHTML:a.title},null,8,pa),r("div",ca,[a.tooltip?(v(),x(n,{key:0,placement:"top-start",effect:"dark","popper-class":"detail-tooltip-popper"},{content:p((()=>[r("div",ua,[r("span",{innerHTML:ba(a.dataIndex)},null,8,fa)])])),"default":p((()=>[r("span",null,g(ba(a.dataIndex)),1)])),_:2},1024)):(v(),l("span",ya,g(ba(a.dataIndex)),1))])],64)):f("",!0)])),_:2},1032,["span"])))),128))])),_:1})]),_a.showLog?(v(),l("div",ma,[Pa,d(H,{ref_key:"proTableRef",ref:O,"row-key":"id",columns:_a.logColumns,request:La,showHeader:!1,customEmpty:"",tableExpand:"",manualRequest:""},{empty:p((()=>[Ia])),expand:p((a=>[r("div",ha,[r("div",null,[M(g(a.updateTime)+"由",1),r("span",va,g(a.createName),1)]),r("div",{innerHTML:Da(a)},null,8,xa)])])),_:1},8,["columns"])])):f("",!0)]),r("div",ga,[d(o,{onClick:Ha,style:{height:"100%"}},{"default":p((()=>[Ta])),_:1})])])}}}),[["__scopeId","data-v-f96c1476"]]);export{ba as default};