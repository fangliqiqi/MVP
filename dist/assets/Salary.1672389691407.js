import{P as a}from"./ProTable.1672389691407.js";import{P as e}from"./index.16723896914072.js";import{B as t}from"./index.16723896914077.js";import{E as r}from"./header.1672389691407.js";import{_ as o,g as n,f as d}from"./index.1672389691407.js";import{d as s,f as i,$ as l,A as m,h as c,a2 as p,j as h,E as u,c as y,W as f,P as x,u as b,aD as I,aA as v,a3 as _,o as j,a as k,U as S,ay as w,az as g,i as W}from"./vue.1672389691407.js";import{o as T,a as C}from"./events.1672389691407.js";import{payParams as N,batchRules as P,moneyParams as R,pay_header as Y,batchErrorData as E,batchUploadFileExt as B,importType as M,cardCheck as D,changeFile as U,changePayParams as A}from"./payimport.1672389691407.js";import{g as F}from"./paysearch.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./xlsx.1672389691407.js";import"./excel.1672389691407.js";import"./presendorder.1672389691407.js";import"./payimport.16723896914072.js";const z=a=>(w("data-v-01c3ceb1"),a=a(),g(),a),O={"class":"system-dict-container"},q={"class":"el-dropdown-link"},H=S(" 模板下载 "),K=z((()=>k("a",{href:"/template/payservice/薪资上传模板.xls",download:""},"薪资模板",-1))),$=z((()=>k("a",{href:"/template/payservice/劳务费上传模板.xls",download:""},"劳务费模板",-1))),G=z((()=>k("a",{href:"/template/payservice/稿酬上传模板.xls",download:""},"稿酬模板",-1))),J=s({name:"Salary"});var L=o(Object.assign(J,{props:{orderNo:String},emits:["onActionUpdate"],setup(o,{emit:s}){const S=o,w=i(null),g=i(null),z=I(),J=v(),{proxy:L}=W(),Q=l({batchExtParams:[...N],batchRules:{...P},moneyParams:[...R],searchConfig:{labelWidth:90,option:{extBtn:"extBtns"}},columns:[{dataIndex:"empName",title:"员工姓名",minWidth:160},{dataIndex:"empIdcard",title:"身份证号",width:170},{dataIndex:"empPhone",title:"手机号码",width:140,hideInSearch:!0},{dataIndex:"bankNo",title:"银行卡号",minWidth:200,hideInSearch:!0,tooltip:!0},{dataIndex:"bankName",title:"开户行总行",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"bankProvince",title:"开户行省",hideInSearch:!0,minWidth:120,valueType:"addRess",params:{pro:"bankProvince"}},{dataIndex:"bankCity",title:"开户行市",hideInSearch:!0,minWidth:120,valueType:"addRess",params:{city:"bankCity"}},{dataIndex:"bankSubName",title:"开户行支行",hideInSearch:!0,minWidth:200,tooltip:!0},{dataIndex:"salaryMonth",title:"薪酬月份",hideInTable:!0,valueType:"date",selectType:"month",format:"YYYYMM",valueFormat:"YYYYMM",minWidth:120},{dataIndex:"formType",title:"表单类型",hideInSearch:!0,minWidth:120},{dataIndex:"salaryMonth",title:"薪酬月份",hideInSearch:!0,minWidth:120},{dataIndex:"relaySalary",title:"应发薪酬",hideInSearch:!0,minWidth:120,formatter:a=>"3"==a.formType?a.relaySalaryUnit:a.relaySalary},{dataIndex:"salaryTax",title:"个税金额",hideInSearch:!0,minWidth:120,formatter:a=>Number(a.salaryTax)+Number(a.salaryTaxUnit)},{dataIndex:"option",title:"操作",key:"option",minWidth:100,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"导入表单",onClick:()=>{A(0),g.value&&g.value.openDialog()},permission:[],icon:"icon-ic_edit_add",disabled:()=>m("disable")}],cellBtns:[{text:"详情",prop:"detail",permission:[]}],params:{},dictKeys:["form_type","salary_status"]});c((()=>S.orderNo),(a=>{ta()}));const{columns:V,cellBtns:X,btn:Z,searchConfig:aa}=p(Q),ea=async a=>{try{a.orderId=S.orderNo;const e=await F(a);if(e&&200==e.code&&e.data)return{current:e.data.current,total:e.data.total,data:e.data.records.map(((e,t)=>({...e,index:(a.current-1)*a.size+t+1})))}}catch(e){}return{current:1,total:0,data:[]}},ta=()=>{w.value.refresh()},ra=()=>{s("onActionUpdate"),ta()},oa=async(a,e)=>{"detail"===a&&z.push({name:"oreder-manage-payservice-bill-detail",params:{id:e.salaryFormId}})};return h((()=>{(async()=>{try{const a=await n(Q.dictKeys);a&&Q.columns.map((e=>{switch(e.dataIndex){case"status":e.valueEnum=a.salary_status;break;case"formType":e.valueEnum=a.form_type}return e}))}catch(a){}})(),C(L,J.path,(()=>{ta()}))})),u((()=>{T(L)})),(o,n)=>{const s=_("el-icon"),i=_("el-button"),l=_("el-dropdown-item"),m=_("el-dropdown-menu"),c=_("el-dropdown");return j(),y("div",O,[f(a,{ref_key:"proTableRef",ref:w,"row-key":"id",columns:b(V),request:ea,btn:b(Z),searchConfig:b(aa),manualRequest:!0},{extBtns:x((()=>[f(c,{"class":"arch-btn","popper-class":"module-download"},{dropdown:x((()=>[f(m,null,{"default":x((()=>[f(l,null,{"default":x((()=>[K])),_:1}),f(l,null,{"default":x((()=>[$])),_:1}),f(l,null,{"default":x((()=>[G])),_:1})])),_:1})])),"default":x((()=>[k("span",q,[f(i,{size:"default"},{"default":x((()=>[H,f(s,{"class":"el-icon--right"},{"default":x((()=>[f(b(d))])),_:1})])),_:1})])])),_:1})])),option:x((a=>[f(e,{array:b(X),model:a,onOnClick:oa},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),f(t,{ref_key:"batchImportDialogRef",ref:g,width:"816px",header:b(Y),batchName:"pay-batch-import",errorHeader:b(r),errorData:b(E),upload:a=>b(B)(a,{orderId:S.orderNo}),"ext-params":Q.batchExtParams,rules:Q.batchRules,errName:"薪酬导入表单",type:b(M),cardCheck:b(D),customError:"",download:"",onChangeFile:b(U),onOk:ra},null,8,["header","errorHeader","errorData","upload","ext-params","rules","type","cardCheck","onChangeFile"])])}}}),[["__scopeId","data-v-01c3ceb1"]]);export{L as default};