import{_ as t,Q as e,R as a,a as i,T as n}from"./index.1672389691407.js";import{P as r}from"./ProTable.1672389691407.js";import{P as s}from"./index.16723896914072.js";import{i as o,f as d,$ as c,a2 as l,c as m,W as p,P as u,a3 as h,o as y}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const x={"class":"system-dict-container"};var f=t({name:"定时任务日志",components:{ProTable:r,ProButtons:s},setup(){var t;const r=null==(t=o())?void 0:t.appContext.config.globalProperties.$message,s=d(null),m=()=>{s.value&&s.value.refresh()},p=t=>"0"===t.systemFlag,u=c({columns:[{dataIndex:"index",title:"序号",hideInSearch:!0,minWidth:80},{dataIndex:"description",title:"字典名称",minWidth:160},{dataIndex:"type",title:"字典编码",minWidth:140},{dataIndex:"systemFlag",title:"字典类型",valueEnum:{0:"系统类",1:"业务类"},minWidth:110},{dataIndex:"remark",title:"备注信息",hideInSearch:!0,minWidth:180},{dataIndex:"createTime",title:"创建时间",hideInSearch:!0,minWidth:180},{dataIndex:"createBy",title:"创建人",hideInSearch:!0,minWidth:180},{dataIndex:"parentItemType",title:"上级字典",hideInSearch:!0,minWidth:180},{dataIndex:"option",title:"操作",key:"option",width:200,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],btn:[{label:"新增",onClick:()=>{},permission:["sys_dict_add"],icon:"icon-ic_edit_add"},{label:"清除缓存",onClick:async()=>{try{const t=await a();t&&200===t.code?(r.success("字典缓存清除成功"),m()):r.error(t.msg||"字典缓存清除失败")}catch(t){r.error("字典缓存清除失败")}},icon:"icon-ic_edit_refresh"}],cellBtns:[{text:"编辑",prop:"edit",permission:["sys_dict_edit"],tooltip:"当前字典不可编辑",isGray:p},{text:"删除",prop:"delete",permission:["sys_dict_del"],tooltip:"当前字典不可删除",isGray:p},{text:"字典项",prop:"dict",permission:["sys_dict_edit"],tooltip:"当前字典不可操作字典项",isGray:p}]});return{...l(u),request:async t=>{try{const a=await e(t);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records.map(((e,a)=>({...e,index:(t.current-1)*t.size+a+1})))}}catch(a){}return{current:1,total:0,data:[]}},onCellClick:async(t,e)=>{"delete"===t&&(t=>{i.confirm("是否确定删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{try{const e=await n(t.id);e&&200===e.code?(r.success("字典删除成功"),m()):r.error(e.msg||"字典删除失败")}catch(e){r.error("字典删除失败")}}))["catch"]((()=>{}))})(e)},proTableRef:s,refreshList:m}}},[["render",function(t,e,a,i,n,r){const s=h("pro-buttons"),o=h("pro-table");return y(),m("div",x,[p(o,{ref:"proTableRef","row-key":"id",columns:t.columns,request:i.request,btn:t.btn},{option:u((e=>[p(s,{array:t.cellBtns,model:e,onOnClick:i.onCellClick},null,8,["array","model","onOnClick"])])),_:1},8,["columns","request","btn"])])}],["__scopeId","data-v-842ae2e2"]]);export{f as default};