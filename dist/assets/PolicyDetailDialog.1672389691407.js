import{P as e}from"./ProTable.1672389691407.js";import{g as a}from"./policy.1672389691407.js";import{_ as l}from"./index.1672389691407.js";import{d as o,$ as n,c as i,W as t,P as s,a3 as r,ai as p,o as d,Q as c,U as u,V as m,O as f,a as y,T as g}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const b={"class":"policy-detail-dialog--body"},N={"class":"diff-content"},F=["innerHTML"],_=o({name:"PolicyDetailDialog"});var v=l(Object.assign(_,{setup(l,{expose:o}){const _=n({isShowDialog:!1,ruleForm:{},columns:[{dataIndex:"createName",title:"操作人",minWidth:100},{dataIndex:"updateTime",title:"操作时间",minWidth:100},{dataIndex:"differenceInfo",title:"操作内容",minWidth:250,valueType:"custom",scopedSlots:{customRender:"differenceInfo"}}]}),v=e=>{const a={enableFlag:"是否启用",insuranceCompanyName:"保险公司",insuranceTypeName:"险种",policyStart:"保单开始日期",policyEnd:"保单结束日期",insert:"批量导入"},l={0:"启用",1:"禁用"},o=e.differenceInfo,n=JSON.parse(e.newInfo),i=JSON.parse(e.oldInfo);return o.split(",").map((e=>{const o=a[e];if("insert"===e)return`<div class='diff-item'><span style="font-weight:bold;">${o}</span></div>`;let t=i[e],s=n[e];return"enableFlag"===e&&(t=l[t],s=l[s]),""!=t&&null!=t&&null!=t||(t="[空值]"),""!=s&&null!=s&&null!=s||(s="[空值]"),`<div class='diff-item'><span style="font-weight:bold;">"${o}"</span>：<span style="color:var(\t--hro-color-text-disabeld);" class='old-value'>旧值为：${t}</span>，<span class='new-val'>新值为：${s}</span></div>`})).join("")};return o({openDialog:e=>{_.isShowDialog=!0,_.loading=!0,_.ruleForm={policyNo:e.policyNo,enableFlag:{0:"启用",1:"禁用"}[e.enableFlag],insuranceCompanyName:e.insuranceCompanyName,insuranceTypeName:e.insuranceTypeName,policyStart:e.policyStart,policyEnd:e.policyEnd,operateList:null},a(e.id).then((({code:e,data:a})=>{var l;200===e&&(_.ruleForm={policyNo:a.policyNo,enableFlag:{0:"启用",1:"禁用"}[a.enableFlag],insuranceCompanyName:a.insuranceCompanyName,insuranceTypeName:a.insuranceTypeName,policyStart:a.policyStart,policyEnd:a.policyEnd,operateList:{records:a.operateList,total:(null==(l=a.operateList)?void 0:l.length)||0}})}))["finally"]((()=>{_.loading=!1}))}}),(a,l)=>{const o=r("el-form-item"),n=r("el-col"),h=r("el-row"),S=r("el-form"),w=r("el-dialog"),T=p("loading");return d(),i("div",null,[t(w,{title:"保单详情",modelValue:_.isShowDialog,"onUpdate:modelValue":l[0]||(l[0]=e=>_.isShowDialog=e),width:"800px","close-on-click-modal":!1,"custom-class":"policy-detail-dialog"},{"default":s((()=>[c((d(),i("div",b,[t(S,{size:"default","label-width":"120px",ref:"formRef"},{"default":s((()=>[t(h,{gutter:40},{"default":s((()=>[t(n,{span:12},{"default":s((()=>[t(o,{label:"保单号",prop:"empName"},{"default":s((()=>[u(m(_.ruleForm.policyNo),1)])),_:1})])),_:1}),t(n,{span:12},{"default":s((()=>[t(o,{label:"是否启用",prop:"enableFlag"},{"default":s((()=>[u(m(_.ruleForm.enableFlag),1)])),_:1})])),_:1}),t(n,{span:12},{"default":s((()=>[t(o,{label:"保险公司",prop:"insuranceCompanyName"},{"default":s((()=>[u(m(_.ruleForm.insuranceCompanyName),1)])),_:1})])),_:1}),t(n,{span:12},{"default":s((()=>[t(o,{label:"险种",prop:"insuranceTypeName"},{"default":s((()=>[u(m(_.ruleForm.insuranceTypeName),1)])),_:1})])),_:1}),t(n,{span:12},{"default":s((()=>[t(o,{label:"保单开始日期",prop:"policyStart"},{"default":s((()=>[u(m(_.ruleForm.policyStart),1)])),_:1})])),_:1}),t(n,{span:12},{"default":s((()=>[t(o,{label:"保单结束日期",prop:"policyEnd"},{"default":s((()=>[u(m(_.ruleForm.policyEnd),1)])),_:1})])),_:1})])),_:1})])),_:1},512),_.ruleForm.operateList?(d(),f(e,{key:0,"row-key":"id",columns:_.columns,dataSource:_.ruleForm.operateList,showHeader:!1,searchConfig:{pagination:!1},manualRequest:"","class":"policy-detail-table"},{differenceInfo:s((e=>[y("div",N,[y("div",{innerHTML:v(e)||"--"},null,8,F)])])),_:1},8,["columns","dataSource"])):g("",!0)])),[[T,_.loading]])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-cb364e7a"]]);export{v as default};