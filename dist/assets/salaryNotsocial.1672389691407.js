import{d as e,f as a,$ as t,j as n,c as i,W as o,P as s,aD as r,aA as l,ax as d,o as c}from"./vue.1672389691407.js";import{P as m}from"./ProTable.1672389691407.js";import{P as h}from"./index.16723896914072.js";import{a as u,_ as p,b as f}from"./feedback.1672389691407.js";import{E as I}from"./index.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const g={"class":"cardinal-config-container"},x=e({name:"有工资无社保"}),y=Object.assign(x,{setup(e){const x=a(null),y=a(null);r(),l();const b=d(),k=()=>{x.value&&x.value.onSearch()},C=a(!1),j=t({searchConfig:{labelWidth:120},columns:[{dataIndex:"customerName",title:"客户名称",minWidth:200,tooltip:!0,hideInSearch:!0},{dataIndex:"settlementOrganName",title:"项目名称",minWidth:180,hideInSearch:!0,tooltip:!0},{dataIndex:"employeeName",title:"员工姓名",minWidth:140},{dataIndex:"employeeIdCard",title:"身份证号",minWidth:200,tooltip:!0},{dataIndex:"month",title:"工资月份",valueType:"date",selectType:"month",format:"YYYYMM",valueFormat:"YYYYMM",minWidth:160},{dataIndex:"customerName",title:"客户名称",minWidth:220,hideInTable:!0},{dataIndex:"relaySalary",title:"应发工资",hideInSearch:!0,minWidth:160},{dataIndex:"createName",title:"创建人",minWidth:160},{dataIndex:"feedBack",title:"反馈原因",hideInSearch:!0,tooltip:!0,minWidth:200},{dataIndex:"option",title:"操作",key:"option",width:120,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],params:{},btn:[{label:"批量导出",onClick:()=>{if(C.value=!0,j.selectionChangeList.length>0){const e=[];j.selectionChangeList.map((a=>{e.push(a.id)})),j.params={ids:e.join(",")}}else j.params=x.value.getParams(),delete j.params.size,delete j.params.current;f(j.params).then((e=>{200==e.code?I.success("导出成功"):I.error(e.msg||"导出失败")}))["catch"]((e=>{I.error(e.msg||"导出失败")}))["finally"]((()=>{C.value=!1}))},loading:C,permission:[],icon:"icon-ic_edit_export"}],cellBtns:[{text:"反馈",prop:"feedback",permission:[],isGray:e=>e.feedBack||e.createBy!=j.userInfos.id}],selectionChangeList:[],userInfos:{}}),v=e=>{j.selectionChangeList=e},W=async(e,a)=>{if("feedback"===e)y.value&&y.value.openDialog(a,"notSocial")};n((()=>{j.userInfos=b.state.userInfos.userInfos}));const S=async e=>{try{const a=await u(e);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records}}catch(a){}return{current:1,total:0,data:[]}};return(e,a)=>(c(),i("div",g,[o(m,{ref_key:"proTableRef",ref:x,"row-key":"id",columns:j.columns,request:S,btn:j.btn,searchConfig:j.searchConfig,onSelectionChange:v,multi:""},{option:s((e=>[o(h,{array:j.cellBtns,model:e,onOnClick:W},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),o(p,{ref_key:"feedbackVueRef",ref:y,onOk:k},null,512)]))}});export{y as default};