import{g as e}from"./staff.1672389691407.js";import{l,m as a,n as t}from"./attach.1672389691407.js";import{g as o}from"./file.1672389691407.js";import{P as r}from"./index.16723896914073.js";import d from"./attachUpload.1672389691407.js";import{_ as i,E as m}from"./index.1672389691407.js";import{d as u,f as s,$ as n,c,W as p,P as f,a3 as g,o as h,a as y,F as b,a5 as _,O as V,U as F}from"./vue.1672389691407.js";const D={"class":"system-add-dic-container"},x=F("是"),v=F("否"),N={"class":"dialog-footer"},I=F("取 消"),S=F("确 定"),w=u({name:"systemAddDic"});var L=i(Object.assign(w,{emits:["ok"],setup(i,{expose:u,emit:F}){const w=s(null),L=s(null),k=s(null),U=n({isShowDialog:!1,loading:!1,id:null,title:"新增学历信息",ruleForm:{empId:"",empCode:"",empName:"",empIdcard:"",school:"",collageSystem:"",major:"",educationName:"",type:"",highIdentification:"0",entryDate:"",gradutionDate:"",educationSystem:"",certificationName:"",attaIds:"",remark:""},fileList:[],options:[],educationList:[],educationTypeList:[],educationSystemList:[]}),j={empName:[{required:!0,message:"请选择员工",trigger:"change"}],school:[{required:!0,message:"请输入学校",trigger:"blur"},{max:50,message:"学校长度不能超过50个字符",trigger:"blur"}],major:[{required:!0,message:"请输入专业",trigger:"blur"},{max:50,message:"专业长度不能超过50个字符",trigger:"blur"}],educationName:[{required:!0,message:"请选择学历",trigger:"change"}],highIdentification:[{required:!0,message:"请选择是否最高学历",trigger:"blur"}],entryDate:[{required:!0,message:"请选择入学日期",trigger:"blur"}],gradutionDate:[{required:!0,message:"请选择毕业日期",trigger:"blur"}]},C=e=>{U.fileList=e.value},q=e=>{U.fileList=e.value},Y=async l=>{try{l.fileStatus=0;const a=await e(l);if(a&&200==a.code&&a.data)return{current:a.data.current,total:a.data.total,data:a.data.records};m.error(a.msg)}catch(a){}return{current:1,total:0,data:[]}},R=e=>{U.ruleForm.empCode=e.empCode,U.ruleForm.empIdcard=e.empIdcard,U.ruleForm.empId=e.id,U.options=[e]},T=e=>e.getTime()>Date.now(),z=e=>!U.ruleForm.entryDate||e.getTime()<Date.parse(U.ruleForm.entryDate),M=async e=>{try{const a=await l(e);if(a&&200===a.code){const e={...a.data};U.options=[{empIdcard:e.empIdcard,empName:e.empName}],U.ruleForm=e,U.isShowDialog=!0}else m.error(a.msg||"获取工作记录详情失败");const t=await o(e);t&&200===t.code?U.fileList=t.data.map((e=>(e.name=e.attaName,e.uid=e.id,e.url=e.attaUrl,e))):(U.fileList=[],m.error(t.msg||"获取附件失败"))}catch(a){P()}},P=()=>{w.value.resetFields(),U.ruleForm={empId:"",empCode:"",empName:"",empIdcard:"",school:"",collageSystem:"",major:"",educationName:"",type:"",highIdentification:"0",entryDate:"",gradutionDate:"",educationSystem:"",certificationName:"",attaIds:"",remark:""},U.isShowDialog=!1,U.loading=!1},E=()=>{P()},O=()=>{w.value.validate((e=>{if(e){U.loading=!0;const e=[];U.fileList.forEach((l=>{e.push(l.uid)})),U.ruleForm.attaIds=e.join(","),null!==U.id&&void 0!==U.id?a(U.ruleForm).then((e=>{e&&200==e.code?(m.success("编辑学历信息成功"),F("ok"),P()):m.error(e.msg||"编辑学历信息失败")}),(()=>{m.error("编辑学历信息失败")}))["finally"]((()=>{U.loading=!1})):t(U.ruleForm).then((e=>{e&&200==e.code?(m.success("新增学历信息成功"),F("ok"),P()):m.error(e.msg||"新增学历信息失败")}),(()=>{m.error("新增工作记录失败")}))["finally"]((()=>{U.loading=!1}))}}))};return u({openDialog:async(e,l)=>{U.educationList=l.educationList,U.educationTypeList=l.educationTypeList,U.educationSystemList=l.educationSystemList,e&&e.id?(U.title="编辑学历信息",U.id=e.id,await M(e.id)):(U.title="新增学历信息",U.id=null,U.ruleForm={empId:"",empCode:"",empName:"",empIdcard:"",school:"",collageSystem:"",major:"",educationName:"",type:"",highIdentification:"0",entryDate:"",gradutionDate:"",educationSystem:"",certificationName:"",attaIds:"",remark:""},U.fileList=[],U.isShowDialog=!0)}}),(e,l)=>{const a=g("el-form-item"),t=g("el-col"),o=g("el-input"),i=g("el-option"),m=g("el-select"),u=g("el-radio"),s=g("el-radio-group"),n=g("el-date-picker"),F=g("el-row"),M=g("el-form"),A=g("el-button"),W=g("el-dialog");return h(),c("div",D,[p(W,{title:U.title,modelValue:U.isShowDialog,"onUpdate:modelValue":l[13]||(l[13]=e=>U.isShowDialog=e),"close-on-click-modal":!1,width:"816px",onClose:P},{footer:f((()=>[y("span",N,[p(A,{onClick:E,size:"default"},{"default":f((()=>[I])),_:1}),p(A,{type:"primary",onClick:O,loading:U.loading,size:"default"},{"default":f((()=>[S])),_:1},8,["loading"])])])),"default":f((()=>[p(M,{ref_key:"formRef",ref:w,model:U.ruleForm,rules:j,size:"default","label-width":"110px"},{"default":f((()=>[p(F,null,{"default":f((()=>[p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"员工姓名",prop:"empName"},{"default":f((()=>[p(r,{disabled:!!U.id,ref_key:"pageSelectRef",ref:L,modelValue:U.ruleForm.empName,"onUpdate:modelValue":l[0]||(l[0]=e=>U.ruleForm.empName=e),request:Y,"value-key":"empName",title:"empName",search:"empName",placeholder:"请选择员工",options:U.options,onChange:R},null,8,["disabled","modelValue","options"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"身份证号"},{"default":f((()=>[p(o,{disabled:"",modelValue:U.ruleForm.empIdcard,"onUpdate:modelValue":l[1]||(l[1]=e=>U.ruleForm.empIdcard=e),placeholder:"身份证号"},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"学校",prop:"school"},{"default":f((()=>[p(o,{modelValue:U.ruleForm.school,"onUpdate:modelValue":l[2]||(l[2]=e=>U.ruleForm.school=e),placeholder:"请输入学校",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"院系名称",prop:"collageSystem"},{"default":f((()=>[p(o,{modelValue:U.ruleForm.collageSystem,"onUpdate:modelValue":l[3]||(l[3]=e=>U.ruleForm.collageSystem=e),placeholder:"请输入院系名称",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"专业",prop:"major"},{"default":f((()=>[p(o,{modelValue:U.ruleForm.major,"onUpdate:modelValue":l[4]||(l[4]=e=>U.ruleForm.major=e),placeholder:"请输入专业",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"学历",prop:"educationName"},{"default":f((()=>[p(m,{modelValue:U.ruleForm.educationName,"onUpdate:modelValue":l[5]||(l[5]=e=>U.ruleForm.educationName=e),placeholder:"请选择学历",clearable:"",filterable:"",style:{width:"100%"}},{"default":f((()=>[(h(!0),c(b,null,_(U.educationList,(e=>(h(),V(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"学历类型",prop:"type"},{"default":f((()=>[p(m,{modelValue:U.ruleForm.type,"onUpdate:modelValue":l[6]||(l[6]=e=>U.ruleForm.type=e),placeholder:"请选择学历类型",clearable:"",filterable:"",style:{width:"100%"}},{"default":f((()=>[(h(!0),c(b,null,_(U.educationTypeList,(e=>(h(),V(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"最高学历",prop:"highIdentification"},{"default":f((()=>[p(s,{modelValue:U.ruleForm.highIdentification,"onUpdate:modelValue":l[7]||(l[7]=e=>U.ruleForm.highIdentification=e)},{"default":f((()=>[p(u,{label:"0"},{"default":f((()=>[x])),_:1}),p(u,{label:"1"},{"default":f((()=>[v])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"入学时间",prop:"entryDate"},{"default":f((()=>[p(n,{modelValue:U.ruleForm.entryDate,"onUpdate:modelValue":l[8]||(l[8]=e=>U.ruleForm.entryDate=e),type:"date",placeholder:"请选择入学日期",style:{width:"100%"},"value-format":"YYYY-MM-DD 00:00:00","disabled-date":T},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"毕业时间",prop:"gradutionDate"},{"default":f((()=>[p(n,{modelValue:U.ruleForm.gradutionDate,"onUpdate:modelValue":l[9]||(l[9]=e=>U.ruleForm.gradutionDate=e),type:"date",placeholder:"请选择毕业日期",style:{width:"100%"},"value-format":"YYYY-MM-DD 00:00:00","disabled-date":z},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"学制类型",prop:"educationSystem"},{"default":f((()=>[p(m,{modelValue:U.ruleForm.educationSystem,"onUpdate:modelValue":l[10]||(l[10]=e=>U.ruleForm.educationSystem=e),placeholder:"请选择学制类型",clearable:"",filterable:"",style:{width:"100%"}},{"default":f((()=>[(h(!0),c(b,null,_(U.educationSystemList,(e=>(h(),V(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),p(t,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"证书名称",prop:"certificationName"},{"default":f((()=>[p(o,{modelValue:U.ruleForm.certificationName,"onUpdate:modelValue":l[11]||(l[11]=e=>U.ruleForm.certificationName=e),placeholder:"请输入证书名称",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(t,{md:24,lg:24,xl:24},{"default":f((()=>[p(a,{label:"备注",prop:"remark"},{"default":f((()=>[p(o,{type:"textarea",modelValue:U.ruleForm.remark,"onUpdate:modelValue":l[12]||(l[12]=e=>U.ruleForm.remark=e),autosize:{minRows:2,maxRows:4},placeholder:"请输入备注","show-word-limit":"",maxlength:"200",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(F,{md:12,lg:12,xl:12},{"default":f((()=>[p(a,{label:"附件"},{"default":f((()=>[p(d,{ref_key:"attachUploadRef",ref:k,"file-list":U.fileList,onRemovefile:q,onChangefile:C,type:0,filePath:"degreefileList",domain:U.id},null,8,["file-list","domain"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-1b6963b2"]]);export{L as default};