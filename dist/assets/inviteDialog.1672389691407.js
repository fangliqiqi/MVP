import{P as e}from"./ProTable.1672389691407.js";import{q as a,v as o,w as t,x as i}from"./eleContract.16723896914072.js";import{_ as d,E as l}from"./index.1672389691407.js";import{d as n,k as s,f as r,$ as c,c as u,W as m,P as p,u as f,n as g,a3 as h,o as k,a as y,ay as v,az as w,U as S,V as x}from"./vue.1672389691407.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";const j={"class":"invite-container"},_=(e=>(v("data-v-4650b66a"),e=e(),w(),e))((()=>y("div",null,"暂无数据",-1))),I=S(x("")),b={"class":"dialog-footer"},C=S("取 消"),D=S("确 定"),V=n({name:"accountCerDialog"});var z=d(Object.assign(V,{props:{title:String,type:String},emits:["ok"],setup(d,{expose:n,emit:v}){const w=d,S=s((()=>w.title||"邀请加入")),x=r(null),V=c({isShowDialog:!1,loading:!1,info:null,checked:{},dataSource:[],columns:[{dataIndex:"option",title:"",scopedSlots:{customRender:"option"},width:40},{dataIndex:"companyName",title:"企业名称",minWidth:180},{dataIndex:"managerName",title:"管理员",minWidth:100}]}),z=async e=>{try{if("invite"===w.type){const o=await a(e);if(o&&200==o.code&&o.data)return{current:o.data.current,total:o.data.total,data:o.data.records}}else if("remove"===w.type){const e=await o({id:V.info.id});if(e&&200==e.code&&e.data)return V.dataSource=e.data,{current:1,total:e.data.length,data:e.data}}}catch(t){}return{current:1,total:0,data:[]}},U=()=>{V.isShowDialog=!1,V.loading=!1},q=()=>{if(V.checked&&V.checked.id){if("invite"===w.type){const e=[{id:V.info.id,companyInfoId:V.checked.id}];V.loading=!0,t(e).then((e=>{e&&200===e.code?(l.success("邀请成员加入企业成功!"),U(),v("ok"),window.open(e.data)):l.error(e.msg||"邀请失败")}),(e=>{l.error(e&&e.msg||"邀请失败")}))["finally"]((()=>{V.loading=!1}))}else if("remove"===w.type){const e={id:V.info.id,companyUnionIds:V.checked.id,unionIds:V.dataSource.filter((e=>e.id!==V.checked.id)).map((e=>e.id)).join(",")};V.loading=!0,i(e).then((e=>{e&&200===e.code?(l.success("移出成功!"),U(),v("ok")):l.error(e.msg||"移出失败")}),(e=>{l.error(e&&e.msg||"移出失败")}))["finally"]((()=>{V.loading=!1}))}}else l.error("请先选择企业")};return n({openDialog:async e=>{V.info=e,V.isShowDialog=!0,V.checked={},V.dataSource=[],g((()=>{x.value&&x.value.refresh()}))}}),(a,o)=>{const t=h("el-radio"),i=h("el-button"),d=h("el-dialog");return k(),u("div",j,[m(d,{title:f(S),modelValue:V.isShowDialog,"onUpdate:modelValue":o[1]||(o[1]=e=>V.isShowDialog=e),width:"816px","close-on-click-modal":!1,onClose:U},{footer:p((()=>[y("span",b,[m(i,{onClick:U,size:"default"},{"default":p((()=>[C])),_:1}),m(i,{type:"primary",onClick:q,loading:V.loading,size:"default"},{"default":p((()=>[D])),_:1},8,["loading"])])])),"default":p((()=>[m(e,{ref_key:"proRef",ref:x,"row-key":"id",columns:V.columns,request:z,showHeader:!1,customEmpty:"",manualRequest:""},{empty:p((()=>[_])),option:p((e=>[m(t,{modelValue:V.checked.id,"onUpdate:modelValue":o[0]||(o[0]=e=>V.checked.id=e),label:e.id,onClick:a=>(e=>{V.checked=e})(e),size:"small"},{"default":p((()=>[I])),_:2},1032,["modelValue","label","onClick"])])),_:1},8,["columns"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-4650b66a"]]);export{z as default};