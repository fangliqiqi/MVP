import{d as e,f as t,$ as a,j as s,c as r,W as n,P as o,ax as i,o as c}from"./vue.1672389691407.js";import{P as l}from"./ProTable.1672389691407.js";import{P as d}from"./index.16723896914072.js";import{g as m,E as p,a as u}from"./index.1672389691407.js";import h from"./addContractPermission.1672389691407.js";import{g as y,e as f,u as g,d as x}from"./contractPermission.16723896914072.js";import"./index.16723896914073.js";import"./index.16723896914074.js";import"./city.1672389691407.js";import"./index.167238969140713.js";const C={"class":"cardinal-config-container"},b=e({name:"合同审核权限"}),j=Object.assign(b,{setup(e){const b=t(null),j=t(null),w=i(),_=()=>{b.value&&b.value.refresh()},v=t(!1),k=a({searchConfig:{labelWidth:120},columns:[{dataIndex:"userName",title:"审核人",minWidth:160},{dataIndex:"organName",title:"审核人所在部门",minWidth:180},{dataIndex:"fileAddress",title:"档案所在地",minWidth:220,valueType:"addRess",params:{pro:"fileProvince",city:"fileCity",town:"fileTown"}},{dataIndex:"status",title:"授权状态",minWidth:160},{dataIndex:"option",title:"操作",key:"option",width:200,hideInSearch:!0,fixed:"right",scopedSlots:{customRender:"option"}}],params:{},btn:[{label:"新增",onClick:()=>{j.value&&j.value.openDialog()},loading:v,permission:["temployeecontractareares_add"],icon:"icon-ic_edit_add"},{label:"批量导出",onClick:()=>{if(v.value=!0,k.selectionChangeList.length>0){const e=[];k.selectionChangeList.map((t=>{e.push(t.id)})),k.params={ids:e.join(",")}}else k.params=b.value.getParams(),delete k.params.size,delete k.params.current;f(k.params).then((e=>{200==e.code?p.success("导出成功"):p.error(e.msg||"导出失败")}))["catch"]((e=>{p.error(e.msg||"导出失败")}))["finally"]((()=>{v.value=!1}))},loading:v,permission:["temployeecontractareares-export"],type:"normal",icon:"icon-ic_edit_export"}],cellBtns:[{text:"删除",prop:"delete",permission:["temployeecontractareares_del"]},{text:"启用",prop:"enable",permission:["temployeecontractareares_edit"],isGray:e=>"0"==e.status},{text:"禁用",prop:"stop",permission:["temployeecontractareares_edit"],isGray:e=>"1"==e.status}],selectionChangeList:[],dictKeys:["permission_status"]}),I=e=>{k.selectionChangeList=e},P=async(e,t)=>{switch(e){case"delete":u.confirm("是否确定删除？","提示",{type:"warning"}).then((async()=>{try{const e=await x(t.id);e&&200===e.code?(p.success("删除成功"),_()):p.error(e.msg||"删除失败")}catch(e){p.error(e.sag||"删除失败")}}))["catch"]((()=>{}));break;case"enable":u.confirm("是否确定启用？","提示",{type:"warning"}).then((async()=>{try{const e=await g({id:t.id,status:0});e&&200===e.code?(p.success("启用成功"),_()):p.error(e.msg||"启用失败")}catch(e){p.error(e.sag||"启用失败")}}))["catch"]((()=>{}));break;case"stop":u.confirm("是否确定禁用？","提示",{type:"warning"}).then((async()=>{try{const e=await g({id:t.id,status:1});e&&200===e.code?(p.success("禁用成功"),_()):p.error(e.msg||"禁用失败")}catch(e){p.error(e.sag||"禁用失败")}}))["catch"]((()=>{}))}};s((()=>{k.userInfos=w.state.userInfos.userInfos}));const W=async e=>{try{const t=await y(e);if(t&&200==t.code&&t.data)return{current:t.data.current,total:t.data.total,data:t.data.records}}catch(t){}return{current:1,total:0,data:[]}};return s((()=>{(async()=>{try{const e=await m(k.dictKeys);e&&k.columns.map((t=>("status"===t.dataIndex&&(t.valueEnum=e.permission_status),t)))}catch(e){}})()})),(e,t)=>(c(),r("div",C,[n(l,{ref_key:"proTableRef",ref:b,"row-key":"id",columns:k.columns,request:W,btn:k.btn,searchConfig:k.searchConfig,onSelectionChange:I,multi:""},{option:o((e=>[n(d,{array:k.cellBtns,model:e,onOnClick:P},null,8,["array","model"])])),_:1},8,["columns","btn","searchConfig"]),n(h,{ref_key:"addContractPermissionRef",ref:j,onOk:_},null,512)]))}});export{j as default};