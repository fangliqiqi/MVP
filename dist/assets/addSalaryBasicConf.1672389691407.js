import{i as e,j as l,k as a}from"./settings.1672389691407.js";import{P as t}from"./index.16723896914073.js";import{g as o}from"./fee.1672389691407.js";import{_ as r,E as d}from"./index.1672389691407.js";import{d as s,f as u,$ as i,c as n,W as m,P as p,a3 as c,o as f,a as h,F as y,a5 as v,O as g,U as _}from"./vue.1672389691407.js";const b={"class":"archives-add-electronic-container"},V={"class":"dialog-footer"},F=_("取 消"),M=_("确 定"),w=s({name:"addSalaryBasicConf"});var x=r(Object.assign(w,{emits:["ok"],setup(r,{expose:s,emit:_}){const w=u(null);u(null);const x=i({isShowDialog:!1,id:null,title:"新增配置",ruleForm:{},options:[],loading:!1,DICTS:{salaryMoth:[{text:"前6月",val:-6},{text:"前5月",val:-5},{text:"前4月",val:-4},{text:"前3月",val:-3},{text:"前2月",val:-2},{text:"上月",val:-1},{text:"本月",val:0},{text:"下月",val:1}]}}),k={departId:[{required:!0,message:"请选择项目名称"}],name:[{required:!0,message:"请输入配置方案名称"}],salaryMonth:[{required:!0,message:"请选择薪酬月份"}],socialMonth:[{required:!0,message:"请选择社保月份"}],fundMonth:[{required:!0,message:"请选择社保月份"}],socialPriority:[{required:!0,message:"请选择社保月份"}],fundPriority:[{required:!0,message:"请选择社保月份"}],grantType:[{required:!0,message:"请选择发放方式"}]},P=e=>{x.ruleForm.departId=e.id,x.ruleForm.departName=e.departName,x.ruleForm.departNo=e.departNo},D=async e=>{try{const l=await o(Object.assign({},e,{flag:"1"}));if(l&&200==l.code&&l.data)return{current:l.data.current,total:l.data.total,data:l.data.records};d.error(l.msg)}catch(l){}return{current:1,total:0,data:[]}},I=async l=>{try{const a=await e(l);a&&200===a.code&&a.data?(x.options=[{id:a.data.departId,departName:a.data.departName}],x.ruleForm={...a.data}):(d.error(a.msg||"获取详情失败"),S())}catch(a){S(),d.error("获取详情失败")}},S=()=>{x.ruleForm={},x.isShowDialog=!1,w.value&&w.value.clearValidate()},T=()=>{S()},U=()=>{w.value&&w.value.validate((e=>{e&&(x.loading=!0,null!==x.id&&void 0!==x.id?l(x.ruleForm).then((e=>{e&&200==e.code?(d.success("编辑成功"),_("ok"),S()):d.error(e.msg||"编辑失败")}),(()=>{d.error("编辑电失败")}))["finally"]((e=>{x.loading=!1})):a(x.ruleForm).then((e=>{e&&200==e.code?(d.success("新增成功"),_("ok"),S()):d.error(e.msg||"新增失败")}),(()=>{d.error("新增失败")}))["finally"]((e=>{x.loading=!1})))}))};return s({openDialog:async e=>{e&&e.id?(x.title="编辑配置",x.id=e.id,await I(e.id)):(x.title="新增配置",x.id=null,x.ruleForm={id:null,salaryMonth:-1,socialMonth:0,fundMonth:0,socialPriority:0,fundPriority:0,grantType:1},setTimeout((()=>{w.value&&w.value.clearValidate()}),100)),x.isShowDialog=!0}}),(e,l)=>{const a=c("el-form-item"),o=c("el-col"),r=c("el-input"),d=c("el-option"),s=c("el-select"),u=c("el-row"),i=c("el-form"),_=c("el-button"),I=c("el-dialog");return f(),n("div",b,[m(I,{title:x.title,modelValue:x.isShowDialog,"onUpdate:modelValue":l[8]||(l[8]=e=>x.isShowDialog=e),"close-on-click-modal":!1,width:"816px",onClose:S},{footer:p((()=>[h("span",V,[m(_,{onClick:T,size:"default"},{"default":p((()=>[F])),_:1}),m(_,{type:"primary",onClick:U,size:"default",loading:x.loading},{"default":p((()=>[M])),_:1},8,["loading"])])])),"default":p((()=>[m(i,{ref_key:"formRef",ref:w,model:x.ruleForm,rules:k,size:"default","label-width":"140px"},{"default":p((()=>[m(u,null,{"default":p((()=>[m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"项目名称",prop:"departId"},{"default":p((()=>[m(t,{ref:"settleDomainRef",modelValue:x.ruleForm.departId,"onUpdate:modelValue":l[0]||(l[0]=e=>x.ruleForm.departId=e),request:D,"value-key":"id",title:"departName",search:"departName",placeholder:"请选择项目名称",onChange:P,options:x.options},null,8,["modelValue","options"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"配置方案名称",prop:"name"},{"default":p((()=>[m(r,{modelValue:x.ruleForm.name,"onUpdate:modelValue":l[1]||(l[1]=e=>x.ruleForm.name=e),placeholder:"请输入配置方案名称",style:{width:"100%"},maxlength:"50"},null,8,["modelValue"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"薪酬月份",prop:"salaryMonth"},{"default":p((()=>[m(s,{modelValue:x.ruleForm.salaryMonth,"onUpdate:modelValue":l[2]||(l[2]=e=>x.ruleForm.salaryMonth=e),placeholder:"请选择",style:{width:"100%"}},{"default":p((()=>[(f(!0),n(y,null,v(x.DICTS.salaryMoth,(e=>(f(),g(d,{key:`salary_${e.val}`,value:e.val,label:e.text},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"社保月份",prop:"socialMonth"},{"default":p((()=>[m(s,{modelValue:x.ruleForm.socialMonth,"onUpdate:modelValue":l[3]||(l[3]=e=>x.ruleForm.socialMonth=e),placeholder:"请选择",style:{width:"100%"}},{"default":p((()=>[(f(!0),n(y,null,v(x.DICTS.salaryMoth,(e=>(f(),g(d,{key:`salary_${e.val}`,value:e.val,label:e.text},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"公积金月份",prop:"fundMonth"},{"default":p((()=>[m(s,{modelValue:x.ruleForm.fundMonth,"onUpdate:modelValue":l[4]||(l[4]=e=>x.ruleForm.fundMonth=e),placeholder:"请选择",style:{width:"100%"}},{"default":p((()=>[(f(!0),n(y,null,v(x.DICTS.salaryMoth,(e=>(f(),g(d,{key:`salary_${e.val}`,value:e.val,label:e.text},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"社保优先级",prop:"socialPriority"},{"default":p((()=>[m(s,{modelValue:x.ruleForm.socialPriority,"onUpdate:modelValue":l[5]||(l[5]=e=>x.ruleForm.socialPriority=e),placeholder:"请选择",style:{width:"100%"}},{"default":p((()=>[m(d,{value:0,label:"生成"}),m(d,{value:1,label:"缴纳"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"公积金优先级",prop:"fundPriority"},{"default":p((()=>[m(s,{modelValue:x.ruleForm.fundPriority,"onUpdate:modelValue":l[6]||(l[6]=e=>x.ruleForm.fundPriority=e),placeholder:"请选择",style:{width:"100%"}},{"default":p((()=>[m(d,{value:0,label:"生成"}),m(d,{value:1,label:"缴纳"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),m(o,{"class":"mb20",span:12},{"default":p((()=>[m(a,{label:"发放方式",prop:"grantType"},{"default":p((()=>[m(s,{modelValue:x.ruleForm.grantType,"onUpdate:modelValue":l[7]||(l[7]=e=>x.ruleForm.grantType=e),placeholder:"请选择",style:{width:"100%"}},{"default":p((()=>[m(d,{value:0,label:"现金"}),m(d,{value:1,label:"转账"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-4cdce05c"]]);export{x as default};