import{p as e}from"./eleContract.16723896914072.js";import{d as l,f as a,$ as o,c as r,W as d,P as i,aD as u,a3 as m,o as s,a as t,U as n}from"./vue.1672389691407.js";import{E as c}from"./index.1672389691407.js";const g={"class":"account-cer-container"},p={"class":"dialog-footer"},f=n("取 消"),b=n("确 定"),h=l({name:"accountCerDialog"}),C=Object.assign(h,{emits:["ok"],setup(l,{expose:n,emit:h}){u();const C=a(null),F=o({isShowDialog:!1,loading:!1,ruleForm:{name:"",moblie:"",idCard:""}}),V=()=>{F.ruleForm.idCard=F.ruleForm.idCard.replace(/[^a-zA-Z0-9]/g,"")},_=o({name:[{required:!0,message:"请输入客服姓名",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}],moblie:[{required:!0,trigger:"blur",validator:(e,l,a)=>{l?l&&11===l.trim().length?a():a(new Error("请输入正确的手机号码格式")):a(new Error("请输入手机号码"))}}]}),w=()=>{C.value&&C.value.clearValidate(),F.isShowDialog=!1,F.loading=!1},v=()=>{C.value&&C.value.validate((l=>{l&&(F.loading=!0,e(Object.assign({},F.ruleForm,{systemFlag:0})).then((e=>{e&&200===e.code?(c.success("添加成功"),h("ok"),w()):c.error(e.msg||"添加失败")}),(e=>{c.error(e&&e.msg||"添加失败")}))["finally"]((()=>{F.loading=!1})))}))};return n({openDialog:async()=>{F.ruleForm={name:"",moblie:"",idCard:""},F.isShowDialog=!0}}),(e,l)=>{const a=m("el-input"),o=m("el-form-item"),u=m("el-col"),n=m("el-row"),c=m("el-form"),h=m("el-button"),x=m("el-dialog");return s(),r("div",g,[d(x,{title:"新增",modelValue:F.isShowDialog,"onUpdate:modelValue":l[3]||(l[3]=e=>F.isShowDialog=e),width:"576px","close-on-click-modal":!1,onClose:w},{footer:i((()=>[t("span",p,[d(h,{onClick:w,size:"default"},{"default":i((()=>[f])),_:1}),d(h,{type:"primary",onClick:v,loading:F.loading,size:"default"},{"default":i((()=>[b])),_:1},8,["loading"])])])),"default":i((()=>[d(c,{ref_key:"formRef",ref:C,model:F.ruleForm,rules:_,size:"default","label-width":"90px"},{"default":i((()=>[d(n,null,{"default":i((()=>[d(u,{"class":"mb20"},{"default":i((()=>[d(o,{label:"客服姓名",prop:"name"},{"default":i((()=>[d(a,{modelValue:F.ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>F.ruleForm.name=e),placeholder:"请输入客服姓名",maxlength:"20",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(u,{"class":"mb20"},{"default":i((()=>[d(o,{label:"身份证号",prop:"idCard"},{"default":i((()=>[d(a,{modelValue:F.ruleForm.idCard,"onUpdate:modelValue":l[1]||(l[1]=e=>F.ruleForm.idCard=e),onKeyup:V,placeholder:"请输入身份证号",maxlength:"20",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),d(u,{"class":"mb20"},{"default":i((()=>[d(o,{label:"手机号码",prop:"moblie"},{"default":i((()=>[d(a,{modelValue:F.ruleForm.moblie,"onUpdate:modelValue":l[2]||(l[2]=e=>F.ruleForm.moblie=e),placeholder:"请输入手机号码",maxlength:"11",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{C as default};